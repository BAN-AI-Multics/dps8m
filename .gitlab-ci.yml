# SPDX-License-Identifier: MIT-0
# scspell-id: 5a5d276b-f778-11ec-bbe8-80ee73e9b8e7
# Copyright (c) 2018-2019 Charles Anthony <charles.unix.pro@gmail.com>
# Copyright (c) 2019-2020 Eric Swenson <eric@swenson.org>
# Copyright (c) 2021-2022 Jeffrey H. Johnson <trnsz@pobox.com>
# Copyright (c) 2021-2023 The DPS8M Development Team

############################################################################

.scriptAlpineSetup: &scriptAlpineSetup |
    # *scriptAlpineSetup - Update Alpine Linux and install required tools ...
    echo -e "section_start:`date +%s`:alpinesetup_section[collapsed=true]\r\e[0K\033[0;36mSetting up Alpine Linux ...\033[0m" || true
    echo "Checking for Docker ..."
    test -f /.dockerenv || exit 1
    echo "Running apk update ..."
    apk update || apk update
    echo "Running apk upgrade ..."
    apk upgrade || apk upgrade
    echo "Installing software ..."
    export ARGS="libc-dev linux-headers musl-dev gcc g++ llvm llvm-dev llvm-static clang clang-libs clang-dev git unzip zip curl wget sed tar gawk file bash coreutils make ctags lzip gzip libuv-dev libuv-static psmisc grep moreutils gnupg libtool util-linux pigz autoconf autoconf-archive bzip2 ccache popt-dev automake"; apk add ${ARGS:?} || apk add ${ARGS:?}
    ln -fs "$(command -v bash)" "/bin/sh"
    echo -e "section_end:`date +%s`:alpinesetup_section\r\e[0K" || true

############################################################################

.scriptAptInstallLibuv1: &scriptAptInstallLibuv1 |
    # *scriptAptInstallLibuv1 - Install the libuv1-dev package using apt-get
    echo -e "section_start:`date +%s`:aptinstalllibuv1_section[collapsed=true]\r\e[0K\033[0;36mInstalling libuv1-dev ...\033[0m" || true
    echo "Checking for Docker ..."
    test -f /.dockerenv || exit 1
    echo "Installing libuv1-dev ..."
    env DEBIAN_FRONTEND=noninteractive apt-get -o Dpkg::Options::="--force-confdef" -o Dpkg::Options::="--force-confold" install -y -qq libuv1-dev || env DEBIAN_FRONTEND=noninteractive apt-get -o Dpkg::Options::="--force-confdef" -o Dpkg::Options::="--force-confold" install -y -qq libuv1-dev
    echo -e "section_end:`date +%s`:aptinstalllibuv1_section\r\e[0K" || true

############################################################################

.scriptAptSetup: &scriptAptSetup |
    # *scriptAptSetup - Update and install required tools using apt-get ...
    echo -e "section_start:`date +%s`:aptgetinstall_section[collapsed=true]\r\e[0K\033[0;36mSetting up system ...\033[0m" || true
    echo "Checking for Docker ..."
    test -f /.dockerenv || exit 1
    echo "Running apt-get update ..."
    env DEBIAN_FRONTEND=noninteractive apt-get -o Dpkg::Options::="--force-confdef" -o Dpkg::Options::="--force-confold" update -y -qq || env DEBIAN_FRONTEND=noninteractive apt-get -o Dpkg::Options::="--force-confdef" -o Dpkg::Options::="--force-confold" update -y -qq
    echo "Installing software ..."
    export ARGS="apt-utils"; env DEBIAN_FRONTEND=noninteractive apt-get -o Dpkg::Options::="--force-confdef" -o Dpkg::Options::="--force-confold" install -y -qq ${ARGS:?} || env DEBIAN_FRONTEND=noninteractive apt-get -o Dpkg::Options::="--force-confdef" -o Dpkg::Options::="--force-confold" install -y -qq ${ARGS:?}
    export ARGS="gawk moreutils apt-utils gnupg2 bash curl wget git lsb-release software-properties-common time"; env DEBIAN_FRONTEND=noninteractive apt-get -o Dpkg::Options::="--force-confdef" -o Dpkg::Options::="--force-confold" install -y -qq ${ARGS:?} || env DEBIAN_FRONTEND=noninteractive apt-get -o Dpkg::Options::="--force-confdef" -o Dpkg::Options::="--force-confold" install -y -qq ${ARGS:?}
    echo "Running apt-get upgrade ..."
    env DEBIAN_FRONTEND=noninteractive apt-get -o Dpkg::Options::="--force-confdef" -o Dpkg::Options::="--force-confold" upgrade -y -qq || env DEBIAN_FRONTEND=noninteractive apt-get -o Dpkg::Options::="--force-confdef" -o Dpkg::Options::="--force-confold" upgrade -y -qq
    echo "Running apt-get dist-upgrade ..."
    env DEBIAN_FRONTEND=noninteractive apt-get -o Dpkg::Options::="--force-confdef" -o Dpkg::Options::="--force-confold" dist-upgrade -y -qq || env DEBIAN_FRONTEND=noninteractive apt-get -o Dpkg::Options::="--force-confdef" -o Dpkg::Options::="--force-confold" dist-upgrade -y -qq
    echo "Installing additional software ..."
    export ARGS="xz-utils libzstd-dev liblzma-dev lzip bash wget gcc libtool unzip autoconf-archive util-linux psmisc clang zip pigz make"; env DEBIAN_FRONTEND=noninteractive apt-get -o Dpkg::Options::="--force-confdef" -o Dpkg::Options::="--force-confold" install -y -qq ${ARGS:?} || env DEBIAN_FRONTEND=noninteractive apt-get -o Dpkg::Options::="--force-confdef" -o Dpkg::Options::="--force-confold" install -y -qq ${ARGS:?}
    echo -e "section_end:`date +%s`:aptgetinstall_section\r\e[0K" || true

############################################################################

.scriptBuildInfo: &scriptBuildInfo |
    # *scriptBuildInfo - Show information on completed build
    echo -e "section_start:`date +%s`:buildinfo_section[collapsed=true]\r\e[0K\033[0;36mBuild Information ...\033[0m" || true
    test -f ${CI_PROJECT_DIR:?}/src/dps8/dps8 && file ${CI_PROJECT_DIR:?}/src/dps8/dps8 2> /dev/null || true > /dev/null 2>&1
    test -f ${CI_PROJECT_DIR:?}/src/dps8/dps8 && ldd ${CI_PROJECT_DIR:?}/src/dps8/dps8 2> /dev/null || true > /dev/null 2>&1
    test -f ${CI_PROJECT_DIR:?}/src/dps8/dps8.exe && file ${CI_PROJECT_DIR:?}/src/dps8/dps8.exe 2> /dev/null || true > /dev/null 2>&1
    test -f ${CI_PROJECT_DIR:?}/src/prt2pdf/prt2pdf && file ${CI_PROJECT_DIR:?}/src/prt2pdf/prt2pdf 2> /dev/null || true > /dev/null 2>&1
    test -f ${CI_PROJECT_DIR:?}/src/prt2pdf/prt2pdf && ldd ${CI_PROJECT_DIR:?}/src/prt2pdf/prt2pdf 2> /dev/null || true > /dev/null 2>&1
    test -f ${CI_PROJECT_DIR:?}/src/prt2pdf/prt2pdf.exe && file ${CI_PROJECT_DIR:?}/src/prt2pdf/prt2pdf.exe 2> /dev/null || true > /dev/null 2>&1
    test -f ${CI_PROJECT_DIR:?}/src/punutil/punutil && file ${CI_PROJECT_DIR:?}/src/punutil/punutil 2> /dev/null || true > /dev/null 2>&1
    test -f ${CI_PROJECT_DIR:?}/src/punutil/punutil && ldd ${CI_PROJECT_DIR:?}/src/punutil/punutil 2> /dev/null || true > /dev/null 2>&1
    test -f ${CI_PROJECT_DIR:?}/src/punutil/punutil.exe && file ${CI_PROJECT_DIR:?}/src/punutil/punutil.exe 2> /dev/null || true > /dev/null 2>&1
    test -f ${CI_PROJECT_DIR:?}/src/vmpctool/vmpctool && file ${CI_PROJECT_DIR:?}/src/vmpctool/vmpctool 2> /dev/null || true > /dev/null 2>&1
    test -f ${CI_PROJECT_DIR:?}/src/vmpctool/vmpctool && ldd ${CI_PROJECT_DIR:?}/src/vmpctool/vmpctool 2> /dev/null || true > /dev/null 2>&1
    test -f ${CI_PROJECT_DIR:?}/src/vmpctool/vmpctool.exe && file ${CI_PROJECT_DIR:?}/src/vmpctool/vmpctool.exe 2> /dev/null || true > /dev/null 2>&1
    test -f ${CI_PROJECT_DIR:?}/src/unifdef/unifdef && file ${CI_PROJECT_DIR:?}/src/unifdef/unifdef 2> /dev/null || true > /dev/null 2>&1
    test -f ${CI_PROJECT_DIR:?}/src/unifdef/unifdef && ldd ${CI_PROJECT_DIR:?}/src/unifdef/unifdef 2> /dev/null || true > /dev/null 2>&1
    test -f ${CI_PROJECT_DIR:?}/src/unifdef/unifdef.exe && file ${CI_PROJECT_DIR:?}/src/unifdef/unifdef.exe 2> /dev/null || true > /dev/null 2>&1
    echo -e "section_end:`date +%s`:buildinfo_section\r\e[0K" || true

############################################################################

.scriptBuildlibbacktrace: &scriptBuildlibbacktrace |
    # *scriptBuildlibbacktrace - Build static libbacktrace from git master ...
    echo -e "section_start:`date +%s`:buildlibbacktrace_section[collapsed=true]\r\e[0K\033[0;36mBuilding static libbacktrace library ...\033[0m" || true
    echo "Checking for Docker ..."
    test -f /.dockerenv || exit 1
    echo "Getting libbacktrace from GitHub ..."
    wget -nv https://github.com/ianlancetaylor/libbacktrace/archive/refs/heads/master.tar.gz
    echo "Preparing libbacktrace ..."
    tar zxvf master.tar.gz && cd libbacktrace-master && autoreconf -vfi
    echo "Configuring libbacktrace ..."
    env CFLAGS="-fPIE" sh ./configure --enable-static --disable-shared --disable-werror
    echo "Compiling libbacktrace ..."
    make -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4") && make install && cd ..
    ldconfig || true
    echo "Cleaning up after libbacktrace build ..."
    rm -rf libbacktrace-master || true
    echo -e "section_end:`date +%s`:buildlibbacktrace_section\r\e[0K" || true

############################################################################

.scriptBuildlibuvLLVMMGW64-aarch64: &scriptBuildlibuvLLVMMGW64-aarch64 |
    # *scriptBuildlibuvLLVMMGW64-aarch64 - Build static libuv from git with LLVM-MinGW-Aarch64 cross-compiler ...
    echo -e "section_start:`date +%s`:buildlibuvllvmmgwaarch64_section[collapsed=true]\r\e[0K\033[0;36mBuilding static libuv with LLVM-MinGW-Aarch64 cross-compiler ...\033[0m" || true
    echo "Checking for Docker ..."
    test -f /.dockerenv || exit 1
    echo "Getting libuv from GitHub ..."
    wget -nv https://github.com/libuv/libuv/archive/v1.x.zip
    echo "Preparing libuv ..."
    unzip -xa v1.x.zip && cd libuv-1.x && sh ./autogen.sh
    echo "Configuring libuv ..."
    ./configure --disable-shared --enable-static --host=aarch64-w64-mingw32 --disable-dependency-tracking
    echo "Compiling libuv ..."
    make -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4") && make install && cd ..
    echo -e "section_end:`date +%s`:buildlibuvllvmmgwaarch64_section\r\e[0K" || true

############################################################################

.scriptBuildlibuvLLVMMGW64-armv7: &scriptBuildlibuvLLVMMGW64-armv7 |
    # *scriptBuildlibuvLLVMMGW64-armv7 - Build static libuv from git with LLVM-MinGW-ARMv7 cross-compiler ...
    echo -e "section_start:`date +%s`:buildlibuvllvmmgwarmv7_section[collapsed=true]\r\e[0K\033[0;36mBuilding static libuv with LLVM-MinGW-ARMv7 cross-compiler ...\033[0m" || true
    echo "Checking for Docker ..."
    test -f /.dockerenv || exit 1
    echo "Getting libuv from GitHub ..."
    wget -nv https://github.com/libuv/libuv/archive/v1.x.zip
    echo "Preparing libuv ..."
    unzip -xa v1.x.zip && cd libuv-1.x && sh ./autogen.sh
    echo "Configuring libuv ..."
    ./configure --disable-shared --enable-static --host=armv7-w64-mingw32 --disable-dependency-tracking
    echo "Compiling libuv ..."
    make -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4") && make install && cd ..
    echo -e "section_end:`date +%s`:buildlibuvllvmmgwarmv7_section\r\e[0K" || true

############################################################################

.scriptBuildlibuvLLVMMGW64-i686: &scriptBuildlibuvLLVMMGW64-i686 |
    # *scriptBuildlibuvLLVMMGW64-i686 - Build static libuv from git with LLVM-MinGW-i686 cross-compiler ...
    echo -e "section_start:`date +%s`:buildlibuvllvmmgwi686_section[collapsed=true]\r\e[0K\033[0;36mBuilding static libuv with LLVM-MinGW-i686 cross-compiler ...\033[0m" || true
    echo "Checking for Docker ..."
    test -f /.dockerenv || exit 1
    echo "Getting libuv from GitHub ..."
    wget -nv https://github.com/libuv/libuv/archive/v1.x.zip
    echo "Preparing libuv ..."
    unzip -xa v1.x.zip && cd libuv-1.x && sh ./autogen.sh
    echo "Configuring libuv ..."
    ./configure --disable-shared --enable-static --host=i686-w64-mingw32 --disable-dependency-tracking
    echo "Compiling libuv ..."
    make -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4") && make install && cd ..
    echo -e "section_end:`date +%s`:buildlibuvllvmmgwi686_section\r\e[0K" || true

############################################################################

.scriptBuildlibuvLLVMMGW64-x86_64: &scriptBuildlibuvLLVMMGW64-x86_64 |
    # *scriptBuildlibuvLLVMMGW64-x86_64 - Build static libuv from git with LLVM-MinGW-x86_64 cross-compiler ...
    echo -e "section_start:`date +%s`:buildlibuvllvmmgwx8664_section[collapsed=true]\r\e[0K\033[0;36mBuilding static libuv with LLVM-MinGW-x86_64 cross-compiler ...\033[0m" || true
    echo "Checking for Docker ..."
    test -f /.dockerenv || exit 1
    echo "Getting libuv from GitHub ..."
    wget -nv https://github.com/libuv/libuv/archive/v1.x.zip
    echo "Preparing libuv ..."
    unzip -xa v1.x.zip && cd libuv-1.x && sh ./autogen.sh
    echo "Configuring libuv ..."
    ./configure --disable-shared --enable-static --host=x86_64-w64-mingw32 --disable-dependency-tracking
    echo "Compiling libuv ..."
    make -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4") && make install && cd ..
    echo -e "section_end:`date +%s`:buildlibuvllvmmgwx8664_section\r\e[0K" || true

############################################################################

.scriptBuildlibuvMGW64: &scriptBuildlibuvMGW64 |
    # *scriptBuildlibuvMGW64 - Build static libuv from git with mingw64 cross-compiler ...
    echo -e "section_start:`date +%s`:buildlibuvmingw64c_section[collapsed=true]\r\e[0K\033[0;36mBuilding static libuv with mingw64 cross-compiler ...\033[0m" || true
    echo "Checking for Docker ..."
    test -f /.dockerenv || exit 1
    echo "Getting libuv from GitHub ..."
    wget -nv https://github.com/libuv/libuv/archive/v1.x.zip
    echo "Preparing libuv ..."
    unzip -xa v1.x.zip && cd libuv-1.x && sh ./autogen.sh
    echo "Configuring libuv ..."
    ./configure --disable-shared --enable-static --host=x86_64-w64-mingw32 --disable-dependency-tracking
    echo "Compiling libuv ..."
    make -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4") && make install && cd ..
    echo -e "section_end:`date +%s`:buildlibuvmingw64c_section\r\e[0K" || true

############################################################################

.scriptCommon: &scriptCommon |
    # *scriptCommon - Show common CI/CD configuration information
    echo -e "section_start:`date +%s`:common_section[collapsed=false]\r\e[0K\033[0;36mCommon Information ...\033[0m" || true
    echo "Project Name              : ${CI_PROJECT_TITLE:-Unknown}"
    echo "Project Git Commit        : ${CI_COMMIT_SHA:-Unknown}"
    echo "Project Git Branch        : ${CI_COMMIT_BRANCH:-Unknown}"
    echo "GitLab CI User Details    : ${GITLAB_USER_LOGIN:-Unknown} - ${GITLAB_USER_NAME:-Unknown} (${GITLAB_USER_ID:-Unknown}) ${GITLAB_USER_EMAIL:-}"
    echo "GitLab CI Job Name        : ${CI_JOB_NAME:-Unknown}"
    echo "GitLab CI Job ID          : ${CI_JOB_ID:-Unknown}"
    echo "GitLab CI Job Stage       : ${CI_JOB_STAGE:-Unknown}"
    echo "GitLab CI Runner Details  : ${CI_RUNNER_VERSION:-Unknown} (${CI_RUNNER_REVISION:-Unknown})"
    git status || true > /dev/null 2>&1
    ulimit -c 0 || true > /dev/null 2>&1
    echo -e "section_end:`date +%s`:common_section\r\e[0K" || true

############################################################################

.scriptCompressArtifacts: &scriptCompressArtifacts |
    # *scriptCompressArtifacts - Compress build artifacts
    echo -e "section_start:`date +%s`:compress_section[collapsed=true]\r\e[0K\033[0;36mCompress Artifacts ...\033[0m" || true
    test -f ${CI_PROJECT_DIR:?}/src/dps8/dps8 && lzip -9v ${CI_PROJECT_DIR:?}/src/dps8/dps8 2> /dev/null || true > /dev/null 2>&1
    test -f ${CI_PROJECT_DIR:?}/src/prt2pdf/prt2pdf && lzip -9v ${CI_PROJECT_DIR:?}/src/prt2pdf/prt2pdf 2> /dev/null || true > /dev/null 2>&1
    test -f ${CI_PROJECT_DIR:?}/src/punutil/punutil && lzip -9v ${CI_PROJECT_DIR:?}/src/punutil/punutil 2> /dev/null || true > /dev/null 2>&1
    test -f ${CI_PROJECT_DIR:?}/src/vmpctool/vmpctool && lzip -9v ${CI_PROJECT_DIR:?}/src/vmpctool/vmpctool 2> /dev/null || true > /dev/null 2>&1
    test -f ${CI_PROJECT_DIR:?}/src/unifdef/unifdef && lzip -9v ${CI_PROJECT_DIR:?}/src/unifdef/unifdef 2> /dev/null || true > /dev/null 2>&1
    test -f ${CI_PROJECT_DIR:?}/src/dps8/useddef.txt && lzip -9v ${CI_PROJECT_DIR:?}/src/dps8/useddef.txt 2> /dev/null || true > /dev/null 2>&1
    test -f ${CI_PROJECT_DIR:?}/src/dps8/dps8.exe && zip -9 ${CI_PROJECT_DIR:?}/dps8m.zip ${CI_PROJECT_DIR:?}/src/dps8/dps8.exe  2> /dev/null || true > /dev/null 2>&1
    test -f ${CI_PROJECT_DIR:?}/src/prt2pdf/prt2pdf.exe && zip -9 ${CI_PROJECT_DIR:?}/dps8m.zip ${CI_PROJECT_DIR:?}/src/prt2pdf/prt2pdf.exe 2> /dev/null || true > /dev/null 2>&1
    test -f ${CI_PROJECT_DIR:?}/src/vmpctool/vmpctool.exe && zip -9 ${CI_PROJECT_DIR:?}/dps8m.zip ${CI_PROJECT_DIR:?}/src/vmpctool/vmpctool.exe 2> /dev/null || true > /dev/null 2>&1
    test -f ${CI_PROJECT_DIR:?}/src/unifdef/unifdef.exe && zip -9 ${CI_PROJECT_DIR:?}/dps8m.zip ${CI_PROJECT_DIR:?}/src/unifdef/unifdef.exe 2> /dev/null || true > /dev/null 2>&1
    test -f ${CI_PROJECT_DIR:?}/src/punutil/punutil.exe && zip -9 ${CI_PROJECT_DIR:?}/dps8m.zip ${CI_PROJECT_DIR:?}/src/punutil/punutil.exe 2> /dev/null || true > /dev/null 2>&1
    test -f ${CI_PROJECT_DIR:?}/src/dps8/useddef.txt && zip -9 ${CI_PROJECT_DIR:?}/dps8m.zip ${CI_PROJECT_DIR:?}/src/dps8/useddef.txt 2> /dev/null || true > /dev/null 2>&1
    test -f ${CI_PROJECT_DIR:?}/libwinpthread-1.dll && zip -9 ${CI_PROJECT_DIR:?}/dps8m.zip ${CI_PROJECT_DIR:?}/libwinpthread-1.dll 2> /dev/null || true > /dev/null 2>&1
    echo -e "section_end:`date +%s`:compress_section\r\e[0K" || true

############################################################################

.scriptDnfSetup: &scriptDnfSetup |
    # *scriptDnfSetup - Update system and install required tools using dnf on RH-based systems ...
    echo -e "section_start:`date +%s`:dnfuinstall_section[collapsed=true]\r\e[0K\033[0;36mSetting up system ...\033[0m" || true
    echo "Checking for Docker ..."
    test -f /.dockerenv || exit 1
    echo "Configure dnf ..."
    sed -i 's/tsflags=nodocs//' /etc/dnf/dnf.conf || true
    echo "Updating system ..."
    dnf -y --refresh --best update || dnf -y --refresh --nobest update || true
    dnf -y --refresh --best update || dnf -y --refresh --nobest update || true
    dnf -y update
    echo "Installing software ..."
    export ARGS="file ccache lzip libuv-devel libtool unzip autoconf autoconf-archive util-linux psmisc zip pigz make gnupg2 bash curl wget git time gcc clang xz xz-libs xz-devel libzstd libzstd-devel dos2unix"
    dnf -y --best install ${ARGS:?} || dnf -y --nobest install ${ARGS:?} || true
    dnf -y --best install ${ARGS:?} || dnf -y --nobest install ${ARGS:?}
    echo -e "section_end:`date +%s`:dnfuinstall_section\r\e[0K" || true

############################################################################

.scriptDPS8Mods: &scriptDPS8Mods |
    # *scriptDPS8Mods - Configure build for CI/CD environment ...
    echo -e "section_start:`date +%s`:dps8mods_section[collapsed=true]\r\e[0K\033[0;36mConfigure build system ...\033[0m" || true
    echo -n "Setting Build string ... "
    echo "The DPS8M Development Team - Build ${CI_PIPELINE_IID:-${CI_JOB_ID:-0}}" 2> /dev/null | tee .builder.txt 2> /dev/null || true > /dev/null 2>&1
    echo ""
    echo -e "section_end:`date +%s`:dps8mods_section\r\e[0K" || true

############################################################################

.scriptExtraInfo: &scriptExtraInfo |
    # *scriptExtraInfo - Show extra system information ...
    echo -e "section_start:`date +%s`:extrainfo_section[collapsed=true]\r\e[0K\033[0;36mExtra system information ...\033[0m" || true
    echo -n "uname -a         : "; uname -a 2> /dev/null || true > /dev/null 2>&1; echo ""
    echo -n "cat /etc/*elease : "; cat /etc/*elease 2> /dev/null | awk '{ print $0", " }' | xargs | sed 's/,$//' || true > /dev/null 2>&1; echo ""
    echo -n "uptime           : "; uptime 2> /dev/null || true > /dev/null 2>&1; echo ""
    echo -n "df               : "; df . 2> /dev/null | tail -1 || true > /dev/null 2>&1; echo ""
    echo -n "git status       : "; git status 2> /dev/null | awk '{ print $0", " }' | xargs | sed 's/,$//' || true > /dev/null 2>&1; echo ""
    echo -n "ulimit -a        : "; ulimit -a 2> /dev/null | awk '{ print $0", " }' | xargs | sed 's/,$//' || true > /dev/null 2>&1; echo ""
    echo -e "section_end:`date +%s`:extrainfo_section\r\e[0K" || true

############################################################################

.scriptInstallNfpm: &scriptInstallNfpm |
    # *scriptInstallNfpm - NFPM placeholder
    true

############################################################################

.scriptSanity: &scriptSanity |
    # *scriptSanity - Ensure commit is on a branch and valid working directory
    echo -e "section_start:`date +%s`:sanity_section[collapsed=true]\r\e[0K\033[0;36mSanity Check ...\033[0m" || true
    echo "Checking that a branch exists ..."
    echo "${CI_COMMIT_BRANCH:?}" > /dev/null 2>&1
    echo "Checking for a valid working directory ..."
    IPWD="$(pwd -P)" && export IPWD && if [ "X${CI_PROJECT_DIR:?}X" != "X${IPWD:?}X" ]; then { exit 1; }; fi
    echo "Checking out branch \"${CI_COMMIT_BRANCH:?}\" with git ..."
    git checkout -b "${CI_COMMIT_BRANCH:?}"
    echo -e "section_end:`date +%s`:sanity_section\r\e[0K" || true

############################################################################

.scriptVerifyVersion: &scriptVerifyVersion |
    # *scriptVerifyVersion - Smoke-test ...
    ./src/dps8/dps8 --version | grep 'imulator'
    echo "SHOW VERSION" | ./src/dps8/dps8 -t | grep 'imulator '
    printf '%s\n' "SHOW BUILDINFO" "ECHO" "SHOW VERSION" | ./src/dps8/dps8 -t

############################################################################
# Workflow

workflow:
  rules:
    - if: $CI_COMMIT_BRANCH =~ /-noci$/
      when: never
    - if: $CI_PIPELINE_SOURCE == "merge_request_event"
      when: never
    - if: $CI_PIPELINE_SOURCE == "chat"
      when: never
    - if: $CI_PIPELINE_SOURCE == "external_pull_request_event"
      when: never
    - if: $CI_PIPELINE_SOURCE == "external"
      when: never
    - if: $CI_COMMIT_TAG
      when: never
    - when: always

############################################################################
# CI/CD Stages

stages:
  - build
  - cmb_test
  - test
  - src_test
  - ci_test
  - docs
  - nsis_installer
  - coverity_test
  - deploy

############################################################################
# Jobs

Linux/x86_64, Alpine Edge, Clang, GCC:
  image:
    name: alpine:edge
    entrypoint: [ '/bin/sh', '-c', 'sed -i "s/https/http/g" /etc/apk/repositories; apk update; apk add bash; apk add bash && ln -snf /bin/bash /bin/sh && exec /bin/bash -c $0' ]
  stage: build
  tags:
    - Docker-x64
    - amd64
    - Linux
  script:
    - *scriptAlpineSetup
    - *scriptInstallNfpm
    - *scriptSanity
    - *scriptCommon
    - *scriptExtraInfo
    - *scriptDPS8Mods
    - env CFLAGS="-Dfopen64=fopen -Dftello64=ftello -Doff64_t=off_t -Dfseeko64=fseeko" CC=clang make -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4")
    - printf %s\\n "SHOW VERSION" | ./src/dps8/dps8 -t
    - *scriptBuildInfo
    - make distclean
    - *scriptDPS8Mods
    - env CFLAGS="-Dfopen64=fopen -Dftello64=ftello -Doff64_t=off_t -Dfseeko64=fseeko" LDFLAGS="-static" CC=gcc make -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4")
    - printf %s\\n "SHOW VERSION" | ./src/dps8/dps8 -t
    - *scriptBuildInfo
    - *scriptVerifyVersion
    - export DISTDIR="dps8m-${CI_COMMIT_SHORT_SHA:?}"
    - mkdir -p "src/${DISTDIR:?}"
    - cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"
    - cp -f src/dps8/dps8 src/prt2pdf/prt2pdf src/punutil/punutil "src/${DISTDIR:?}"
    - ( cd src && tar cf ../dps8m-git-linux-x86.tar "./${DISTDIR:?}"; )
    - pigz -C "${CI_COMMIT_SHA:?}" -9 -f -m -n dps8m-git-linux-x86.tar
    - *scriptCompressArtifacts
  dependencies: []
  artifacts:
    expire_in: 1 day
    paths:
      - dps8m-git-linux-x86.tar.gz
      - src/dps8/dps8.lz
      - src/prt2pdf/prt2pdf.lz
      - src/punutil/punutil.lz
      - src/dps8/useddef.txt.lz
  retry: 2
  timeout: 90 minutes
  interruptible: true

############################################################################

Linux/powerpc64el, IBM Advance Toolchain 17:
  stage: build
  tags:
    - Linux
    - Cross-AT16
    - Linux-Shell
  script:
    - export GLCICD_JOB="crossAT17job" && export DTIMESTAMP="$(stat -c "%Y" /etc/machine-id)"
    - *scriptSanity
    - *scriptCommon
    - export DISTDIR="dps8m-${CI_COMMIT_SHORT_SHA:?}"
    - *scriptExtraInfo
    - *scriptDPS8Mods
    - echo -e "section_start:`date +%s`:libuv1000setup_section[collapsed=true]\r\e[0K\033[0;36mBuilding libuv ...\033[0m" || true
    - env LOCAL_CONFOPTS="--host=powerpc64le-linux-gnu" CC="/opt/at17.0/bin/powerpc64le-linux-gnu-gcc" CFLAGS="-DNO_WARN_X86_INTRINSICS -ftree-vectorize -fpeel-loops -mcpu=power8 -mtune=power8 -fsigned-char -flto" gmake -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4") libuvrel
    - echo -e "section_end:`date +%s`:libuv1000setup_section\r\e[0K" || true
    - env CC="/opt/at17.0/bin/powerpc64le-linux-gnu-gcc" CFLAGS="-DNO_WARN_X86_INTRINSICS -ftree-vectorize -fpeel-loops -mcpu=power8 -mtune=power8 -fsigned-char -flto" gmake -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4")
    - mkdir -p "src/${DISTDIR:?}"
    - cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"
    - cp -f src/dps8/dps8 src/prt2pdf/prt2pdf src/punutil/punutil "src/${DISTDIR:?}"
    - ( cd src && tar cf ../dps8m-git-linux-ate.tar "./${DISTDIR:?}"; )
    - pigz -C "${CI_COMMIT_SHA:?}" -9 -f -m -n dps8m-git-linux-ate.tar
    - rm -rf "src/${DISTDIR:?}"
    - gmake distclean
    - *scriptDPS8Mods
    - echo -e "section_start:`date +%s`:libuv1001setup_section[collapsed=true]\r\e[0K\033[0;36mBuilding libuv ...\033[0m" || true
    - env LOCAL_CONFOPTS="--host=powerpc64le-linux-gnu" CC="/opt/at17.0/bin/powerpc64le-linux-gnu-gcc" CFLAGS="-DNO_WARN_X86_INTRINSICS -ftree-vectorize -fpeel-loops -mcpu=power9 -mtune=power9 -fsigned-char -flto" gmake -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4") libuvrel
    - echo -e "section_end:`date +%s`:libuv1001setup_section\r\e[0K" || true
    - env CC="/opt/at17.0/bin/powerpc64le-linux-gnu-gcc" CFLAGS="-DNO_WARN_X86_INTRINSICS -ftree-vectorize -fpeel-loops -mcpu=power9 -mtune=power9 -fsigned-char -flto" gmake -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4")
    - mkdir -p "src/${DISTDIR:?}"
    - cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"
    - cp -f src/dps8/dps8 src/prt2pdf/prt2pdf src/punutil/punutil "src/${DISTDIR:?}"
    - ( cd src && tar cf ../dps8m-git-linux-atn.tar "./${DISTDIR:?}"; )
    - pigz -C "${CI_COMMIT_SHA:?}" -9 -f -m -n dps8m-git-linux-atn.tar
    - rm -rf "src/${DISTDIR:?}"
    - gmake distclean
    - *scriptDPS8Mods
    - echo -e "section_start:`date +%s`:libuv1002setup_section[collapsed=true]\r\e[0K\033[0;36mBuilding libuv ...\033[0m" || true
    - env LOCAL_CONFOPTS="--host=powerpc64le-linux-gnu" CC="/opt/at17.0/bin/powerpc64le-linux-gnu-gcc" CFLAGS="-DNO_WARN_X86_INTRINSICS -ftree-vectorize -fpeel-loops -mcpu=power10 -mtune=power10 -fsigned-char -flto" gmake -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4") libuvrel
    - echo -e "section_end:`date +%s`:libuv1002setup_section\r\e[0K" || true
    - env CC="/opt/at17.0/bin/powerpc64le-linux-gnu-gcc" CFLAGS="-DNO_WARN_X86_INTRINSICS -ftree-vectorize -fpeel-loops -mcpu=power10 -mtune=power10 -fsigned-char -flto" gmake -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4")
    - mkdir -p "src/${DISTDIR:?}"
    - cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"
    - cp -f src/dps8/dps8 src/prt2pdf/prt2pdf src/punutil/punutil "src/${DISTDIR:?}"
    - ( cd src && tar cf ../dps8m-git-linux-att.tar "./${DISTDIR:?}"; )
    - pigz -C "${CI_COMMIT_SHA:?}" -9 -f -m -n dps8m-git-linux-att.tar
  dependencies: []
  artifacts:
    expire_in: 1 day
    paths:
      - dps8m-git-linux-ate.tar.gz
      - dps8m-git-linux-atn.tar.gz
      - dps8m-git-linux-att.tar.gz
  retry: 2
  timeout: 90 minutes
  interruptible: true

############################################################################

Cross-compiled release binaries:
  image: fedora:40
  stage: build
  tags:
    - Docker-x64
    - amd64
    - Linux
  parallel: 4
  script:
    - export GLCICD_JOB="ReleaseCross" && export DTIMESTAMP="$(stat -c "%Y" /etc/machine-id)"
    - ulimit -c 0 2> /dev/null || true > /dev/null 2>&1
    - export CI_SKIP_MKREBUILD=1
    - mkdir -p /tmp 2> /dev/null || true > /dev/null 2>&1
    - *scriptDnfSetup
    - *scriptInstallNfpm
    - *scriptSanity
    - *scriptCommon
    - *scriptExtraInfo
    - PARALLEL_CI_COUNT=0
    - export DISTDIR="dps8m-${CI_COMMIT_SHORT_SHA:?}"
    - export LOCAL_CLONEOPTS=""
    - git config --global user.name "GitLab CI" || true
    - git config --global user.email "ci@example.com" || true
    - echo -e "section_start:`date +%s`:crossbsetup_section[collapsed=true]\r\e[0K\033[0;36mInstalling additional packages ...\033[0m" || true
    - dnf -y install --best copr-cli dnf-utils || dnf -y install --nobest copr-cli dnf-utils || true
    - yes | dnf copr enable "@fedora-llvm-team/llvm16" || true
    - dnf -y install "@core" "@Development Tools" "@C Development Tools and Libraries" gcc clang || true
    - dnf -y --best update || dnf -y --nobest update || true
    - dnf -y --best update || dnf -y --nobest update
    - export JOB_PKGS="dos2unix libmd libmd-devel libbsd libbsd-devel tar bzip2 lzip wget libzstd-devel libzstd zlib zlib-devel zstd libzstd libzstd-devel brotli-devel brotli libbrotli libcom_err libxcrypt openssl-devel openssl libcurl libcurl-devel elfutils-debuginfod-client elfutils-debuginfod expat-devel expat libffi libffi-devel gc-devel libevent-devel libgcc gmp-devel krb5-devel compat-guile18 guile-devel guile22-devel libidn2-devel libidn libidn-devel keyutils-libs-devel openldap-devel libtool-ltdl-devel xz-devel mpfr-devel msgpack-devel pcre2-devel libselinux-devel libssh-devel libssh2-devel ncurses-devel libunistring xxhash-devel qemu-user-binfmt qemu qemu-tools qemu-common qemu-user qemu-img qemu-user-static sudo lld lld-devel llvm llvm-devel clang clang-devel"
    - dnf -y install --best ${JOB_PKGS:?} || dnf -y install --nobest ${JOB_PKGS:?}
    - unset JOB_PKGS > /dev/null 2>&1 || true
    - unexport JOB_PKGS > /dev/null 2>&1 || true
    - echo -e "section_end:`date +%s`:crossbsetup_section\r\e[0K" || true
    - PARALLEL_CI_COUNT=$(( PARALLEL_CI_COUNT + 1 )) ; test ${PARALLEL_CI_COUNT:?} -gt ${CI_NODE_TOTAL:?} && PARALLEL_CI_COUNT=1 || true
    - wget --quiet "https://gitlab.com/dps8m/dps8m-archive/-/raw/master/CI/toolchains/arm64-unknown-netbsdelf9.3.tar.lz" -O /arm64-unknown-netbsdelf9.3.tar.lz
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { tar axf /arm64-unknown-netbsdelf9.3.tar.lz; }; fi
    - *scriptDPS8Mods
    - export DPS8_CPUTYPE=armv8-a
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env CFLAGS="-m64 -fpic -fPIC -march=${DPS8_CPUTYPE} -Wno-unused-command-line-argument -Wno-char-subscripts" LOCAL_CONFOPTS="--host=arm64-unknown-netbsdelf9.3" CSTD="gnu11" CC="clang -I$(pwd)/arm64-unknown-netbsdelf9.3/usr/include -L$(pwd)/arm64-unknown-netbsdelf9.3/usr/lib -B$(pwd)/arm64-unknown-netbsdelf9.3/usr/lib --target=arm64-unknown-netbsdelf9.3 -fuse-ld=lld" gmake libuvrel LIBDL="" -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4") && env CFLAGS="-m64 -fpic -fPIC -march=${DPS8_CPUTYPE} -Wno-unused-command-line-argument -Wno-char-subscripts" CSTD="gnu11" LDFLAGS="-static -lgcc -lm" CC="clang -I$(pwd)/arm64-unknown-netbsdelf9.3/usr/include -L$(pwd)/arm64-unknown-netbsdelf9.3/usr/lib -B$(pwd)/arm64-unknown-netbsdelf9.3/usr/lib --target=arm64-unknown-netbsdelf9.3 -fuse-ld=lld" NO_LTO=1 gmake LIBDL="" LOCALLIBS="-lm" -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { mkdir -p "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f src/dps8/dps8 src/prt2pdf/prt2pdf src/punutil/punutil "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( cd src && tar cf ../dps8m-git-nbd93-a64.tar "./${DISTDIR:?}"; ); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { pigz -C "${CI_COMMIT_SHA:?}" -9 -f -m -n dps8m-git-nbd93-a64.tar; }; fi
    - rm -rf "src/${DISTDIR:?}"
    - git clean -fdxq -e '*.tar*' -e 'dps8m*' -e '*netbsd*'
    - chmod -R u+rwx arm64-unknown-netbsdelf9.3 2> /dev/null || true
    - rm -rf arm64-unknown-netbsdelf9.3 2> /dev/null || true
    - PARALLEL_CI_COUNT=$(( PARALLEL_CI_COUNT + 1 )) ; test ${PARALLEL_CI_COUNT:?} -gt ${CI_NODE_TOTAL:?} && PARALLEL_CI_COUNT=1 || true
    - wget --quiet "https://gitlab.com/dps8m/dps8m-archive/-/raw/master/CI/toolchains/powerpc-ibm-aix7.2.tar.lz" -O /powerpc-ibm-aix7.2.tar.lz
    - ( cd / && tar axf powerpc-ibm-aix7.2.tar.lz )
    - *scriptDPS8Mods
    - git clean -fdxq -e '*.tar*' -e 'dps8m*'
    - export DPS8_CPUTYPE=power7
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/src/AIX-crossgcc/out/bin:${PATH:-} CFLAGS="-maix64 -mcpu=${DPS8_CPUTYPE:?}" LDFLAGS="-maix64 -Wl,-b64 -static-libgcc" NO_LTO=1 LOCAL_CONFOPTS="--host=powerpc-ibm-aix7.2.0.0" CC=/home/jhj/src/AIX-crossgcc/out/bin/powerpc-ibm-aix7.2.0.0-gcc gmake NO_LTO=1 libuvrel -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( rm libuv-local/*.tar.gz; (cd libuv-local; ln -fs libuv-* libuv); cd libuv-local/libuv && env PATH=/home/jhj/src/AIX-crossgcc/out/bin:${PATH:-} gmake -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4") ); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env LOCALLIBS="-ldl -lrt -lbsd -lpthread -lm -lc -lperfstat" PATH=/home/jhj/src/AIX-crossgcc/out/bin:${PATH:-} CFLAGS="-maix64 -mcpu=${DPS8_CPUTYPE:?}" LDFLAGS="-static-libgcc -ldl -lrt -lbsd -lpthread -lm -lc -lperfstat -maix64 -Wl,-b64" CC=/home/jhj/src/AIX-crossgcc/out/bin/powerpc-ibm-aix7.2.0.0-gcc gmake -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4") NO_LTO=1 MATHLIB="-lm -lpthread" LOCALOBJS="../../libuv-local/libuv/src/*.o ../../libuv-local/libuv/src/unix/*.o" LIBUV="" PULIBS="-lpopt" EMPTYLIBS=""; }; fi
    - mkdir -p "src/${DISTDIR:?}"
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f src/dps8/dps8 src/prt2pdf/prt2pdf src/punutil/punutil "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( cd src && tar cf ../dps8m-git-aixv7-pw7.tar "./${DISTDIR:?}"; ); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { pigz -C "${CI_COMMIT_SHA:?}" -9 -f -m -n dps8m-git-aixv7-pw7.tar; }; fi
    - rm -rf "src/${DISTDIR:?}"
    - git clean -fdxq -e '*.tar*' -e 'dps8m*'
    - PARALLEL_CI_COUNT=$(( PARALLEL_CI_COUNT + 1 )) ; test ${PARALLEL_CI_COUNT:?} -gt ${CI_NODE_TOTAL:?} && PARALLEL_CI_COUNT=1 || true
    - *scriptDPS8Mods
    - export DPS8_CPUTYPE=power8
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/src/AIX-crossgcc/out/bin:${PATH:-} CFLAGS="-maix64 -mcpu=${DPS8_CPUTYPE:?}" LDFLAGS="-maix64 -Wl,-b64 -static-libgcc" NO_LTO=1 LOCAL_CONFOPTS="--host=powerpc-ibm-aix7.2.0.0" CC=/home/jhj/src/AIX-crossgcc/out/bin/powerpc-ibm-aix7.2.0.0-gcc gmake NO_LTO=1 libuvrel -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( rm libuv-local/*.tar.gz; (cd libuv-local; ln -fs libuv-* libuv); cd libuv-local/libuv && env PATH=/home/jhj/src/AIX-crossgcc/out/bin:${PATH:-} gmake -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4") ); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env LOCALLIBS="-ldl -lrt -lbsd -lpthread -lm -lc -lperfstat" PATH=/home/jhj/src/AIX-crossgcc/out/bin:${PATH:-} CFLAGS="-maix64 -mcpu=${DPS8_CPUTYPE:?}" LDFLAGS="-static-libgcc -ldl -lrt -lbsd -lpthread -lm -lc -lperfstat -maix64 -Wl,-b64" CC=/home/jhj/src/AIX-crossgcc/out/bin/powerpc-ibm-aix7.2.0.0-gcc gmake -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4") NO_LTO=1 MATHLIB="-lm -lpthread" LOCALOBJS="../../libuv-local/libuv/src/*.o ../../libuv-local/libuv/src/unix/*.o" LIBUV="" PULIBS="-lpopt" EMPTYLIBS=""; }; fi
    - mkdir -p "src/${DISTDIR:?}"
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f src/dps8/dps8 src/prt2pdf/prt2pdf src/punutil/punutil "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( cd src && tar cf ../dps8m-git-aixv7-pw8.tar "./${DISTDIR:?}"; ); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { pigz -C "${CI_COMMIT_SHA:?}" -9 -f -m -n dps8m-git-aixv7-pw8.tar; }; fi
    - rm -rf "src/${DISTDIR:?}"
    - git clean -fdxq -e '*.tar*' -e 'dps8m*'
    - PARALLEL_CI_COUNT=$(( PARALLEL_CI_COUNT + 1 )) ; test ${PARALLEL_CI_COUNT:?} -gt ${CI_NODE_TOTAL:?} && PARALLEL_CI_COUNT=1 || true
    - *scriptDPS8Mods
    - export DPS8_CPUTYPE=power9
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/src/AIX-crossgcc/out/bin:${PATH:-} CFLAGS="-maix64 -mcpu=${DPS8_CPUTYPE:?}" LDFLAGS="-maix64 -Wl,-b64 -static-libgcc" NO_LTO=1 LOCAL_CONFOPTS="--host=powerpc-ibm-aix7.2.0.0" CC=/home/jhj/src/AIX-crossgcc/out/bin/powerpc-ibm-aix7.2.0.0-gcc gmake NO_LTO=1 libuvrel -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( rm libuv-local/*.tar.gz; (cd libuv-local; ln -fs libuv-* libuv); cd libuv-local/libuv && env PATH=/home/jhj/src/AIX-crossgcc/out/bin:${PATH:-} gmake -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4") ); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env LOCALLIBS="-ldl -lrt -lbsd -lpthread -lm -lc -lperfstat" PATH=/home/jhj/src/AIX-crossgcc/out/bin:${PATH:-} CFLAGS="-maix64 -mcpu=${DPS8_CPUTYPE:?}" LDFLAGS="-static-libgcc -ldl -lrt -lbsd -lpthread -lm -lc -lperfstat -maix64 -Wl,-b64" CC=/home/jhj/src/AIX-crossgcc/out/bin/powerpc-ibm-aix7.2.0.0-gcc gmake -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4") NO_LTO=1 MATHLIB="-lm -lpthread" LOCALOBJS="../../libuv-local/libuv/src/*.o ../../libuv-local/libuv/src/unix/*.o" LIBUV="" PULIBS="-lpopt" EMPTYLIBS=""; }; fi
    - mkdir -p "src/${DISTDIR:?}"
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f src/dps8/dps8 src/prt2pdf/prt2pdf src/punutil/punutil "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( cd src && tar cf ../dps8m-git-aixv7-pw9.tar "./${DISTDIR:?}"; ); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { pigz -C "${CI_COMMIT_SHA:?}" -9 -f -m -n dps8m-git-aixv7-pw9.tar; }; fi
    - rm -rf "src/${DISTDIR:?}"
    - git clean -fdxq -e '*.tar*' -e 'dps8m*'
    - PARALLEL_CI_COUNT=$(( PARALLEL_CI_COUNT + 1 )) ; test ${PARALLEL_CI_COUNT:?} -gt ${CI_NODE_TOTAL:?} && PARALLEL_CI_COUNT=1 || true
    - *scriptDPS8Mods
    - export DPS8_CPUTYPE=power10
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/src/AIX-crossgcc/out/bin:${PATH:-} CFLAGS="-maix64 -mcpu=${DPS8_CPUTYPE:?}" LDFLAGS="-maix64 -Wl,-b64 -static-libgcc" NO_LTO=1 LOCAL_CONFOPTS="--host=powerpc-ibm-aix7.2.0.0" CC=/home/jhj/src/AIX-crossgcc/out/bin/powerpc-ibm-aix7.2.0.0-gcc gmake NO_LTO=1 libuvrel -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( rm libuv-local/*.tar.gz; (cd libuv-local; ln -fs libuv-* libuv); cd libuv-local/libuv && env PATH=/home/jhj/src/AIX-crossgcc/out/bin:${PATH:-} gmake -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4") ); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env LOCALLIBS="-ldl -lrt -lbsd -lpthread -lm -lc -lperfstat" PATH=/home/jhj/src/AIX-crossgcc/out/bin:${PATH:-} CFLAGS="-maix64 -mcpu=${DPS8_CPUTYPE:?}" LDFLAGS="-static-libgcc -ldl -lrt -lbsd -lpthread -lm -lc -lperfstat -maix64 -Wl,-b64" CC=/home/jhj/src/AIX-crossgcc/out/bin/powerpc-ibm-aix7.2.0.0-gcc gmake -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4") NO_LTO=1 MATHLIB="-lm -lpthread" LOCALOBJS="../../libuv-local/libuv/src/*.o ../../libuv-local/libuv/src/unix/*.o" LIBUV="" PULIBS="-lpopt" EMPTYLIBS=""; }; fi
    - mkdir -p "src/${DISTDIR:?}"
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f src/dps8/dps8 src/prt2pdf/prt2pdf src/punutil/punutil "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( cd src && tar cf ../dps8m-git-aixv7-p10.tar "./${DISTDIR:?}"; ); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { pigz -C "${CI_COMMIT_SHA:?}" -9 -f -m -n dps8m-git-aixv7-p10.tar; }; fi
    - rm -rf "src/${DISTDIR:?}"
    - git clean -fdxq -e '*.tar*' -e 'dps8m*'
    - rm -rf /home/jhj/src/AIX-crossgcc/
    - PARALLEL_CI_COUNT=$(( PARALLEL_CI_COUNT + 1 )) ; test ${PARALLEL_CI_COUNT:?} -gt ${CI_NODE_TOTAL:?} && PARALLEL_CI_COUNT=1 || true
    - wget --quiet "https://gitlab.com/dps8m/dps8m-archive/-/raw/master/CI/toolchains/m68k-local-linux-musl.tar.lz" -O /m68k-local-linux-musl.tar.lz
    - ( mkdir -p /home/jhj/x-tools && cd /home/jhj/x-tools && tar axf /m68k-local-linux-musl.tar.lz )
    - *scriptDPS8Mods
    - export DPS8_CPUTYPE=68040
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/m68k-local-linux-musl/bin:${PATH:-} CFLAGS="-mcpu=${DPS8_CPUTYPE:?}" LDFLAGS="-static" LOCAL_CONFOPTS="--host=m68k-local-linux-musl" CC=/home/jhj/x-tools/m68k-local-linux-musl/bin/m68k-local-linux-musl-gcc gmake libuvdev -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/m68k-local-linux-musl/bin:${PATH:-} CFLAGS="-mcpu=${DPS8_CPUTYPE:?} -Dfopen64=fopen -Dftello64=ftello -Doff64_t=off_t -Dfseeko64=fseeko" LDFLAGS="-static" CC=/home/jhj/x-tools/m68k-local-linux-musl/bin/m68k-local-linux-musl-gcc gmake NEED_128=1 LOCALLIBS="-latomic" -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - mkdir -p "src/${DISTDIR:?}"
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f src/dps8/dps8 src/prt2pdf/prt2pdf src/punutil/punutil "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( cd src && tar cf ../dps8m-git-linux-040.tar "./${DISTDIR:?}"; ); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { pigz -C "${CI_COMMIT_SHA:?}" -9 -f -m -n dps8m-git-linux-040.tar; }; fi
    - rm -rf "src/${DISTDIR:?}"
    - git clean -fdxq -e '*.tar*' -e 'dps8m*'
    - PARALLEL_CI_COUNT=$(( PARALLEL_CI_COUNT + 1 )) ; test ${PARALLEL_CI_COUNT:?} -gt ${CI_NODE_TOTAL:?} && PARALLEL_CI_COUNT=1 || true
    - *scriptDPS8Mods
    - export DPS8_CPUTYPE=68030
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/m68k-local-linux-musl/bin:${PATH:-} CFLAGS="-mcpu=${DPS8_CPUTYPE:?}" LDFLAGS="-static" LOCAL_CONFOPTS="--host=m68k-local-linux-musl" CC=/home/jhj/x-tools/m68k-local-linux-musl/bin/m68k-local-linux-musl-gcc gmake libuvdev -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/m68k-local-linux-musl/bin:${PATH:-} CFLAGS="-mcpu=${DPS8_CPUTYPE:?} -Dfopen64=fopen -Dftello64=ftello -Doff64_t=off_t -Dfseeko64=fseeko" LDFLAGS="-static" CC=/home/jhj/x-tools/m68k-local-linux-musl/bin/m68k-local-linux-musl-gcc gmake NEED_128=1 LOCALLIBS="-latomic" -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - mkdir -p "src/${DISTDIR:?}"
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f src/dps8/dps8 src/prt2pdf/prt2pdf src/punutil/punutil "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( cd src && tar cf ../dps8m-git-linux-030.tar "./${DISTDIR:?}"; ); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { pigz -C "${CI_COMMIT_SHA:?}" -9 -f -m -n dps8m-git-linux-030.tar; }; fi
    - rm -rf "src/${DISTDIR:?}"
    - git clean -fdxq -e '*.tar*' -e 'dps8m*'
    - rm -rf /home/jhj/x-tools/m68k-local-linux-musl
    - PARALLEL_CI_COUNT=$(( PARALLEL_CI_COUNT + 1 )) ; test ${PARALLEL_CI_COUNT:?} -gt ${CI_NODE_TOTAL:?} && PARALLEL_CI_COUNT=1 || true
    - *scriptDPS8Mods
    - wget --quiet "https://gitlab.com/dps8m/dps8m-archive/-/raw/master/CI/toolchains/x86_64-unknown-haiku.tar.lz" -O /x86_64-unknown-haiku.tar.lz
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( mkdir -p /home/jhj/x-tools && cd /home/jhj/x-tools && tar axf /x86_64-unknown-haiku.tar.lz ); }; fi
    - unset DPS8_CPUTYPE > /dev/null 2>&1 || true
    - unexport DPS8_CPUTYPE > /dev/null 2>&1 || true
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/x86_64-unknown-haiku/generated/cross-tools-x86_64/bin/:${PATH:-} LOCAL_CONFOPTS="--host=x86_64-unknown-haiku" CC=/home/jhj/x-tools/x86_64-unknown-haiku/generated/cross-tools-x86_64/bin//x86_64-unknown-haiku-gcc gmake libuvdev -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env CC=/home/jhj/x-tools/x86_64-unknown-haiku/generated/cross-tools-x86_64/bin/x86_64-unknown-haiku-gcc gmake LIBS="../../libuv-local/local/lib/libuv.a -lnetwork" EMPTYLIBS="-lbsd" -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - mkdir -p "src/${DISTDIR:?}"
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f src/dps8/dps8 src/prt2pdf/prt2pdf src/punutil/punutil "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( cd src && tar cf ../dps8m-git-haiku-x64.tar "./${DISTDIR:?}"; ); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { pigz -C "${CI_COMMIT_SHA:?}" -9 -f -m -n dps8m-git-haiku-x64.tar; }; fi
    - rm -rf "src/${DISTDIR:?}"
    - git clean -fdxq -e '*.tar*' -e 'dps8m*'
    - rm -rf /home/jhj/x-tools/x86_64-unknown-haiku/
    - PARALLEL_CI_COUNT=$(( PARALLEL_CI_COUNT + 1 )) ; test ${PARALLEL_CI_COUNT:?} -gt ${CI_NODE_TOTAL:?} && PARALLEL_CI_COUNT=1 || true
    - wget --quiet "https://github.com/johnsonjh/ndk/releases/download/r26c/android-ndk-r27-linux.tar.lz" -O /android-ndk.tar.lz
    - ( mkdir -p /home/jhj/x-tools && cd /home/jhj/x-tools && tar axf /android-ndk.tar.lz )
    - *scriptDPS8Mods
    - unset DPS8_CPUTYPE > /dev/null 2>&1 || true
    - unexport DPS8_CPUTYPE > /dev/null 2>&1 || true
    - ln -fs /home/jhj/x-tools/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin/x86_64-linux-android24-clang /home/jhj/x-tools/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin/x86_64-linux-android24-gcc
    - ln -fs /home/jhj/x-tools/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin/x86_64-linux-android24-clang /home/jhj/x-tools/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin/x86_64-linux-android24-cc
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin:${PATH:-} LOCAL_CONFOPTS="--host=x86_64-linux-android24" CC=/home/jhj/x-tools/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin/x86_64-linux-android24-clang gmake libuvdev -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin:${PATH:-} CC=/home/jhj/x-tools/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin/x86_64-linux-android24-clang LIBUTIL="" gmake -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4") LIBS="../../libuv-local/libuv/../local/lib/libuv.a -ldl"; }; fi
    - mkdir -p "src/${DISTDIR:?}"
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f src/dps8/dps8 src/prt2pdf/prt2pdf src/punutil/punutil "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( cd src && tar cf ../dps8m-git-ndk24-x64.tar "./${DISTDIR:?}"; ); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { pigz -C "${CI_COMMIT_SHA:?}" -9 -f -m -n dps8m-git-ndk24-x64.tar; }; fi
    - rm -rf "src/${DISTDIR:?}"
    - git clean -fdxq -e '*.tar*' -e 'dps8m*'
    - PARALLEL_CI_COUNT=$(( PARALLEL_CI_COUNT + 1 )) ; test ${PARALLEL_CI_COUNT:?} -gt ${CI_NODE_TOTAL:?} && PARALLEL_CI_COUNT=1 || true
    - *scriptDPS8Mods
    - unset DPS8_CPUTYPE > /dev/null 2>&1 || true
    - unexport DPS8_CPUTYPE > /dev/null 2>&1 || true
    - ln -fs /home/jhj/x-tools/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin/i686-linux-android24-clang /home/jhj/x-tools/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin/i686-linux-android24-gcc
    - ln -fs /home/jhj/x-tools/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin/i686-linux-android24-clang /home/jhj/x-tools/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin/i686-linux-android24-cc
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin:${PATH:-} LOCAL_CONFOPTS="--host=i686-linux-android24" CC=/home/jhj/x-tools/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin/i686-linux-android24-clang gmake libuvdev -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin:${PATH:-} CC=/home/jhj/x-tools/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin/i686-linux-android24-clang LIBUTIL="" gmake -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4") LIBS="../../libuv-local/libuv/../local/lib/libuv.a -ldl" NEED_128=1; }; fi
    - mkdir -p "src/${DISTDIR:?}"
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f src/dps8/dps8 src/prt2pdf/prt2pdf src/punutil/punutil "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( cd src && tar cf ../dps8m-git-ndk24-x32.tar "./${DISTDIR:?}"; ); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { pigz -C "${CI_COMMIT_SHA:?}" -9 -f -m -n dps8m-git-ndk24-x32.tar; }; fi
    - rm -rf "src/${DISTDIR:?}"
    - git clean -fdxq -e '*.tar*' -e 'dps8m*'
    - PARALLEL_CI_COUNT=$(( PARALLEL_CI_COUNT + 1 )) ; test ${PARALLEL_CI_COUNT:?} -gt ${CI_NODE_TOTAL:?} && PARALLEL_CI_COUNT=1 || true
    - *scriptDPS8Mods
    - unset DPS8_CPUTYPE > /dev/null 2>&1 || true
    - unexport DPS8_CPUTYPE > /dev/null 2>&1 || true
    - ln -fs /home/jhj/x-tools/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin/i686-linux-android29-clang /home/jhj/x-tools/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin/i686-linux-android29-gcc
    - ln -fs /home/jhj/x-tools/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin/i686-linux-android29-clang /home/jhj/x-tools/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin/i686-linux-android29-cc
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin:${PATH:-} LOCAL_CONFOPTS="--host=i686-linux-android29" CC=/home/jhj/x-tools/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin/i686-linux-android29-clang gmake libuvdev -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin:${PATH:-} CC=/home/jhj/x-tools/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin/i686-linux-android29-clang gmake -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4") LIBS="../../libuv-local/libuv/../local/lib/libuv.a -ldl" NEED_128=1; }; fi
    - mkdir -p "src/${DISTDIR:?}"
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f src/dps8/dps8 src/prt2pdf/prt2pdf src/punutil/punutil "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( cd src && tar cf ../dps8m-git-ndk29-x32.tar "./${DISTDIR:?}"; ); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { pigz -C "${CI_COMMIT_SHA:?}" -9 -f -m -n dps8m-git-ndk29-x32.tar; }; fi
    - rm -rf "src/${DISTDIR:?}"
    - git clean -fdxq -e '*.tar*' -e 'dps8m*'
    - PARALLEL_CI_COUNT=$(( PARALLEL_CI_COUNT + 1 )) ; test ${PARALLEL_CI_COUNT:?} -gt ${CI_NODE_TOTAL:?} && PARALLEL_CI_COUNT=1 || true
    - *scriptDPS8Mods
    - unset DPS8_CPUTYPE > /dev/null 2>&1 || true
    - unexport DPS8_CPUTYPE > /dev/null 2>&1 || true
    - ln -fs /home/jhj/x-tools/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin/armv7a-linux-androideabi24-clang /home/jhj/x-tools/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin/armv7a-linux-androideabi24-gcc
    - ln -fs /home/jhj/x-tools/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin/armv7a-linux-androideabi24-clang /home/jhj/x-tools/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin/armv7a-linux-androideabi24-cc
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin:${PATH:-} LOCAL_CONFOPTS="--host=armv7a-linux-androideabi24" CC=/home/jhj/x-tools/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin/armv7a-linux-androideabi24-clang gmake libuvdev -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin:${PATH:-} CC=/home/jhj/x-tools/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin/armv7a-linux-androideabi24-clang gmake -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4") LIBS="../../libuv-local/libuv/../local/lib/libuv.a -ldl" NEED_128=1; }; fi
    - mkdir -p "src/${DISTDIR:?}"
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f src/dps8/dps8 src/prt2pdf/prt2pdf src/punutil/punutil "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( cd src && tar cf ../dps8m-git-ndk24-a32.tar "./${DISTDIR:?}"; ); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { pigz -C "${CI_COMMIT_SHA:?}" -9 -f -m -n dps8m-git-ndk24-a32.tar; }; fi
    - rm -rf "src/${DISTDIR:?}"
    - git clean -fdxq -e '*.tar*' -e 'dps8m*'
    - PARALLEL_CI_COUNT=$(( PARALLEL_CI_COUNT + 1 )) ; test ${PARALLEL_CI_COUNT:?} -gt ${CI_NODE_TOTAL:?} && PARALLEL_CI_COUNT=1 || true
    - *scriptDPS8Mods
    - unset DPS8_CPUTYPE > /dev/null 2>&1 || true
    - unexport DPS8_CPUTYPE > /dev/null 2>&1 || true
    - ln -fs /home/jhj/x-tools/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin/armv7a-linux-androideabi29-clang /home/jhj/x-tools/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin/armv7a-linux-androideabi29-gcc
    - ln -fs /home/jhj/x-tools/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin/armv7a-linux-androideabi29-clang /home/jhj/x-tools/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin/armv7a-linux-androideabi29-cc
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin:${PATH:-} LOCAL_CONFOPTS="--host=armv7a-linux-androideabi29" CC=/home/jhj/x-tools/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin/armv7a-linux-androideabi29-clang gmake libuvdev -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin:${PATH:-} CC=/home/jhj/x-tools/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin/armv7a-linux-androideabi29-clang gmake -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4") LIBS="../../libuv-local/libuv/../local/lib/libuv.a -ldl" NEED_128=1; }; fi
    - mkdir -p "src/${DISTDIR:?}"
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f src/dps8/dps8 src/prt2pdf/prt2pdf src/punutil/punutil "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( cd src && tar cf ../dps8m-git-ndk29-a32.tar "./${DISTDIR:?}"; ); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { pigz -C "${CI_COMMIT_SHA:?}" -9 -f -m -n dps8m-git-ndk29-a32.tar; }; fi
    - rm -rf "src/${DISTDIR:?}"
    - git clean -fdxq -e '*.tar*' -e 'dps8m*'
    - PARALLEL_CI_COUNT=$(( PARALLEL_CI_COUNT + 1 )) ; test ${PARALLEL_CI_COUNT:?} -gt ${CI_NODE_TOTAL:?} && PARALLEL_CI_COUNT=1 || true
    - *scriptDPS8Mods
    - unset DPS8_CPUTYPE > /dev/null 2>&1 || true
    - unexport DPS8_CPUTYPE > /dev/null 2>&1 || true
    - ln -fs /home/jhj/x-tools/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin/aarch64-linux-android24-clang /home/jhj/x-tools/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin/aarch64-linux-android24-gcc
    - ln -fs /home/jhj/x-tools/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin/aarch64-linux-android24-clang /home/jhj/x-tools/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin/aarch64-linux-android24-cc
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin:${PATH:-} LOCAL_CONFOPTS="--host=aarch64-linux-android24" CC=/home/jhj/x-tools/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin/aarch64-linux-android24-clang gmake libuvdev -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin:${PATH:-} CC=/home/jhj/x-tools/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin/aarch64-linux-android24-clang LIBUTIL="" gmake -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4") LIBS="../../libuv-local/libuv/../local/lib/libuv.a -ldl"; }; fi
    - mkdir -p "src/${DISTDIR:?}"
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f src/dps8/dps8 src/prt2pdf/prt2pdf src/punutil/punutil "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( cd src && tar cf ../dps8m-git-ndk24-a64.tar "./${DISTDIR:?}"; ); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { pigz -C "${CI_COMMIT_SHA:?}" -9 -f -m -n dps8m-git-ndk24-a64.tar; }; fi
    - rm -rf "src/${DISTDIR:?}"
    - git clean -fdxq -e '*.tar*' -e 'dps8m*'
    - PARALLEL_CI_COUNT=$(( PARALLEL_CI_COUNT + 1 )) ; test ${PARALLEL_CI_COUNT:?} -gt ${CI_NODE_TOTAL:?} && PARALLEL_CI_COUNT=1 || true
    - *scriptDPS8Mods
    - unset DPS8_CPUTYPE > /dev/null 2>&1 || true
    - unexport DPS8_CPUTYPE > /dev/null 2>&1 || true
    - ln -fs /home/jhj/x-tools/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin/aarch64-linux-android29-clang /home/jhj/x-tools/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin/aarch64-linux-android29-gcc
    - ln -fs /home/jhj/x-tools/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin/aarch64-linux-android29-clang /home/jhj/x-tools/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin/aarch64-linux-android29-cc
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin:${PATH:-} LOCAL_CONFOPTS="--host=aarch64-linux-android29" CC=/home/jhj/x-tools/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin/aarch64-linux-android29-clang gmake libuvdev -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin:${PATH:-} CC=/home/jhj/x-tools/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin/aarch64-linux-android29-clang gmake -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4") LIBS="../../libuv-local/libuv/../local/lib/libuv.a -ldl"; }; fi
    - mkdir -p "src/${DISTDIR:?}"
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f src/dps8/dps8 src/prt2pdf/prt2pdf src/punutil/punutil "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( cd src && tar cf ../dps8m-git-ndk29-a64.tar "./${DISTDIR:?}"; ); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { pigz -C "${CI_COMMIT_SHA:?}" -9 -f -m -n dps8m-git-ndk29-a64.tar; }; fi
    - rm -rf "src/${DISTDIR:?}"
    - git clean -fdxq -e '*.tar*' -e 'dps8m*'
    - PARALLEL_CI_COUNT=$(( PARALLEL_CI_COUNT + 1 )) ; test ${PARALLEL_CI_COUNT:?} -gt ${CI_NODE_TOTAL:?} && PARALLEL_CI_COUNT=1 || true
    - *scriptDPS8Mods
    - unset DPS8_CPUTYPE > /dev/null 2>&1 || true
    - unexport DPS8_CPUTYPE > /dev/null 2>&1 || true
    - ln -fs /home/jhj/x-tools/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin/x86_64-linux-android29-clang /home/jhj/x-tools/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin/x86_64-linux-android29-gcc
    - ln -fs /home/jhj/x-tools/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin/x86_64-linux-android29-clang /home/jhj/x-tools/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin/x86_64-linux-android29-cc
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin:${PATH:-} LOCAL_CONFOPTS="--host=x86_64-linux-android29" CC=/home/jhj/x-tools/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin/x86_64-linux-android29-clang gmake libuvdev -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin:${PATH:-} CC=/home/jhj/x-tools/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin/x86_64-linux-android29-clang gmake -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4") LIBS="../../libuv-local/libuv/../local/lib/libuv.a -ldl"; }; fi
    - mkdir -p "src/${DISTDIR:?}"
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f src/dps8/dps8 src/prt2pdf/prt2pdf src/punutil/punutil "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( cd src && tar cf ../dps8m-git-ndk29-x64.tar "./${DISTDIR:?}"; ); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { pigz -C "${CI_COMMIT_SHA:?}" -9 -f -m -n dps8m-git-ndk29-x64.tar; }; fi
    - rm -rf "src/${DISTDIR:?}"
    - git clean -fdxq -e '*.tar*' -e 'dps8m*'
    - rm -rf /home/jhj/x-tools/android-ndk/
    - PARALLEL_CI_COUNT=$(( PARALLEL_CI_COUNT + 1 )) ; test ${PARALLEL_CI_COUNT:?} -gt ${CI_NODE_TOTAL:?} && PARALLEL_CI_COUNT=1 || true
    - wget --quiet "https://gitlab.com/dps8m/dps8m-archive/-/raw/master/CI/toolchains/s390x-local-linux-musl.tar.lz" -O /s390x-local-linux-musl.tar.lz
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( mkdir -p /home/jhj/x-tools && cd /home/jhj/x-tools && tar axf /s390x-local-linux-musl.tar.lz ); }; fi
    - *scriptDPS8Mods
    - unset DPS8_CPUTYPE > /dev/null 2>&1 || true
    - unexport DPS8_CPUTYPE > /dev/null 2>&1 || true
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/s390x-local-linux-musl/bin:${PATH:-} LOCAL_CONFOPTS="--host=s390x-local-linux-musl" CC=/home/jhj/x-tools/s390x-local-linux-musl/bin/s390x-local-linux-musl-gcc gmake libuvdev -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/s390x-local-linux-musl/bin:${PATH:-} CC=/home/jhj/x-tools/s390x-local-linux-musl/bin/s390x-local-linux-musl-gcc LDFLAGS="-static" gmake -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - mkdir -p "src/${DISTDIR:?}"
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f src/dps8/dps8 src/prt2pdf/prt2pdf src/punutil/punutil "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( cd src && tar cf ../dps8m-git-linux-390.tar "./${DISTDIR:?}"; ); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { pigz -C "${CI_COMMIT_SHA:?}" -9 -f -m -n dps8m-git-linux-390.tar; }; fi
    - rm -rf "src/${DISTDIR:?}"
    - git clean -fdxq -e '*.tar*' -e 'dps8m*'
    - rm -rf /home/jhj/x-tools/s390x-local-linux-musl
    - PARALLEL_CI_COUNT=$(( PARALLEL_CI_COUNT + 1 )) ; test ${PARALLEL_CI_COUNT:?} -gt ${CI_NODE_TOTAL:?} && PARALLEL_CI_COUNT=1 || true
    - wget --quiet "https://gitlab.com/dps8m/dps8m-archive/-/raw/master/CI/toolchains/riscv64-local-linux-musl.tar.lz" -O /riscv64-local-linux-musl.tar.lz
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( mkdir -p /home/jhj/x-tools && cd /home/jhj/x-tools && tar axf /riscv64-local-linux-musl.tar.lz ); }; fi
    - *scriptDPS8Mods
    - unset DPS8_CPUTYPE > /dev/null 2>&1 || true
    - unexport DPS8_CPUTYPE > /dev/null 2>&1 || true
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/riscv64-local-linux-musl/bin:${PATH:-} LOCAL_CONFOPTS="--host=riscv64-local-linux-musl" CC=/home/jhj/x-tools/riscv64-local-linux-musl/bin/riscv64-local-linux-musl-gcc gmake libuvdev -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/riscv64-local-linux-musl/bin:${PATH:-} CC=/home/jhj/x-tools/riscv64-local-linux-musl/bin/riscv64-local-linux-musl-gcc LDFLAGS="-static" gmake -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - mkdir -p "src/${DISTDIR:?}"
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f src/dps8/dps8 src/prt2pdf/prt2pdf src/punutil/punutil "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( cd src && tar cf ../dps8m-git-linux-r64.tar "./${DISTDIR:?}"; ); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { pigz -C "${CI_COMMIT_SHA:?}" -9 -f -m -n dps8m-git-linux-r64.tar; }; fi
    - rm -rf "src/${DISTDIR:?}"
    - git clean -fdxq -e '*.tar*' -e 'dps8m*'
    - rm -rf /home/jhj/x-tools/riscv64-local-linux-musl/
    - PARALLEL_CI_COUNT=$(( PARALLEL_CI_COUNT + 1 )) ; test ${PARALLEL_CI_COUNT:?} -gt ${CI_NODE_TOTAL:?} && PARALLEL_CI_COUNT=1 || true
    - wget --quiet "https://gitlab.com/dps8m/dps8m-archive/-/raw/master/CI/toolchains/powerpc-local-linux-musl.tar.lz" -O /powerpc-local-linux-musl.tar.lz
    - ( mkdir -p /home/jhj/x-tools && cd /home/jhj/x-tools && tar axf /powerpc-local-linux-musl.tar.lz )
    - *scriptDPS8Mods
    - export DPS8_CPUTYPE=740
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/powerpc-local-linux-musl/bin:${PATH:-} CFLAGS="-mcpu=${DPS8_CPUTYPE:?}" LOCAL_CONFOPTS="--host=powerpc-local-linux-musl" CC=/home/jhj/x-tools/powerpc-local-linux-musl/bin/powerpc-local-linux-musl-gcc gmake libuvdev -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/powerpc-local-linux-musl/bin:${PATH:-} CFLAGS="-mcpu=${DPS8_CPUTYPE:?}" CC=/home/jhj/x-tools/powerpc-local-linux-musl/bin/powerpc-local-linux-musl-gcc LDFLAGS="-static" gmake -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4") NEED_128=1 LOCALLIBS="-latomic"; }; fi
    - mkdir -p "src/${DISTDIR:?}"
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f src/dps8/dps8 src/prt2pdf/prt2pdf src/punutil/punutil "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( cd src && tar cf ../dps8m-git-linux-740.tar "./${DISTDIR:?}"; ); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { pigz -C "${CI_COMMIT_SHA:?}" -9 -f -m -n dps8m-git-linux-740.tar; }; fi
    - rm -rf "src/${DISTDIR:?}"
    - git clean -fdxq -e '*.tar*' -e 'dps8m*'
    - PARALLEL_CI_COUNT=$(( PARALLEL_CI_COUNT + 1 )) ; test ${PARALLEL_CI_COUNT:?} -gt ${CI_NODE_TOTAL:?} && PARALLEL_CI_COUNT=1 || true
    - *scriptDPS8Mods
    - export DPS8_CPUTYPE=7400
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/powerpc-local-linux-musl/bin:${PATH:-} CFLAGS="-mcpu=${DPS8_CPUTYPE:?}" LOCAL_CONFOPTS="--host=powerpc-local-linux-musl" CC=/home/jhj/x-tools/powerpc-local-linux-musl/bin/powerpc-local-linux-musl-gcc gmake libuvdev -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/powerpc-local-linux-musl/bin:${PATH:-} CFLAGS="-mcpu=${DPS8_CPUTYPE:?}" CC=/home/jhj/x-tools/powerpc-local-linux-musl/bin/powerpc-local-linux-musl-gcc LDFLAGS="-static" gmake -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4") NEED_128=1 LOCALLIBS="-latomic"; }; fi
    - mkdir -p "src/${DISTDIR:?}"
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f src/dps8/dps8 src/prt2pdf/prt2pdf src/punutil/punutil "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( cd src && tar cf ../dps8m-git-linux-g4a.tar "./${DISTDIR:?}"; ); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { pigz -C "${CI_COMMIT_SHA:?}" -9 -f -m -n dps8m-git-linux-g4a.tar; }; fi
    - rm -rf "src/${DISTDIR:?}"
    - git clean -fdxq -e '*.tar*' -e 'dps8m*'
    - rm -rf /home/jhj/x-tools/powerpc-local-linux-musl/
    - PARALLEL_CI_COUNT=$(( PARALLEL_CI_COUNT + 1 )) ; test ${PARALLEL_CI_COUNT:?} -gt ${CI_NODE_TOTAL:?} && PARALLEL_CI_COUNT=1 || true
    - wget --quiet "https://gitlab.com/dps8m/dps8m-archive/-/raw/master/CI/toolchains/arm-local-linux-musleabi.tar.lz" -O /arm-local-linux-musleabi.tar.lz
    - ( mkdir -p /home/jhj/x-tools && cd /home/jhj/x-tools && tar axf /arm-local-linux-musleabi.tar.lz )
    - *scriptDPS8Mods
    - export DPS8_CPUTYPE="armv6"
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/arm-local-linux-musleabi/bin:${PATH:-} CFLAGS="-march=${DPS8_CPUTYPE:?}" LOCAL_CONFOPTS="--host=arm-local-linux-musleabi" CC=/home/jhj/x-tools/arm-local-linux-musleabi/bin/arm-local-linux-musleabi-gcc gmake libuvdev -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/arm-local-linux-musleabi/bin:${PATH:-} CFLAGS="-march=${DPS8_CPUTYPE:?}" CC=/home/jhj/x-tools/arm-local-linux-musleabi/bin/arm-local-linux-musleabi-gcc LDFLAGS="-static" gmake -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4") NEED_128=1 LOCALLIBS="-latomic"; }; fi
    - mkdir -p "src/${DISTDIR:?}"
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f src/dps8/dps8 src/prt2pdf/prt2pdf src/punutil/punutil "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( cd src && tar cf ../dps8m-git-linux-a6s.tar "./${DISTDIR:?}"; ); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { pigz -C "${CI_COMMIT_SHA:?}" -9 -f -m -n dps8m-git-linux-a6s.tar; }; fi
    - rm -rf "src/${DISTDIR:?}"
    - git clean -fdxq -e '*.tar*' -e 'dps8m*'
    - PARALLEL_CI_COUNT=$(( PARALLEL_CI_COUNT + 1 )) ; test ${PARALLEL_CI_COUNT:?} -gt ${CI_NODE_TOTAL:?} && PARALLEL_CI_COUNT=1 || true
    - *scriptDPS8Mods
    - export DPS8_CPUTYPE="armv6+fp"
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/arm-local-linux-musleabi/bin:${PATH:-} CFLAGS="-march=${DPS8_CPUTYPE:?}" LOCAL_CONFOPTS="--host=arm-local-linux-musleabi" CC=/home/jhj/x-tools/arm-local-linux-musleabi/bin/arm-local-linux-musleabi-gcc gmake libuvdev -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/arm-local-linux-musleabi/bin:${PATH:-} CFLAGS="-march=${DPS8_CPUTYPE:?}" CC=/home/jhj/x-tools/arm-local-linux-musleabi/bin/arm-local-linux-musleabi-gcc LDFLAGS="-static" gmake -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4") NEED_128=1 LOCALLIBS="-latomic"; }; fi
    - mkdir -p "src/${DISTDIR:?}"
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f src/dps8/dps8 src/prt2pdf/prt2pdf src/punutil/punutil "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( cd src && tar cf ../dps8m-git-linux-a6f.tar "./${DISTDIR:?}"; ); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { pigz -C "${CI_COMMIT_SHA:?}" -9 -f -m -n dps8m-git-linux-a6f.tar; }; fi
    - rm -rf "src/${DISTDIR:?}"
    - git clean -fdxq -e '*.tar*' -e 'dps8m*'
    - PARALLEL_CI_COUNT=$(( PARALLEL_CI_COUNT + 1 )) ; test ${PARALLEL_CI_COUNT:?} -gt ${CI_NODE_TOTAL:?} && PARALLEL_CI_COUNT=1 || true
    - *scriptDPS8Mods
    - export DPS8_CPUTYPE="armv7-a"
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/arm-local-linux-musleabi/bin:${PATH:-} CFLAGS="-march=${DPS8_CPUTYPE:?}" LOCAL_CONFOPTS="--host=arm-local-linux-musleabi" CC=/home/jhj/x-tools/arm-local-linux-musleabi/bin/arm-local-linux-musleabi-gcc gmake libuvdev -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/arm-local-linux-musleabi/bin:${PATH:-} CFLAGS="-march=${DPS8_CPUTYPE:?}" CC=/home/jhj/x-tools/arm-local-linux-musleabi/bin/arm-local-linux-musleabi-gcc LDFLAGS="-static" gmake -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4") NEED_128=1 LOCALLIBS="-latomic"; }; fi
    - mkdir -p "src/${DISTDIR:?}"
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f src/dps8/dps8 src/prt2pdf/prt2pdf src/punutil/punutil "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( cd src && tar cf ../dps8m-git-linux-a7s.tar "./${DISTDIR:?}"; ); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { pigz -C "${CI_COMMIT_SHA:?}" -9 -f -m -n dps8m-git-linux-a7s.tar; }; fi
    - rm -rf "src/${DISTDIR:?}"
    - git clean -fdxq -e '*.tar*' -e 'dps8m*'
    - PARALLEL_CI_COUNT=$(( PARALLEL_CI_COUNT + 1 )) ; test ${PARALLEL_CI_COUNT:?} -gt ${CI_NODE_TOTAL:?} && PARALLEL_CI_COUNT=1 || true
    - *scriptDPS8Mods
    - export DPS8_CPUTYPE="armv7-a+fp"
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/arm-local-linux-musleabi/bin:${PATH:-} CFLAGS="-march=${DPS8_CPUTYPE:?}" LOCAL_CONFOPTS="--host=arm-local-linux-musleabi" CC=/home/jhj/x-tools/arm-local-linux-musleabi/bin/arm-local-linux-musleabi-gcc gmake libuvdev -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/arm-local-linux-musleabi/bin:${PATH:-} CFLAGS="-march=${DPS8_CPUTYPE:?}" CC=/home/jhj/x-tools/arm-local-linux-musleabi/bin/arm-local-linux-musleabi-gcc LDFLAGS="-static" gmake -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4") NEED_128=1 LOCALLIBS="-latomic"; }; fi
    - mkdir -p "src/${DISTDIR:?}"
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f src/dps8/dps8 src/prt2pdf/prt2pdf src/punutil/punutil "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( cd src && tar cf ../dps8m-git-linux-a7f.tar "./${DISTDIR:?}"; ); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { pigz -C "${CI_COMMIT_SHA:?}" -9 -f -m -n dps8m-git-linux-a7f.tar; }; fi
    - rm -rf "src/${DISTDIR:?}"
    - git clean -fdxq -e '*.tar*' -e 'dps8m*'
    - rm -rf /home/jhj/x-tools/arm-local-linux-musleabi/
    - PARALLEL_CI_COUNT=$(( PARALLEL_CI_COUNT + 1 )) ; test ${PARALLEL_CI_COUNT:?} -gt ${CI_NODE_TOTAL:?} && PARALLEL_CI_COUNT=1 || true
    - wget --quiet "https://gitlab.com/dps8m/dps8m-archive/-/raw/master/CI/toolchains/aarch64-local-linux-musl.tar.lz" -O /aarch64-local-linux-musl.tar.lz
    - ( mkdir -p /home/jhj/x-tools && cd /home/jhj/x-tools && tar axf /aarch64-local-linux-musl.tar.lz )
    - *scriptDPS8Mods
    - export DPS8_CPUTYPE="armv8-a"
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/aarch64-local-linux-musl/bin:${PATH:-} CFLAGS="-march=${DPS8_CPUTYPE:?}" LOCAL_CONFOPTS="--host=aarch64-local-linux-musl" CC=/home/jhj/x-tools/aarch64-local-linux-musl/bin/aarch64-local-linux-musl-gcc gmake libuvdev -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/aarch64-local-linux-musl/bin:${PATH:-} CFLAGS="-march=${DPS8_CPUTYPE:?}" CC=/home/jhj/x-tools/aarch64-local-linux-musl/bin/aarch64-local-linux-musl-gcc LDFLAGS="-static" gmake -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - mkdir -p "src/${DISTDIR:?}"
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f src/dps8/dps8 src/prt2pdf/prt2pdf src/punutil/punutil "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( cd src && tar cf ../dps8m-git-linux-a8a.tar "./${DISTDIR:?}"; ); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { pigz -C "${CI_COMMIT_SHA:?}" -9 -f -m -n dps8m-git-linux-a8a.tar; }; fi
    - rm -rf "src/${DISTDIR:?}"
    - git clean -fdxq -e '*.tar*' -e 'dps8m*'
    - rm -rf /home/jhj/x-tools/aarch64-local-linux-musl/
    - PARALLEL_CI_COUNT=$(( PARALLEL_CI_COUNT + 1 )) ; test ${PARALLEL_CI_COUNT:?} -gt ${CI_NODE_TOTAL:?} && PARALLEL_CI_COUNT=1 || true
    - wget --quiet "https://gitlab.com/dps8m/dps8m-archive/-/raw/master/CI/toolchains/aarch64_be-local-linux-musl.tar.lz" -O /aarch64_be-local-linux-musl.tar.lz
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( mkdir -p /home/jhj/x-tools && cd /home/jhj/x-tools && tar axf /aarch64_be-local-linux-musl.tar.lz ); }; fi
    - *scriptDPS8Mods
    - export DPS8_CPUTYPE="armv8-a"
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/aarch64_be-local-linux-musl/bin:${PATH:-} CFLAGS="-march=${DPS8_CPUTYPE:?}" LOCAL_CONFOPTS="--host=aarch64_be-local-linux-musl" CC=/home/jhj/x-tools/aarch64_be-local-linux-musl/bin/aarch64_be-local-linux-musl-gcc gmake libuvdev -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/aarch64_be-local-linux-musl/bin:${PATH:-} CFLAGS="-march=${DPS8_CPUTYPE:?}" CC=/home/jhj/x-tools/aarch64_be-local-linux-musl/bin/aarch64_be-local-linux-musl-gcc LDFLAGS="-static" gmake -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - mkdir -p "src/${DISTDIR:?}"
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f src/dps8/dps8 src/prt2pdf/prt2pdf src/punutil/punutil "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( cd src && tar cf ../dps8m-git-linux-a8b.tar "./${DISTDIR:?}"; ); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { pigz -C "${CI_COMMIT_SHA:?}" -9 -f -m -n dps8m-git-linux-a8b.tar; }; fi
    - rm -rf "src/${DISTDIR:?}"
    - git clean -fdxq -e '*.tar*' -e 'dps8m*'
    - rm -rf /home/jhj/x-tools/aarch64_be-local-linux-musl/
    - PARALLEL_CI_COUNT=$(( PARALLEL_CI_COUNT + 1 )) ; test ${PARALLEL_CI_COUNT:?} -gt ${CI_NODE_TOTAL:?} && PARALLEL_CI_COUNT=1 || true
    - *scriptDPS8Mods
    - wget --quiet "https://gitlab.com/dps8m/dps8m-archive/-/raw/master/CI/toolchains/i386-local-linux-musl.tar.lz" -O /i386-local-linux-musl.tar.lz
    - ( mkdir -p /home/jhj/x-tools && cd /home/jhj/x-tools && tar axf /i386-local-linux-musl.tar.lz )
    - unset DPS8_CPUTYPE > /dev/null 2>&1 || true
    - unexport DPS8_CPUTYPE > /dev/null 2>&1 || true
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/i386-local-linux-musl/bin:${PATH:-} CFLAGS="-march=i686" LOCAL_CONFOPTS="--host=i386-local-linux-musl" CC=/home/jhj/x-tools/i386-local-linux-musl/bin/i386-local-linux-musl-gcc gmake libuvdev -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/i386-local-linux-musl/bin:${PATH:-} CFLAGS="-march=i686" CC=/home/jhj/x-tools/i386-local-linux-musl/bin/i386-local-linux-musl-gcc LDFLAGS="-static" gmake -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4") NEED_128=1; }; fi
    - mkdir -p "src/${DISTDIR:?}"
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f src/dps8/dps8 src/prt2pdf/prt2pdf src/punutil/punutil "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( cd src && tar cf ../dps8m-git-linux-686.tar "./${DISTDIR:?}"; ); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { pigz -C "${CI_COMMIT_SHA:?}" -9 -f -m -n dps8m-git-linux-686.tar; }; fi
    - rm -rf "src/${DISTDIR:?}"
    - git clean -fdxq -e '*.tar*' -e 'dps8m*'
    - rm -rf /home/jhj/x-tools/i386-local-linux-musl/
    - PARALLEL_CI_COUNT=$(( PARALLEL_CI_COUNT + 1 )) ; test ${PARALLEL_CI_COUNT:?} -gt ${CI_NODE_TOTAL:?} && PARALLEL_CI_COUNT=1 || true
    - wget --quiet "https://gitlab.com/dps8m/dps8m-archive/-/raw/master/CI/toolchains/x86_64-local-linux-musl.tar.lz" -O /x86_64-local-linux-musl.tar.lz
    - ( mkdir -p /home/jhj/x-tools && cd /home/jhj/x-tools && tar axf /x86_64-local-linux-musl.tar.lz )
    - *scriptDPS8Mods
    - export DPS8_CPUTYPE=x86-64
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/x86_64-local-linux-musl/bin:${PATH:-} CFLAGS="-march=${DPS8_CPUTYPE}" LOCAL_CONFOPTS="--host=x86_64-local-linux-musl" CC=/home/jhj/x-tools/x86_64-local-linux-musl/bin/x86_64-local-linux-musl-gcc gmake libuvdev -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/x86_64-local-linux-musl/bin:${PATH:-} CFLAGS="-march=${DPS8_CPUTYPE}" CC=/home/jhj/x-tools/x86_64-local-linux-musl/bin/x86_64-local-linux-musl-gcc LDFLAGS="-static" gmake -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - mkdir -p "src/${DISTDIR:?}"
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f src/dps8/dps8 src/prt2pdf/prt2pdf src/punutil/punutil "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( cd src && tar cf ../dps8m-git-linux-641.tar "./${DISTDIR:?}"; ); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { pigz -C "${CI_COMMIT_SHA:?}" -9 -f -m -n dps8m-git-linux-641.tar; }; fi
    - rm -rf "src/${DISTDIR:?}"
    - git clean -fdxq -e '*.tar*' -e 'dps8m*'
    - PARALLEL_CI_COUNT=$(( PARALLEL_CI_COUNT + 1 )) ; test ${PARALLEL_CI_COUNT:?} -gt ${CI_NODE_TOTAL:?} && PARALLEL_CI_COUNT=1 || true
    - *scriptDPS8Mods
    - export DPS8_CPUTYPE=x86-64-v2
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/x86_64-local-linux-musl/bin:${PATH:-} CFLAGS="-march=${DPS8_CPUTYPE}" LOCAL_CONFOPTS="--host=x86_64-local-linux-musl" CC=/home/jhj/x-tools/x86_64-local-linux-musl/bin/x86_64-local-linux-musl-gcc gmake libuvdev -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/x86_64-local-linux-musl/bin:${PATH:-} CFLAGS="-march=${DPS8_CPUTYPE}" CC=/home/jhj/x-tools/x86_64-local-linux-musl/bin/x86_64-local-linux-musl-gcc LDFLAGS="-static" gmake -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - mkdir -p "src/${DISTDIR:?}"
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f src/dps8/dps8 src/prt2pdf/prt2pdf src/punutil/punutil "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( cd src && tar cf ../dps8m-git-linux-642.tar "./${DISTDIR:?}"; ); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { pigz -C "${CI_COMMIT_SHA:?}" -9 -f -m -n dps8m-git-linux-642.tar; }; fi
    - rm -rf "src/${DISTDIR:?}"
    - git clean -fdxq -e '*.tar*' -e 'dps8m*'
    - PARALLEL_CI_COUNT=$(( PARALLEL_CI_COUNT + 1 )) ; test ${PARALLEL_CI_COUNT:?} -gt ${CI_NODE_TOTAL:?} && PARALLEL_CI_COUNT=1 || true
    - *scriptDPS8Mods
    - export DPS8_CPUTYPE=x86-64-v3
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/x86_64-local-linux-musl/bin:${PATH:-} CFLAGS="-march=${DPS8_CPUTYPE}" LOCAL_CONFOPTS="--host=x86_64-local-linux-musl" CC=/home/jhj/x-tools/x86_64-local-linux-musl/bin/x86_64-local-linux-musl-gcc gmake libuvdev -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/x86_64-local-linux-musl/bin:${PATH:-} CFLAGS="-march=${DPS8_CPUTYPE}" CC=/home/jhj/x-tools/x86_64-local-linux-musl/bin/x86_64-local-linux-musl-gcc LDFLAGS="-static" gmake -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - mkdir -p "src/${DISTDIR:?}"
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f src/dps8/dps8 src/prt2pdf/prt2pdf src/punutil/punutil "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( cd src && tar cf ../dps8m-git-linux-643.tar "./${DISTDIR:?}"; ); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { pigz -C "${CI_COMMIT_SHA:?}" -9 -f -m -n dps8m-git-linux-643.tar; }; fi
    - rm -rf "src/${DISTDIR:?}"
    - git clean -fdxq -e '*.tar*' -e 'dps8m*'
    - rm -rf /home/jhj/x-tools/x86_64-local-linux-musl/
    - PARALLEL_CI_COUNT=$(( PARALLEL_CI_COUNT + 1 )) ; test ${PARALLEL_CI_COUNT:?} -gt ${CI_NODE_TOTAL:?} && PARALLEL_CI_COUNT=1 || true
    - wget --quiet "https://gitlab.com/dps8m/dps8m-archive/-/raw/master/CI/toolchains/powerpc64le-local-linux-musl.tar.lz" -O /powerpc64le-local-linux-musl.tar.lz
    - ( mkdir -p /home/jhj/x-tools && cd /home/jhj/x-tools && tar axf /powerpc64le-local-linux-musl.tar.lz )
    - *scriptDPS8Mods
    - export DPS8_CPUTYPE=power8
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/powerpc64le-local-linux-musl/bin:${PATH:-} CFLAGS="-mcpu=${DPS8_CPUTYPE}" LOCAL_CONFOPTS="--host=powerpc64le-local-linux-musl" CC=/home/jhj/x-tools/powerpc64le-local-linux-musl/bin/powerpc64le-local-linux-musl-gcc gmake libuvdev -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/powerpc64le-local-linux-musl/bin:${PATH:-} CFLAGS="-mcpu=${DPS8_CPUTYPE}" CC=/home/jhj/x-tools/powerpc64le-local-linux-musl/bin/powerpc64le-local-linux-musl-gcc LDFLAGS="-static" gmake -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - mkdir -p "src/${DISTDIR:?}"
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f src/dps8/dps8 src/prt2pdf/prt2pdf src/punutil/punutil "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( cd src && tar cf ../dps8m-git-linux-pw8.tar "./${DISTDIR:?}"; ); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { pigz -C "${CI_COMMIT_SHA:?}" -9 -f -m -n dps8m-git-linux-pw8.tar; }; fi
    - rm -rf "src/${DISTDIR:?}"
    - git clean -fdxq -e '*.tar*' -e 'dps8m*'
    - PARALLEL_CI_COUNT=$(( PARALLEL_CI_COUNT + 1 )) ; test ${PARALLEL_CI_COUNT:?} -gt ${CI_NODE_TOTAL:?} && PARALLEL_CI_COUNT=1 || true
    - *scriptDPS8Mods
    - export DPS8_CPUTYPE=power9
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/powerpc64le-local-linux-musl/bin:${PATH:-} CFLAGS="-mcpu=${DPS8_CPUTYPE}" LOCAL_CONFOPTS="--host=powerpc64le-local-linux-musl" CC=/home/jhj/x-tools/powerpc64le-local-linux-musl/bin/powerpc64le-local-linux-musl-gcc gmake libuvdev -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/powerpc64le-local-linux-musl/bin:${PATH:-} CFLAGS="-mcpu=${DPS8_CPUTYPE}" CC=/home/jhj/x-tools/powerpc64le-local-linux-musl/bin/powerpc64le-local-linux-musl-gcc LDFLAGS="-static" gmake -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - mkdir -p "src/${DISTDIR:?}"
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f src/dps8/dps8 src/prt2pdf/prt2pdf src/punutil/punutil "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( cd src && tar cf ../dps8m-git-linux-pw9.tar "./${DISTDIR:?}"; ); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { pigz -C "${CI_COMMIT_SHA:?}" -9 -f -m -n dps8m-git-linux-pw9.tar; }; fi
    - rm -rf "src/${DISTDIR:?}"
    - git clean -fdxq -e '*.tar*' -e 'dps8m*'
    - PARALLEL_CI_COUNT=$(( PARALLEL_CI_COUNT + 1 )) ; test ${PARALLEL_CI_COUNT:?} -gt ${CI_NODE_TOTAL:?} && PARALLEL_CI_COUNT=1 || true
    - *scriptDPS8Mods
    - export DPS8_CPUTYPE=power10
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/powerpc64le-local-linux-musl/bin:${PATH:-} CFLAGS="-mcpu=${DPS8_CPUTYPE}" LOCAL_CONFOPTS="--host=powerpc64le-local-linux-musl" CC=/home/jhj/x-tools/powerpc64le-local-linux-musl/bin/powerpc64le-local-linux-musl-gcc gmake libuvdev -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/powerpc64le-local-linux-musl/bin:${PATH:-} CFLAGS="-mcpu=${DPS8_CPUTYPE}" CC=/home/jhj/x-tools/powerpc64le-local-linux-musl/bin/powerpc64le-local-linux-musl-gcc LDFLAGS="-static" gmake -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - mkdir -p "src/${DISTDIR:?}"
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f src/dps8/dps8 src/prt2pdf/prt2pdf src/punutil/punutil "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( cd src && tar cf ../dps8m-git-linux-p10.tar "./${DISTDIR:?}"; ); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { pigz -C "${CI_COMMIT_SHA:?}" -9 -f -m -n dps8m-git-linux-p10.tar; }; fi
    - rm -rf "src/${DISTDIR:?}"
    - git clean -fdxq -e '*.tar*' -e 'dps8m*'
    - rm -rf /home/jhj/x-tools/powerpc64le-local-linux-musl/
    - PARALLEL_CI_COUNT=$(( PARALLEL_CI_COUNT + 1 )) ; test ${PARALLEL_CI_COUNT:?} -gt ${CI_NODE_TOTAL:?} && PARALLEL_CI_COUNT=1 || true
    - wget --quiet "https://gitlab.com/dps8m/dps8m-archive/-/raw/master/CI/toolchains/mips-local-linux-musl.tar.lz" -O /mips-local-linux-musl.tar.lz
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( mkdir -p /home/jhj/x-tools && cd /home/jhj/x-tools && tar axf /mips-local-linux-musl.tar.lz ); }; fi
    - *scriptDPS8Mods
    - unset DPS8_CPUTYPE > /dev/null 2>&1 || true
    - unexport DPS8_CPUTYPE > /dev/null 2>&1 || true
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/mips-local-linux-musl/bin:${PATH:-} LOCAL_CONFOPTS="--host=mips-local-linux-musl" CFLAGS="-mips1 -mhard-float" CC=/home/jhj/x-tools/mips-local-linux-musl/bin/mips-local-linux-musl-gcc gmake libuvdev -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/mips-local-linux-musl/bin:${PATH:-} CFLAGS="-mips1 -mhard-float" CC=/home/jhj/x-tools/mips-local-linux-musl/bin/mips-local-linux-musl-gcc LDFLAGS="-static" gmake -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4") NEED_128=1 LOCALLIBS="-latomic"; }; fi
    - mkdir -p "src/${DISTDIR:?}"
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f src/dps8/dps8 src/prt2pdf/prt2pdf src/punutil/punutil "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( cd src && tar cf ../dps8m-git-linux-mps.tar "./${DISTDIR:?}"; ); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { pigz -C "${CI_COMMIT_SHA:?}" -9 -f -m -n dps8m-git-linux-mps.tar; }; fi
    - rm -rf "src/${DISTDIR:?}"
    - git clean -fdxq -e '*.tar*' -e 'dps8m*'
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/mips-local-linux-musl/bin:${PATH:-} LOCAL_CONFOPTS="--host=mips-local-linux-musl" CFLAGS="-mips1 -msoft-float" CC=/home/jhj/x-tools/mips-local-linux-musl/bin/mips-local-linux-musl-gcc gmake libuvdev -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/mips-local-linux-musl/bin:${PATH:-} CFLAGS="-mips1 -msoft-float" CC=/home/jhj/x-tools/mips-local-linux-musl/bin/mips-local-linux-musl-gcc LDFLAGS="-static" gmake -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4") NEED_128=1 LOCALLIBS="-latomic"; }; fi
    - mkdir -p "src/${DISTDIR:?}"
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f src/dps8/dps8 src/prt2pdf/prt2pdf src/punutil/punutil "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( cd src && tar cf ../dps8m-git-linux-mss.tar "./${DISTDIR:?}"; ); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { pigz -C "${CI_COMMIT_SHA:?}" -9 -f -m -n dps8m-git-linux-mss.tar; }; fi
    - rm -rf "src/${DISTDIR:?}"
    - git clean -fdxq -e '*.tar*' -e 'dps8m*'
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/mips-local-linux-musl/bin:${PATH:-} LOCAL_CONFOPTS="--host=mips-local-linux-musl" CFLAGS="-mips32r2 -mtune=74kf2_1 -mhard-float -fcf-protection=none -fno-openacc -fno-openmp -mframe-header-opt -fomit-frame-pointer" CC=/home/jhj/x-tools/mips-local-linux-musl/bin/mips-local-linux-musl-gcc gmake libuvdev -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/mips-local-linux-musl/bin:${PATH:-} CFLAGS="-mips32r2 -mtune=74kf2_1 -mhard-float -fcf-protection=none -fno-openacc -fno-openmp -mframe-header-opt -fomit-frame-pointer" CC=/home/jhj/x-tools/mips-local-linux-musl/bin/mips-local-linux-musl-gcc LDFLAGS="-static" gmake -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4") NEED_128=1 LOCALLIBS="-latomic"; }; fi
    - mkdir -p "src/${DISTDIR:?}"
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f src/dps8/dps8 src/prt2pdf/prt2pdf src/punutil/punutil "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( cd src && tar cf ../dps8m-git-linux-mp2.tar "./${DISTDIR:?}"; ); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { pigz -C "${CI_COMMIT_SHA:?}" -9 -f -m -n dps8m-git-linux-mp2.tar; }; fi
    - rm -rf "src/${DISTDIR:?}"
    - git clean -fdxq -e '*.tar*' -e 'dps8m*'
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/mips-local-linux-musl/bin:${PATH:-} LOCAL_CONFOPTS="--host=mips-local-linux-musl" CFLAGS="-mips32r2 -mtune=74kc -msoft-float -fcf-protection=none -fno-openacc -fno-openmp -mframe-header-opt -fomit-frame-pointer" CC=/home/jhj/x-tools/mips-local-linux-musl/bin/mips-local-linux-musl-gcc gmake libuvdev -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/mips-local-linux-musl/bin:${PATH:-} CFLAGS="-mips32r2 -mtune=74kc -msoft-float -fcf-protection=none -fno-openacc -fno-openmp -mframe-header-opt -fomit-frame-pointer" CC=/home/jhj/x-tools/mips-local-linux-musl/bin/mips-local-linux-musl-gcc LDFLAGS="-static" gmake -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4") NEED_128=1 LOCALLIBS="-latomic"; }; fi
    - mkdir -p "src/${DISTDIR:?}"
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f src/dps8/dps8 src/prt2pdf/prt2pdf src/punutil/punutil "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( cd src && tar cf ../dps8m-git-linux-ms2.tar "./${DISTDIR:?}"; ); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { pigz -C "${CI_COMMIT_SHA:?}" -9 -f -m -n dps8m-git-linux-ms2.tar; }; fi
    - rm -rf "src/${DISTDIR:?}"
    - git clean -fdxq -e '*.tar*' -e 'dps8m*'
    - rm -rf /home/jhj/x-tools/mips-local-linux-musl/
    - PARALLEL_CI_COUNT=$(( PARALLEL_CI_COUNT + 1 )) ; test ${PARALLEL_CI_COUNT:?} -gt ${CI_NODE_TOTAL:?} && PARALLEL_CI_COUNT=1 || true
    - wget --quiet "https://gitlab.com/dps8m/dps8m-archive/-/raw/master/CI/toolchains/mipsel-local-linux-musl.tar.lz" -O /mipsel-local-linux-musl.tar.lz
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( mkdir -p /home/jhj/x-tools && cd /home/jhj/x-tools && tar axf /mipsel-local-linux-musl.tar.lz ); }; fi
    - *scriptDPS8Mods
    - unset DPS8_CPUTYPE > /dev/null 2>&1 || true
    - unexport DPS8_CPUTYPE > /dev/null 2>&1 || true
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/mipsel-local-linux-musl/bin:${PATH:-} LOCAL_CONFOPTS="--host=mipsel-local-linux-musl" CFLAGS="-mips1 -mhard-float" CC=/home/jhj/x-tools/mipsel-local-linux-musl/bin/mipsel-local-linux-musl-gcc gmake libuvdev -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/mipsel-local-linux-musl/bin:${PATH:-} CFLAGS="-mips1 -mhard-float" CC=/home/jhj/x-tools/mipsel-local-linux-musl/bin/mipsel-local-linux-musl-gcc LDFLAGS="-static" gmake -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4") NEED_128=1 LOCALLIBS="-latomic"; }; fi
    - mkdir -p "src/${DISTDIR:?}"
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f src/dps8/dps8 src/prt2pdf/prt2pdf src/punutil/punutil "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( cd src && tar cf ../dps8m-git-linux-mpl.tar "./${DISTDIR:?}"; ); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { pigz -C "${CI_COMMIT_SHA:?}" -9 -f -m -n dps8m-git-linux-mpl.tar; }; fi
    - rm -rf "src/${DISTDIR:?}"
    - git clean -fdxq -e '*.tar*' -e 'dps8m*'
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/mipsel-local-linux-musl/bin:${PATH:-} LOCAL_CONFOPTS="--host=mipsel-local-linux-musl" CFLAGS="-mips1 -msoft-float" CC=/home/jhj/x-tools/mipsel-local-linux-musl/bin/mipsel-local-linux-musl-gcc gmake libuvdev -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/mipsel-local-linux-musl/bin:${PATH:-} CFLAGS="-mips1 -msoft-float" CC=/home/jhj/x-tools/mipsel-local-linux-musl/bin/mipsel-local-linux-musl-gcc LDFLAGS="-static" gmake -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4") NEED_128=1 LOCALLIBS="-latomic"; }; fi
    - mkdir -p "src/${DISTDIR:?}"
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f src/dps8/dps8 src/prt2pdf/prt2pdf src/punutil/punutil "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( cd src && tar cf ../dps8m-git-linux-msl.tar "./${DISTDIR:?}"; ); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { pigz -C "${CI_COMMIT_SHA:?}" -9 -f -m -n dps8m-git-linux-msl.tar; }; fi
    - rm -rf "src/${DISTDIR:?}"
    - git clean -fdxq -e '*.tar*' -e 'dps8m*'
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/mipsel-local-linux-musl/bin:${PATH:-} LOCAL_CONFOPTS="--host=mipsel-local-linux-musl" CFLAGS="-mips32r2 -mtune=74kf2_1 -mhard-float -fcf-protection=none -fno-openacc -fno-openmp -mframe-header-opt -fomit-frame-pointer" CC=/home/jhj/x-tools/mipsel-local-linux-musl/bin/mipsel-local-linux-musl-gcc gmake libuvdev -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/mipsel-local-linux-musl/bin:${PATH:-} CFLAGS="-mips32r2 -mtune=74kf2_1 -mhard-float -fcf-protection=none -fno-openacc -fno-openmp -mframe-header-opt -fomit-frame-pointer" CC=/home/jhj/x-tools/mipsel-local-linux-musl/bin/mipsel-local-linux-musl-gcc LDFLAGS="-static" gmake -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4") NEED_128=1 LOCALLIBS="-latomic"; }; fi
    - mkdir -p "src/${DISTDIR:?}"
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f src/dps8/dps8 src/prt2pdf/prt2pdf src/punutil/punutil "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( cd src && tar cf ../dps8m-git-linux-m2l.tar "./${DISTDIR:?}"; ); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { pigz -C "${CI_COMMIT_SHA:?}" -9 -f -m -n dps8m-git-linux-m2l.tar; }; fi
    - rm -rf "src/${DISTDIR:?}"
    - git clean -fdxq -e '*.tar*' -e 'dps8m*'
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/mipsel-local-linux-musl/bin:${PATH:-} LOCAL_CONFOPTS="--host=mipsel-local-linux-musl" CFLAGS="-mips32r2 -mtune=74kc -msoft-float -fcf-protection=none -fno-openacc -fno-openmp -mframe-header-opt -fomit-frame-pointer" CC=/home/jhj/x-tools/mipsel-local-linux-musl/bin/mipsel-local-linux-musl-gcc gmake libuvdev -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/mipsel-local-linux-musl/bin:${PATH:-} CFLAGS="-mips32r2 -mtune=74kc -msoft-float -fcf-protection=none -fno-openacc -fno-openmp -mframe-header-opt -fomit-frame-pointer" CC=/home/jhj/x-tools/mipsel-local-linux-musl/bin/mipsel-local-linux-musl-gcc LDFLAGS="-static" gmake -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4") NEED_128=1 LOCALLIBS="-latomic"; }; fi
    - mkdir -p "src/${DISTDIR:?}"
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f src/dps8/dps8 src/prt2pdf/prt2pdf src/punutil/punutil "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( cd src && tar cf ../dps8m-git-linux-m2s.tar "./${DISTDIR:?}"; ); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { pigz -C "${CI_COMMIT_SHA:?}" -9 -f -m -n dps8m-git-linux-m2s.tar; }; fi
    - rm -rf "src/${DISTDIR:?}"
    - git clean -fdxq -e '*.tar*' -e 'dps8m*'
    - rm -rf /home/jhj/x-tools/mipsel-local-linux-musl/
    - PARALLEL_CI_COUNT=$(( PARALLEL_CI_COUNT + 1 )) ; test ${PARALLEL_CI_COUNT:?} -gt ${CI_NODE_TOTAL:?} && PARALLEL_CI_COUNT=1 || true
    - wget --quiet "https://gitlab.com/dps8m/dps8m-archive/-/raw/master/CI/toolchains/mips64-local-linux-musl.tar.lz" -O /mips64-local-linux-musl.tar.lz
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( mkdir -p /home/jhj/x-tools && cd /home/jhj/x-tools && tar axf /mips64-local-linux-musl.tar.lz ); }; fi
    - *scriptDPS8Mods
    - unset DPS8_CPUTYPE > /dev/null 2>&1 || true
    - unexport DPS8_CPUTYPE > /dev/null 2>&1 || true
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/mips64-local-linux-musl/bin:${PATH:-} LOCAL_CONFOPTS="--host=mips64-local-linux-musl" CC=/home/jhj/x-tools/mips64-local-linux-musl/bin/mips64-local-linux-musl-gcc gmake libuvdev -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/mips64-local-linux-musl/bin:${PATH:-} CC=/home/jhj/x-tools/mips64-local-linux-musl/bin/mips64-local-linux-musl-gcc LDFLAGS="-static" gmake -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - mkdir -p "src/${DISTDIR:?}"
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f src/dps8/dps8 src/prt2pdf/prt2pdf src/punutil/punutil "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( cd src && tar cf ../dps8m-git-linux-m64.tar "./${DISTDIR:?}"; ); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { pigz -C "${CI_COMMIT_SHA:?}" -9 -f -m -n dps8m-git-linux-m64.tar; }; fi
    - rm -rf "src/${DISTDIR:?}"
    - git clean -fdxq -e '*.tar*' -e 'dps8m*'
    - rm -rf /home/jhj/x-tools/mips64-local-linux-musl/
    - PARALLEL_CI_COUNT=$(( PARALLEL_CI_COUNT + 1 )) ; test ${PARALLEL_CI_COUNT:?} -gt ${CI_NODE_TOTAL:?} && PARALLEL_CI_COUNT=1 || true
    - wget --quiet "https://gitlab.com/dps8m/dps8m-archive/-/raw/master/CI/toolchains/mips64el-local-linux-musl.tar.lz" -O /mips64el-local-linux-musl.tar.lz
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( mkdir -p /home/jhj/x-tools && cd /home/jhj/x-tools && tar axf /mips64el-local-linux-musl.tar.lz ); }; fi
    - *scriptDPS8Mods
    - unset DPS8_CPUTYPE > /dev/null 2>&1 || true
    - unexport DPS8_CPUTYPE > /dev/null 2>&1 || true
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/mips64el-local-linux-musl/bin:${PATH:-} LOCAL_CONFOPTS="--host=mips64el-local-linux-musl" CC=/home/jhj/x-tools/mips64el-local-linux-musl/bin/mips64el-local-linux-musl-gcc gmake libuvdev -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/mips64el-local-linux-musl/bin:${PATH:-} CC=/home/jhj/x-tools/mips64el-local-linux-musl/bin/mips64el-local-linux-musl-gcc LDFLAGS="-static" gmake -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - mkdir -p "src/${DISTDIR:?}"
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f src/dps8/dps8 src/prt2pdf/prt2pdf src/punutil/punutil "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( cd src && tar cf ../dps8m-git-linux-m6l.tar "./${DISTDIR:?}"; ); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { pigz -C "${CI_COMMIT_SHA:?}" -9 -f -m -n dps8m-git-linux-m6l.tar; }; fi
    - rm -rf "src/${DISTDIR:?}"
    - git clean -fdxq -e '*.tar*' -e 'dps8m*'
    - rm -rf /home/jhj/x-tools/mips64el-local-linux-musl/
    - PARALLEL_CI_COUNT=$(( PARALLEL_CI_COUNT + 1 )) ; test ${PARALLEL_CI_COUNT:?} -gt ${CI_NODE_TOTAL:?} && PARALLEL_CI_COUNT=1 || true
    - wget --quiet "https://gitlab.com/dps8m/dps8m-archive/-/raw/master/CI/toolchains/sparc64-local-linux-gnu.tar.lz" -O /sparc64-local-linux-gnu.tar.lz
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( mkdir -p /home/jhj/x-tools && cd /home/jhj/x-tools && tar axf /sparc64-local-linux-gnu.tar.lz ); }; fi
    - *scriptDPS8Mods
    - unset DPS8_CPUTYPE > /dev/null 2>&1 || true
    - unexport DPS8_CPUTYPE > /dev/null 2>&1 || true
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/sparc64-local-linux-gnu/bin:${PATH:-} LOCAL_CONFOPTS="--host=sparc64-local-linux-gnu" CC=/home/jhj/x-tools/sparc64-local-linux-gnu/bin/sparc64-local-linux-gnu-gcc gmake libuvdev -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/sparc64-local-linux-gnu/bin:${PATH:-} CC=/home/jhj/x-tools/sparc64-local-linux-gnu/bin/sparc64-local-linux-gnu-gcc gmake -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - mkdir -p "src/${DISTDIR:?}"
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f src/dps8/dps8 src/prt2pdf/prt2pdf src/punutil/punutil "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( cd src && tar cf ../dps8m-git-linux-s64.tar "./${DISTDIR:?}"; ); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { pigz -C "${CI_COMMIT_SHA:?}" -9 -f -m -n dps8m-git-linux-s64.tar; }; fi
    - rm -rf "src/${DISTDIR:?}"
    - git clean -fdxq -e '*.tar*' -e 'dps8m*'
    - rm -rf /home/jhj/x-tools/sparc64-local-linux-gnu/
    - PARALLEL_CI_COUNT=$(( PARALLEL_CI_COUNT + 1 )) ; test ${PARALLEL_CI_COUNT:?} -gt ${CI_NODE_TOTAL:?} && PARALLEL_CI_COUNT=1 || true
    - wget --quiet "https://gitlab.com/dps8m/dps8m-archive/-/raw/master/CI/toolchains/sparc-local-linux-gnu.tar.lz" -O /sparc-local-linux-gnu.tar.lz
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( mkdir -p /home/jhj/x-tools && cd /home/jhj/x-tools && tar axf /sparc-local-linux-gnu.tar.lz ); }; fi
    - *scriptDPS8Mods
    - unset DPS8_CPUTYPE > /dev/null 2>&1 || true
    - unexport DPS8_CPUTYPE > /dev/null 2>&1 || true
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/sparc-local-linux-gnu/bin:${PATH:-} LOCAL_CONFOPTS="--host=sparc-local-linux-gnu" CC=/home/jhj/x-tools/sparc-local-linux-gnu/bin/sparc-local-linux-gnu-gcc gmake libuvdev -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/sparc-local-linux-gnu/bin:${PATH:-} CC=/home/jhj/x-tools/sparc-local-linux-gnu/bin/sparc-local-linux-gnu-gcc gmake -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4") NEED_128=1 LOCALLIBS="-latomic"; }; fi
    - mkdir -p "src/${DISTDIR:?}"
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f src/dps8/dps8 src/prt2pdf/prt2pdf src/punutil/punutil "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( cd src && tar cf ../dps8m-git-linux-s32.tar "./${DISTDIR:?}"; ); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { pigz -C "${CI_COMMIT_SHA:?}" -9 -f -m -n dps8m-git-linux-s32.tar; }; fi
    - rm -rf "src/${DISTDIR:?}"
    - git clean -fdxq -e '*.tar*' -e 'dps8m*'
    - rm -rf /home/jhj/x-tools/sparc-local-linux-gnu/
    - PARALLEL_CI_COUNT=$(( PARALLEL_CI_COUNT + 1 )) ; test ${PARALLEL_CI_COUNT:?} -gt ${CI_NODE_TOTAL:?} && PARALLEL_CI_COUNT=1 || true
    - wget --quiet "https://gitlab.com/dps8m/dps8m-archive/-/raw/master/CI/toolchains/loongarch64-local-linux-gnu.tar.lz" -O /loongarch64-local-linux-gnu.tar.lz
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( mkdir -p /home/jhj/x-tools && cd /home/jhj/x-tools && tar axf /loongarch64-local-linux-gnu.tar.lz ); }; fi
    - *scriptDPS8Mods
    - unset DPS8_CPUTYPE > /dev/null 2>&1 || true
    - unexport DPS8_CPUTYPE > /dev/null 2>&1 || true
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/loongarch64-local-linux-gnu/bin:${PATH:-} LOCAL_CONFOPTS="--host=loongarch64-local-linux-gnu" CC=/home/jhj/x-tools/loongarch64-local-linux-gnu/bin/loongarch64-local-linux-gnu-gcc gmake libuvdev -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/loongarch64-local-linux-gnu/bin:${PATH:-} CC=/home/jhj/x-tools/loongarch64-local-linux-gnu/bin/loongarch64-local-linux-gnu-gcc gmake -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - mkdir -p "src/${DISTDIR:?}"
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f src/dps8/dps8 src/prt2pdf/prt2pdf src/punutil/punutil "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( cd src && tar cf ../dps8m-git-linux-l64.tar "./${DISTDIR:?}"; ); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { pigz -C "${CI_COMMIT_SHA:?}" -9 -f -m -n dps8m-git-linux-l64.tar; }; fi
    - rm -rf "src/${DISTDIR:?}"
    - git clean -fdxq -e '*.tar*' -e 'dps8m*'
    - rm -rf /home/jhj/x-tools/loongarch64-local-linux-gnu
    - PARALLEL_CI_COUNT=$(( PARALLEL_CI_COUNT + 1 )) ; test ${PARALLEL_CI_COUNT:?} -gt ${CI_NODE_TOTAL:?} && PARALLEL_CI_COUNT=1 || true
    - wget --quiet "https://gitlab.com/dps8m/dps8m-archive/-/raw/master/CI/toolchains/amd64-unknown-freebsd13.tar.lz" -O /amd64-unknown-freebsd13.tar.lz
    - ( cd / && tar axf /amd64-unknown-freebsd13.tar.lz )
    - *scriptDPS8Mods
    - export DPS8_CPUTYPE=x86-64
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/src/FreeBSD-AMD64-crossgcc/out/bin:${PATH:-} CFLAGS="-march=${DPS8_CPUTYPE:?}" LOCAL_CONFOPTS="--host=amd64-unknown-freebsd13" CC=/home/jhj/src/FreeBSD-AMD64-crossgcc/out/bin/amd64-unknown-freebsd13-gcc gmake libuvdev -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/src/FreeBSD-AMD64-crossgcc/out/bin:${PATH:-} CFLAGS="-march=${DPS8_CPUTYPE:?}" CC=/home/jhj/src/FreeBSD-AMD64-crossgcc/out/bin/amd64-unknown-freebsd13-gcc LDFLAGS="-static" gmake -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - mkdir -p "src/${DISTDIR:?}"
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f src/dps8/dps8 src/prt2pdf/prt2pdf src/punutil/punutil "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( cd src && tar cf ../dps8m-git-fbd13-x61.tar "./${DISTDIR:?}"; ); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { pigz -C "${CI_COMMIT_SHA:?}" -9 -f -m -n dps8m-git-fbd13-x61.tar; }; fi
    - rm -rf "src/${DISTDIR:?}"
    - git clean -fdxq -e '*.tar*' -e 'dps8m*'
    - rm -rf /home/jhj/src/FreeBSD-AMD64-crossgcc/
    - PARALLEL_CI_COUNT=$(( PARALLEL_CI_COUNT + 1 )) ; test ${PARALLEL_CI_COUNT:?} -gt ${CI_NODE_TOTAL:?} && PARALLEL_CI_COUNT=1 || true
    - wget --quiet "https://gitlab.com/dps8m/dps8m-archive/-/raw/master/CI/toolchains/i386-unknown-freebsd13.tar.lz" -O /i386-unknown-freebsd13.tar.lz
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( cd / && tar axf /i386-unknown-freebsd13.tar.lz ); }; fi
    - *scriptDPS8Mods
    - export DPS8_CPUTYPE=i686
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/src/FreeBSD-i386-crossgcc/out/bin:${PATH:-} CFLAGS="-march=${DPS8_CPUTYPE:?}" LOCAL_CONFOPTS="--host=i386-unknown-freebsd13" CC=/home/jhj/src/FreeBSD-i386-crossgcc/out/bin/i386-unknown-freebsd13-gcc gmake libuvdev -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/src/FreeBSD-i386-crossgcc/out/bin:${PATH:-} CFLAGS="-march=${DPS8_CPUTYPE:?}" CC=/home/jhj/src/FreeBSD-i386-crossgcc/out/bin/i386-unknown-freebsd13-gcc LDFLAGS="-static" gmake -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4") NEED_128=1 ATOMICS=GNU LOCALLIBS="-latomic"; }; fi
    - mkdir -p "src/${DISTDIR:?}"
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f src/dps8/dps8 src/prt2pdf/prt2pdf src/punutil/punutil "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( cd src && tar cf ../dps8m-git-fbd13-x32.tar "./${DISTDIR:?}"; ); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { pigz -C "${CI_COMMIT_SHA:?}" -9 -f -m -n dps8m-git-fbd13-x32.tar; }; fi
    - rm -rf "src/${DISTDIR:?}"
    - git clean -fdxq -e '*.tar*' -e 'dps8m*'
    - rm -rf /home/jhj/src/FreeBSD-i386-crossgcc/
    - PARALLEL_CI_COUNT=$(( PARALLEL_CI_COUNT + 1 )) ; test ${PARALLEL_CI_COUNT:?} -gt ${CI_NODE_TOTAL:?} && PARALLEL_CI_COUNT=1 || true
    - wget --quiet "https://gitlab.com/dps8m/dps8m-archive/-/raw/master/CI/toolchains/aarch64-local-freebsd13.tar.lz" -O /aarch64-local-freebsd13.tar.lz
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( cd / && tar axf /aarch64-local-freebsd13.tar.lz ); }; fi
    - *scriptDPS8Mods
    - export DPS8_CPUTYPE=armv8-a
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/src/FreeBSD-ARM64-crossgcc/out/bin:${PATH:-} CFLAGS="-march=${DPS8_CPUTYPE:?}" LOCAL_CONFOPTS="--host=aarch64-local-freebsd13" CC=/home/jhj/src/FreeBSD-ARM64-crossgcc/out/bin/aarch64-local-freebsd13-gcc gmake libuvdev -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/src/FreeBSD-ARM64-crossgcc/out/bin:${PATH:-} CFLAGS="-march=${DPS8_CPUTYPE:?}" CC=/home/jhj/src/FreeBSD-ARM64-crossgcc/out/bin/aarch64-local-freebsd13-gcc LDFLAGS="-static" gmake -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - mkdir -p "src/${DISTDIR:?}"
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f src/dps8/dps8 src/prt2pdf/prt2pdf src/punutil/punutil "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( cd src && tar cf ../dps8m-git-fbd13-a64.tar "./${DISTDIR:?}"; ); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { pigz -C "${CI_COMMIT_SHA:?}" -9 -f -m -n dps8m-git-fbd13-a64.tar; }; fi
    - rm -rf "src/${DISTDIR:?}"
    - git clean -fdxq -e '*.tar*' -e 'dps8m*'
    - rm -rf /home/jhj/src/FreeBSD-ARM64-crossgcc/
    - PARALLEL_CI_COUNT=$(( PARALLEL_CI_COUNT + 1 )) ; test ${PARALLEL_CI_COUNT:?} -gt ${CI_NODE_TOTAL:?} && PARALLEL_CI_COUNT=1 || true
    - *scriptDPS8Mods
    - wget --quiet "https://gitlab.com/dps8m/dps8m-archive/-/raw/master/CI/toolchains/x86_64-local-netbsd9.tar.lz" -O /x86_64-local-netbsd9.tar.lz
    - ( cd / && tar axf /x86_64-local-netbsd9.tar.lz )
    - touch /home/jhj/src/NetBSD-AMD64-crossgcc/sysroot/usr/include/sys/cpuset.h
    - export DPS8_CPUTYPE=x86-64
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/src/NetBSD-AMD64-crossgcc/out/bin:${PATH:-} CFLAGS="-march=${DPS8_CPUTYPE:?}" LOCAL_CONFOPTS="--host=x86_64-local-netbsd9" CC=/home/jhj/src/NetBSD-AMD64-crossgcc/out/bin/x86_64-local-netbsd9-gcc gmake libuvrel -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/src/NetBSD-AMD64-crossgcc/out/bin:${PATH:-} CFLAGS="-march=${DPS8_CPUTYPE:?} -Wno-char-subscripts" CC=/home/jhj/src/NetBSD-AMD64-crossgcc/out/bin/x86_64-local-netbsd9-gcc LDFLAGS="-static" gmake -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4") LIBDL=""; }; fi
    - mkdir -p "src/${DISTDIR:?}"
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f src/dps8/dps8 src/prt2pdf/prt2pdf src/punutil/punutil "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( cd src && tar cf ../dps8m-git-nbd93-x61.tar "./${DISTDIR:?}"; ); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { pigz -C "${CI_COMMIT_SHA:?}" -9 -f -m -n dps8m-git-nbd93-x61.tar; }; fi
    - rm -rf "src/${DISTDIR:?}"
    - git clean -fdxq -e '*.tar*' -e 'dps8m*'
    - PARALLEL_CI_COUNT=$(( PARALLEL_CI_COUNT + 1 )) ; test ${PARALLEL_CI_COUNT:?} -gt ${CI_NODE_TOTAL:?} && PARALLEL_CI_COUNT=1 || true
    - rm -rf /home/jhj/src/NetBSD-AMD64-crossgcc/
    - wget --quiet "https://gitlab.com/dps8m/dps8m-archive/-/raw/master/CI/toolchains/i386-unknown-netbsdelf.tar.lz" -O /i386-unknown-netbsdelf.tar.lz
    - ( cd / && tar axf /i386-unknown-netbsdelf.tar.lz )
    - touch /home/jhj/src/NetBSD-i386-crossgcc/sysroot/usr/include/sys/cpuset.h
    - *scriptDPS8Mods
    - export DPS8_CPUTYPE=i586
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/src/NetBSD-i386-crossgcc/out/bin:${PATH:-} CFLAGS="-march=${DPS8_CPUTYPE:?}" LOCAL_CONFOPTS="--host=i386-unknown-netbsdelf" CC=/home/jhj/src/NetBSD-i386-crossgcc/out/bin/i386-unknown-netbsdelf-gcc gmake libuvrel -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/src/NetBSD-i386-crossgcc/out/bin:${PATH:-} CFLAGS="-march=${DPS8_CPUTYPE:?} -Wno-char-subscripts" CC=/home/jhj/src/NetBSD-i386-crossgcc/out/bin/i386-unknown-netbsdelf-gcc LDFLAGS="-static" gmake -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4") NEED_128=1 LIBDL=""; }; fi
    - mkdir -p "src/${DISTDIR:?}"
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f src/dps8/dps8 src/prt2pdf/prt2pdf src/punutil/punutil "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( cd src && tar cf ../dps8m-git-nbd93-586.tar "./${DISTDIR:?}"; ); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { pigz -C "${CI_COMMIT_SHA:?}" -9 -f -m -n dps8m-git-nbd93-586.tar; }; fi
    - rm -rf "src/${DISTDIR:?}"
    - git clean -fdxq -e '*.tar*' -e 'dps8m*'
    - PARALLEL_CI_COUNT=$(( PARALLEL_CI_COUNT + 1 )) ; test ${PARALLEL_CI_COUNT:?} -gt ${CI_NODE_TOTAL:?} && PARALLEL_CI_COUNT=1 || true
    - *scriptDPS8Mods
    - export DPS8_CPUTYPE=i686
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/src/NetBSD-i386-crossgcc/out/bin:${PATH:-} CFLAGS="-march=${DPS8_CPUTYPE:?}" LOCAL_CONFOPTS="--host=i386-unknown-netbsdelf" CC=/home/jhj/src/NetBSD-i386-crossgcc/out/bin/i386-unknown-netbsdelf-gcc gmake libuvrel -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/src/NetBSD-i386-crossgcc/out/bin:${PATH:-} CFLAGS="-march=${DPS8_CPUTYPE:?} -Wno-char-subscripts" CC=/home/jhj/src/NetBSD-i386-crossgcc/out/bin/i386-unknown-netbsdelf-gcc LDFLAGS="-static" gmake -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4") NEED_128=1 LIBDL=""; }; fi
    - mkdir -p "src/${DISTDIR:?}"
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f src/dps8/dps8 src/prt2pdf/prt2pdf src/punutil/punutil "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( cd src && tar cf ../dps8m-git-nbd93-686.tar "./${DISTDIR:?}"; ); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { pigz -C "${CI_COMMIT_SHA:?}" -9 -f -m -n dps8m-git-nbd93-686.tar; }; fi
    - rm -rf "src/${DISTDIR:?}"
    - git clean -fdxq -e '*.tar*' -e 'dps8m*'
    - rm -rf /home/jhj/src/NetBSD-i386-crossgcc/
    - PARALLEL_CI_COUNT=$(( PARALLEL_CI_COUNT + 1 )) ; test ${PARALLEL_CI_COUNT:?} -gt ${CI_NODE_TOTAL:?} && PARALLEL_CI_COUNT=1 || true
    - wget --quiet "https://gitlab.com/dps8m/dps8m-archive/-/raw/master/CI/toolchains/powerpc-unknown-netbsdelf.tar.lz" -O /powerpc-unknown-netbsdelf.tar.lz
    - ( cd / && tar axf /powerpc-unknown-netbsdelf.tar.lz )
    - touch /home/jhj/src/NetBSD-powerpc-crossgcc/sysroot/usr/include/sys/cpuset.h
    - *scriptDPS8Mods
    - export DPS8_CPUTYPE=970
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/src/NetBSD-powerpc-crossgcc/out/bin:${PATH:-} CFLAGS="-m32 -mcpu=${DPS8_CPUTYPE:?} -Wno-char-subscripts" LDFLAGS="-m32" LOCAL_CONFOPTS="--host=powerpc-unknown-netbsdelf" CC=/home/jhj/src/NetBSD-powerpc-crossgcc/out/bin/powerpc-unknown-netbsdelf-gcc gmake libuvrel -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/src/NetBSD-powerpc-crossgcc/out/bin:${PATH:-} CFLAGS="-m32 -mcpu=${DPS8_CPUTYPE:?} -Wno-char-subscripts" CC=/home/jhj/src/NetBSD-powerpc-crossgcc/out/bin/powerpc-unknown-netbsdelf-gcc LDFLAGS="-m32 -static" gmake -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4") LIBDL="" NEED_128=1 LOCALLIBS="-latomic"; }; fi
    - mkdir -p "src/${DISTDIR:?}"
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f src/dps8/dps8 src/prt2pdf/prt2pdf src/punutil/punutil "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( cd src && tar cf ../dps8m-git-nbd93-970.tar "./${DISTDIR:?}"; ); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { pigz -C "${CI_COMMIT_SHA:?}" -9 -f -m -n dps8m-git-nbd93-970.tar; }; fi
    - rm -rf "src/${DISTDIR:?}"
    - git clean -fdxq -e '*.tar*' -e 'dps8m*'
    - PARALLEL_CI_COUNT=$(( PARALLEL_CI_COUNT + 1 )) ; test ${PARALLEL_CI_COUNT:?} -gt ${CI_NODE_TOTAL:?} && PARALLEL_CI_COUNT=1 || true
    - *scriptDPS8Mods
    - export DPS8_CPUTYPE=7400
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/src/NetBSD-powerpc-crossgcc/out/bin:${PATH:-} CFLAGS="-mcpu=${DPS8_CPUTYPE:?} -Wno-char-subscripts" LOCAL_CONFOPTS="--host=powerpc-unknown-netbsdelf" CC=/home/jhj/src/NetBSD-powerpc-crossgcc/out/bin/powerpc-unknown-netbsdelf-gcc gmake libuvrel -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/src/NetBSD-powerpc-crossgcc/out/bin:${PATH:-} CFLAGS="-mcpu=${DPS8_CPUTYPE:?} -Wno-char-subscripts" CC=/home/jhj/src/NetBSD-powerpc-crossgcc/out/bin/powerpc-unknown-netbsdelf-gcc LDFLAGS="-static" gmake -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4") LIBDL="" NEED_128=1 LOCALLIBS="-latomic"; }; fi
    - mkdir -p "src/${DISTDIR:?}"
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f src/dps8/dps8 src/prt2pdf/prt2pdf src/punutil/punutil "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( cd src && tar cf ../dps8m-git-nbd93-pg4.tar "./${DISTDIR:?}"; ); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { pigz -C "${CI_COMMIT_SHA:?}" -9 -f -m -n dps8m-git-nbd93-pg4.tar; }; fi
    - rm -rf "src/${DISTDIR:?}"
    - git clean -fdxq -e '*.tar*' -e 'dps8m*'
    - PARALLEL_CI_COUNT=$(( PARALLEL_CI_COUNT + 1 )) ; test ${PARALLEL_CI_COUNT:?} -gt ${CI_NODE_TOTAL:?} && PARALLEL_CI_COUNT=1 || true
    - *scriptDPS8Mods
    - export DPS8_CPUTYPE=740
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/src/NetBSD-powerpc-crossgcc/out/bin:${PATH:-} CFLAGS="-mcpu=${DPS8_CPUTYPE:?} -Wno-char-subscripts" LOCAL_CONFOPTS="--host=powerpc-unknown-netbsdelf" CC=/home/jhj/src/NetBSD-powerpc-crossgcc/out/bin/powerpc-unknown-netbsdelf-gcc gmake libuvrel -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/src/NetBSD-powerpc-crossgcc/out/bin:${PATH:-} CFLAGS="-mcpu=${DPS8_CPUTYPE:?} -Wno-char-subscripts" CC=/home/jhj/src/NetBSD-powerpc-crossgcc/out/bin/powerpc-unknown-netbsdelf-gcc LDFLAGS="-static" gmake -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4") LIBDL="" NEED_128=1 LOCALLIBS="-latomic"; }; fi
    - mkdir -p "src/${DISTDIR:?}"
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f src/dps8/dps8 src/prt2pdf/prt2pdf src/punutil/punutil "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( cd src && tar cf ../dps8m-git-nbd93-740.tar "./${DISTDIR:?}"; ); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { pigz -C "${CI_COMMIT_SHA:?}" -9 -f -m -n dps8m-git-nbd93-740.tar; }; fi
    - rm -rf "src/${DISTDIR:?}"
    - git clean -fdxq -e '*.tar*' -e 'dps8m*'
    - rm -rf /home/jhj/src/NetBSD-powerpc-crossgcc/
    - PARALLEL_CI_COUNT=$(( PARALLEL_CI_COUNT + 1 )) ; test ${PARALLEL_CI_COUNT:?} -gt ${CI_NODE_TOTAL:?} && PARALLEL_CI_COUNT=1 || true
    - wget --quiet "https://gitlab.com/dps8m/dps8m-archive/-/raw/master/CI/toolchains/sparc64-unknown-netbsdelf.tar.lz" -O /sparc64-unknown-netbsdelf.tar.lz
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( cd / && tar axf /sparc64-unknown-netbsdelf.tar.lz ); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { touch /home/jhj/src/NetBSD-sparc64-crossgcc/sysroot/usr/include/sys/cpuset.h; }; fi
    - *scriptDPS8Mods
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/src/NetBSD-sparc64-crossgcc/out/bin:${PATH:-} CFLAGS="-Wno-char-subscripts" LOCAL_CONFOPTS="--host=sparc64-unknown-netbsdelf" CC=/home/jhj/src/NetBSD-sparc64-crossgcc/out/bin/sparc64-unknown-netbsdelf-gcc gmake libuvrel -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/src/NetBSD-sparc64-crossgcc/out/bin:${PATH:-} CFLAGS="-Wno-char-subscripts" CC=/home/jhj/src/NetBSD-sparc64-crossgcc/out/bin/sparc64-unknown-netbsdelf-gcc LDFLAGS="-static" gmake -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4") LIBDL=""; }; fi
    - mkdir -p "src/${DISTDIR:?}"
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f src/dps8/dps8 src/prt2pdf/prt2pdf src/punutil/punutil "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( cd src && tar cf ../dps8m-git-nbd93-s64.tar "./${DISTDIR:?}"; ); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { pigz -C "${CI_COMMIT_SHA:?}" -9 -f -m -n dps8m-git-nbd93-s64.tar; }; fi
    - rm -rf "src/${DISTDIR:?}"
    - git clean -fdxq -e '*.tar*' -e 'dps8m*'
    - rm -rf /home/jhj/src/NetBSD-sparc64-crossgcc/
    - PARALLEL_CI_COUNT=$(( PARALLEL_CI_COUNT + 1 )) ; test ${PARALLEL_CI_COUNT:?} -gt ${CI_NODE_TOTAL:?} && PARALLEL_CI_COUNT=1 || true
    - wget --quiet "https://gitlab.com/dps8m/dps8m-archive/-/raw/master/CI/toolchains/sparc-unknown-netbsdelf.tar.lz" -O /sparc-unknown-netbsdelf.tar.lz
    - wget --quiet "https://gitlab.com/dps8m/dps8m-archive/-/raw/master/CI/toolchains/sparc-netbsdelf-libatomic.a.lz" -O /libatomic.a.lz
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( cd / && tar axf /sparc-unknown-netbsdelf.tar.lz ); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( cd / && lzip -dv /libatomic.a.lz && mv -f /libatomic.a /home/jhj/src/NetBSD-sparc-crossgcc/out/lib/gcc/sparc-unknown-netbsdelf/12.2.1/../../../../sparc-unknown-netbsdelf/lib/libatomic.a ); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { touch /home/jhj/src/NetBSD-sparc-crossgcc/sysroot/usr/include/sys/cpuset.h; }; fi
    - *scriptDPS8Mods
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/src/NetBSD-sparc-crossgcc/out/bin:${PATH:-} CFLAGS="-Wno-char-subscripts" LOCAL_CONFOPTS="--host=sparc-unknown-netbsdelf" CC=/home/jhj/src/NetBSD-sparc-crossgcc/out/bin/sparc-unknown-netbsdelf-gcc gmake libuvrel -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/src/NetBSD-sparc-crossgcc/out/bin:${PATH:-} CFLAGS="-Wno-char-subscripts" CC=/home/jhj/src/NetBSD-sparc-crossgcc/out/bin/sparc-unknown-netbsdelf-gcc LDFLAGS="-static" gmake -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4") LIBDL="" NEED_128=1 LOCALLIBS="-latomic"; }; fi
    - mkdir -p "src/${DISTDIR:?}"
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f src/dps8/dps8 src/prt2pdf/prt2pdf src/punutil/punutil "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( cd src && tar cf ../dps8m-git-nbd93-s32.tar "./${DISTDIR:?}"; ); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { pigz -C "${CI_COMMIT_SHA:?}" -9 -f -m -n dps8m-git-nbd93-s32.tar; }; fi
    - rm -rf "src/${DISTDIR:?}"
    - git clean -fdxq -e '*.tar*' -e 'dps8m*'
    - rm -rf /home/jhj/src/NetBSD-sparc-crossgcc/
    - PARALLEL_CI_COUNT=$(( PARALLEL_CI_COUNT + 1 )) ; test ${PARALLEL_CI_COUNT:?} -gt ${CI_NODE_TOTAL:?} && PARALLEL_CI_COUNT=1 || true
    - wget --quiet "https://gitlab.com/dps8m/dps8m-archive/-/raw/master/CI/toolchains/x86_64-pc-illumos.tar.lz" -O /x86_64-pc-illumos.tar.lz
    - ( cd / && tar axf /x86_64-pc-illumos.tar.lz )
    - *scriptDPS8Mods
    - export DPS8_CPUTYPE=x86-64
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/src/OI-AMD64-crossgcc/out/bin:${PATH:-} CFLAGS="-march=${DPS8_CPUTYPE:?}" LOCAL_CONFOPTS="--host=x86_64-pc-solaris2.11" CC=/home/jhj/src/OI-AMD64-crossgcc/out/bin/x86_64-pc-solaris2.11-gcc gmake libuvdev -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/src/OI-AMD64-crossgcc/out/bin:${PATH:-} CFLAGS="-march=${DPS8_CPUTYPE:?}" CC=/home/jhj/src/OI-AMD64-crossgcc/out/bin/x86_64-pc-solaris2.11-gcc gmake -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4") LOCALLIBS="-lmtmalloc -lmp -lmd -lsocket -lnsl -lm -lpthread"; }; fi
    - mkdir -p "src/${DISTDIR:?}"
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f src/dps8/dps8 src/prt2pdf/prt2pdf src/punutil/punutil "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( cd src && tar cf ../dps8m-git-iloi-641.tar "./${DISTDIR:?}"; ); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { pigz -C "${CI_COMMIT_SHA:?}" -9 -f -m -n dps8m-git-iloi-641.tar; }; fi
    - rm -rf "src/${DISTDIR:?}"
    - git clean -fdxq -e '*.tar*' -e 'dps8m*'
    - chmod u+rwx /home/jhj/src/OI-AMD64-crossgcc/ || true
    - rm -rf /home/jhj/src/OI-AMD64-crossgcc/
    - PARALLEL_CI_COUNT=$(( PARALLEL_CI_COUNT + 1 )) ; test ${PARALLEL_CI_COUNT:?} -gt ${CI_NODE_TOTAL:?} && PARALLEL_CI_COUNT=1 || true
    - wget --quiet "https://gitlab.com/dps8m/dps8m-archive/-/raw/master/CI/toolchains/x86_64-pc-solaris2.11.tar.lz" -O /x86_64-pc-solaris2.11.tar.lz
    - ( cd / && tar axf /x86_64-pc-solaris2.11.tar.lz )
    - *scriptDPS8Mods
    - export DPS8_CPUTYPE=x86-64
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/src/Solaris-AMD64-crossgcc/out/bin:${PATH:-} CFLAGS="-march=${DPS8_CPUTYPE:?}" LOCAL_CONFOPTS="--host=x86_64-pc-solaris2.11" CC=/home/jhj/src/Solaris-AMD64-crossgcc/out/bin/x86_64-pc-solaris2.11-gcc gmake libuvrel -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/src/Solaris-AMD64-crossgcc/out/bin:${PATH:-} CFLAGS="-march=${DPS8_CPUTYPE:?}" CC=/home/jhj/src/Solaris-AMD64-crossgcc/out/bin/x86_64-pc-solaris2.11-gcc gmake -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4") LOCALLIBS="-lmtmalloc -lmp -lmd -lsocket -lnsl -lm -lpthread" LIBUTIL="" LIBUTIL="" OVR_FLOCK=""; }; fi
    - mkdir -p "src/${DISTDIR:?}"
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f src/dps8/dps8 src/prt2pdf/prt2pdf src/punutil/punutil "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( cd src && tar cf ../dps8m-git-s114-641.tar "./${DISTDIR:?}"; ); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { pigz -C "${CI_COMMIT_SHA:?}" -9 -f -m -n dps8m-git-s114-641.tar; }; fi
    - rm -rf "src/${DISTDIR:?}"
    - git clean -fdxq -e '*.tar*' -e 'dps8m*'
    - chmod -R u+rwx /home/jhj/src/Solaris-AMD64-crossgcc/ || true
    - rm -rf /home/jhj/src/Solaris-AMD64-crossgcc/
    - PARALLEL_CI_COUNT=$(( PARALLEL_CI_COUNT + 1 )) ; test ${PARALLEL_CI_COUNT:?} -gt ${CI_NODE_TOTAL:?} && PARALLEL_CI_COUNT=1 || true
    - wget --quiet "https://gitlab.com/dps8m/dps8m-archive/-/raw/master/CI/toolchains/powerpc64-local-linux-musl.tar.lz" -O /powerpc64-local-linux-musl.tar.lz
    - ( mkdir -p /home/jhj/x-tools && cd /home/jhj/x-tools && tar axf /powerpc64-local-linux-musl.tar.lz )
    - *scriptDPS8Mods
    - export DPS8_CPUTYPE=970
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH="/home/jhj/x-tools/powerpc64-local-linux-musl/bin:${PATH}" CC="/home/jhj/x-tools/powerpc64-local-linux-musl/bin/powerpc64-local-linux-musl-gcc" CFLAGS="-mcpu=${DPS8_CPUTYPE:?} -Dftello64=ftello -Doff64_t=off_t -Dfseeko64=fseeko -Dfopen64=fopen" LOCAL_CONFOPTS="--host=powerpc64-local-linux-musl" gmake libuvdev -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH="/home/jhj/x-tools/powerpc64-local-linux-musl/bin:${PATH}" CC="/home/jhj/x-tools/powerpc64-local-linux-musl/bin/powerpc64-local-linux-musl-gcc" CFLAGS="-mcpu=${DPS8_CPUTYPE:?} -Dftello64=ftello -Doff64_t=off_t -Dfseeko64=fseeko -Dfopen64=fopen" LDFLAGS="-static" gmake -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - mkdir -p "src/${DISTDIR:?}"
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f src/dps8/dps8 src/prt2pdf/prt2pdf src/punutil/punutil "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( cd src && tar cf ../dps8m-git-linux-970.tar "./${DISTDIR:?}"; ); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { pigz -C "${CI_COMMIT_SHA:?}" -9 -f -m -n dps8m-git-linux-970.tar; }; fi
    - rm -rf "src/${DISTDIR:?}"
    - git clean -fdxq -e '*.tar*' -e 'dps8m*'
    - PARALLEL_CI_COUNT=$(( PARALLEL_CI_COUNT + 1 )) ; test ${PARALLEL_CI_COUNT:?} -gt ${CI_NODE_TOTAL:?} && PARALLEL_CI_COUNT=1 || true
    - *scriptDPS8Mods
    - export DPS8_CPUTYPE=power5
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH="/home/jhj/x-tools/powerpc64-local-linux-musl/bin:${PATH}" CC="/home/jhj/x-tools/powerpc64-local-linux-musl/bin/powerpc64-local-linux-musl-gcc" CFLAGS="-mcpu=${DPS8_CPUTYPE:?} -Dftello64=ftello -Doff64_t=off_t -Dfseeko64=fseeko -Dfopen64=fopen" LOCAL_CONFOPTS="--host=powerpc64-local-linux-musl" gmake libuvdev -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH="/home/jhj/x-tools/powerpc64-local-linux-musl/bin:${PATH}" CC="/home/jhj/x-tools/powerpc64-local-linux-musl/bin/powerpc64-local-linux-musl-gcc" CFLAGS="-mcpu=${DPS8_CPUTYPE:?} -Dftello64=ftello -Doff64_t=off_t -Dfseeko64=fseeko -Dfopen64=fopen" LDFLAGS="-static" gmake -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - mkdir -p "src/${DISTDIR:?}"
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f src/dps8/dps8 src/prt2pdf/prt2pdf src/punutil/punutil "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( cd src && tar cf ../dps8m-git-linux-bp5.tar "./${DISTDIR:?}"; ); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { pigz -C "${CI_COMMIT_SHA:?}" -9 -f -m -n dps8m-git-linux-bp5.tar; }; fi
    - rm -rf "src/${DISTDIR:?}"
    - git clean -fdxq -e '*.tar*' -e 'dps8m*'
    - PARALLEL_CI_COUNT=$(( PARALLEL_CI_COUNT + 1 )) ; test ${PARALLEL_CI_COUNT:?} -gt ${CI_NODE_TOTAL:?} && PARALLEL_CI_COUNT=1 || true
    - *scriptDPS8Mods
    - export DPS8_CPUTYPE=power6
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH="/home/jhj/x-tools/powerpc64-local-linux-musl/bin:${PATH}" CC="/home/jhj/x-tools/powerpc64-local-linux-musl/bin/powerpc64-local-linux-musl-gcc" CFLAGS="-mcpu=${DPS8_CPUTYPE:?} -Dftello64=ftello -Doff64_t=off_t -Dfseeko64=fseeko -Dfopen64=fopen" LOCAL_CONFOPTS="--host=powerpc64-local-linux-musl" gmake libuvdev -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH="/home/jhj/x-tools/powerpc64-local-linux-musl/bin:${PATH}" CC="/home/jhj/x-tools/powerpc64-local-linux-musl/bin/powerpc64-local-linux-musl-gcc" CFLAGS="-mcpu=${DPS8_CPUTYPE:?} -Dftello64=ftello -Doff64_t=off_t -Dfseeko64=fseeko -Dfopen64=fopen" LDFLAGS="-static" gmake -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - mkdir -p "src/${DISTDIR:?}"
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f src/dps8/dps8 src/prt2pdf/prt2pdf src/punutil/punutil "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( cd src && tar cf ../dps8m-git-linux-bp6.tar "./${DISTDIR:?}"; ); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { pigz -C "${CI_COMMIT_SHA:?}" -9 -f -m -n dps8m-git-linux-bp6.tar; }; fi
    - rm -rf "src/${DISTDIR:?}"
    - git clean -fdxq -e '*.tar*' -e 'dps8m*'
    - PARALLEL_CI_COUNT=$(( PARALLEL_CI_COUNT + 1 )) ; test ${PARALLEL_CI_COUNT:?} -gt ${CI_NODE_TOTAL:?} && PARALLEL_CI_COUNT=1 || true
    - *scriptDPS8Mods
    - export DPS8_CPUTYPE=power7
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH="/home/jhj/x-tools/powerpc64-local-linux-musl/bin:${PATH}" CC="/home/jhj/x-tools/powerpc64-local-linux-musl/bin/powerpc64-local-linux-musl-gcc" CFLAGS="-mcpu=${DPS8_CPUTYPE:?} -Dftello64=ftello -Doff64_t=off_t -Dfseeko64=fseeko -Dfopen64=fopen" LOCAL_CONFOPTS="--host=powerpc64-local-linux-musl" gmake libuvdev -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH="/home/jhj/x-tools/powerpc64-local-linux-musl/bin:${PATH}" CC="/home/jhj/x-tools/powerpc64-local-linux-musl/bin/powerpc64-local-linux-musl-gcc" CFLAGS="-mcpu=${DPS8_CPUTYPE:?} -Dftello64=ftello -Doff64_t=off_t -Dfseeko64=fseeko -Dfopen64=fopen" LDFLAGS="-static" gmake -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - mkdir -p "src/${DISTDIR:?}"
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f src/dps8/dps8 src/prt2pdf/prt2pdf src/punutil/punutil "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( cd src && tar cf ../dps8m-git-linux-bp7.tar "./${DISTDIR:?}"; ); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { pigz -C "${CI_COMMIT_SHA:?}" -9 -f -m -n dps8m-git-linux-bp7.tar; }; fi
    - rm -rf "src/${DISTDIR:?}"
    - git clean -fdxq -e '*.tar*' -e 'dps8m*'
    - PARALLEL_CI_COUNT=$(( PARALLEL_CI_COUNT + 1 )) ; test ${PARALLEL_CI_COUNT:?} -gt ${CI_NODE_TOTAL:?} && PARALLEL_CI_COUNT=1 || true
    - *scriptDPS8Mods
    - export DPS8_CPUTYPE=power8
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH="/home/jhj/x-tools/powerpc64-local-linux-musl/bin:${PATH}" CC="/home/jhj/x-tools/powerpc64-local-linux-musl/bin/powerpc64-local-linux-musl-gcc" CFLAGS="-mcpu=${DPS8_CPUTYPE:?} -Dftello64=ftello -Doff64_t=off_t -Dfseeko64=fseeko -Dfopen64=fopen" LOCAL_CONFOPTS="--host=powerpc64-local-linux-musl" gmake libuvdev -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH="/home/jhj/x-tools/powerpc64-local-linux-musl/bin:${PATH}" CC="/home/jhj/x-tools/powerpc64-local-linux-musl/bin/powerpc64-local-linux-musl-gcc" CFLAGS="-mcpu=${DPS8_CPUTYPE:?} -Dftello64=ftello -Doff64_t=off_t -Dfseeko64=fseeko -Dfopen64=fopen" LDFLAGS="-static" gmake -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - mkdir -p "src/${DISTDIR:?}"
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f src/dps8/dps8 src/prt2pdf/prt2pdf src/punutil/punutil "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( cd src && tar cf ../dps8m-git-linux-bp8.tar "./${DISTDIR:?}"; ); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { pigz -C "${CI_COMMIT_SHA:?}" -9 -f -m -n dps8m-git-linux-bp8.tar; }; fi
    - rm -rf "src/${DISTDIR:?}"
    - git clean -fdxq -e '*.tar*' -e 'dps8m*'
    - PARALLEL_CI_COUNT=$(( PARALLEL_CI_COUNT + 1 )) ; test ${PARALLEL_CI_COUNT:?} -gt ${CI_NODE_TOTAL:?} && PARALLEL_CI_COUNT=1 || true
    - *scriptDPS8Mods
    - export DPS8_CPUTYPE=power9
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH="/home/jhj/x-tools/powerpc64-local-linux-musl/bin:${PATH}" CC="/home/jhj/x-tools/powerpc64-local-linux-musl/bin/powerpc64-local-linux-musl-gcc" CFLAGS="-mcpu=${DPS8_CPUTYPE:?} -Dftello64=ftello -Doff64_t=off_t -Dfseeko64=fseeko -Dfopen64=fopen" LOCAL_CONFOPTS="--host=powerpc64-local-linux-musl" gmake libuvdev -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH="/home/jhj/x-tools/powerpc64-local-linux-musl/bin:${PATH}" CC="/home/jhj/x-tools/powerpc64-local-linux-musl/bin/powerpc64-local-linux-musl-gcc" CFLAGS="-mcpu=${DPS8_CPUTYPE:?} -Dftello64=ftello -Doff64_t=off_t -Dfseeko64=fseeko -Dfopen64=fopen" LDFLAGS="-static" gmake -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - mkdir -p "src/${DISTDIR:?}"
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f src/dps8/dps8 src/prt2pdf/prt2pdf src/punutil/punutil "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( cd src && tar cf ../dps8m-git-linux-bp9.tar "./${DISTDIR:?}"; ); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { pigz -C "${CI_COMMIT_SHA:?}" -9 -f -m -n dps8m-git-linux-bp9.tar; }; fi
    - rm -rf "src/${DISTDIR:?}"
    - git clean -fdxq -e '*.tar*' -e 'dps8m*'
    - PARALLEL_CI_COUNT=$(( PARALLEL_CI_COUNT + 1 )) ; test ${PARALLEL_CI_COUNT:?} -gt ${CI_NODE_TOTAL:?} && PARALLEL_CI_COUNT=1 || true
    - *scriptDPS8Mods
    - export DPS8_CPUTYPE=power10
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH="/home/jhj/x-tools/powerpc64-local-linux-musl/bin:${PATH}" CC="/home/jhj/x-tools/powerpc64-local-linux-musl/bin/powerpc64-local-linux-musl-gcc" CFLAGS="-mcpu=${DPS8_CPUTYPE:?} -Dftello64=ftello -Doff64_t=off_t -Dfseeko64=fseeko -Dfopen64=fopen" LOCAL_CONFOPTS="--host=powerpc64-local-linux-musl" gmake libuvdev -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH="/home/jhj/x-tools/powerpc64-local-linux-musl/bin:${PATH}" CC="/home/jhj/x-tools/powerpc64-local-linux-musl/bin/powerpc64-local-linux-musl-gcc" CFLAGS="-mcpu=${DPS8_CPUTYPE:?} -Dftello64=ftello -Doff64_t=off_t -Dfseeko64=fseeko -Dfopen64=fopen" LDFLAGS="-static" gmake -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - mkdir -p "src/${DISTDIR:?}"
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f src/dps8/dps8 src/prt2pdf/prt2pdf src/punutil/punutil "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( cd src && tar cf ../dps8m-git-linux-bpt.tar "./${DISTDIR:?}"; ); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { pigz -C "${CI_COMMIT_SHA:?}" -9 -f -m -n dps8m-git-linux-bpt.tar; }; fi
    - rm -rf "src/${DISTDIR:?}"
    - git clean -fdxq -e '*.tar*' -e 'dps8m*'
    - chmod -R u+rwx /home/jhj/x-tools/powerpc64-local-linux-musl || true
    - rm -rf /home/jhj/x-tools/powerpc64-local-linux-musl || true
    - PARALLEL_CI_COUNT=$(( PARALLEL_CI_COUNT + 1 )) ; test ${PARALLEL_CI_COUNT:?} -gt ${CI_NODE_TOTAL:?} && PARALLEL_CI_COUNT=1 || true
    - wget --quiet "https://gitlab.com/dps8m/dps8m-archive/-/raw/master/CI/toolchains/powerpcle-local-linux-musl.tar.lz" -O /powerpcle-local-linux-musl.tar.lz
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( mkdir -p /home/jhj/x-tools && cd /home/jhj/x-tools && tar axf /powerpcle-local-linux-musl.tar.lz ); }; fi
    - *scriptDPS8Mods
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH="/home/jhj/x-tools/powerpcle-local-linux-musl/bin:${PATH}" CC="/home/jhj/x-tools/powerpcle-local-linux-musl/bin/powerpcle-local-linux-musl-gcc" LOCAL_CONFOPTS="--host=powerpcle-local-linux-musl" LDFLAGS="-static" CFLAGS="-Dftello64=ftello -Doff64_t=off_t -Dfseeko64=fseeko -Dfopen64=fopen -mcpu=powerpc" gmake libuvdev -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH="/home/jhj/x-tools/powerpcle-local-linux-musl/bin:${PATH}" CC="/home/jhj/x-tools/powerpcle-local-linux-musl/bin/powerpcle-local-linux-musl-gcc" LDFLAGS="-static" CFLAGS="-Dftello64=ftello -Doff64_t=off_t -Dfseeko64=fseeko -Dfopen64=fopen -mcpu=powerpc" gmake NEED_128=1 ATOMICS="GNU" LOCALLIBS="-latomic" -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - mkdir -p "src/${DISTDIR:?}"
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f src/dps8/dps8 src/prt2pdf/prt2pdf src/punutil/punutil "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( cd src && tar cf ../dps8m-git-linux-ple.tar "./${DISTDIR:?}"; ); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { pigz -C "${CI_COMMIT_SHA:?}" -9 -f -m -n dps8m-git-linux-ple.tar; }; fi
    - rm -rf "src/${DISTDIR:?}"
    - git clean -fdxq -e '*.tar*' -e 'dps8m*'
    - chmod -R u+rwx /home/jhj/x-tools/powerpcle-local-linux-musl || true
    - rm -rf /home/jhj/x-tools/powerpcle-local-linux-musl || true
    - PARALLEL_CI_COUNT=$(( PARALLEL_CI_COUNT + 1 )) ; test ${PARALLEL_CI_COUNT:?} -gt ${CI_NODE_TOTAL:?} && PARALLEL_CI_COUNT=1 || true
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { wget --quiet "https://gitlab.com/dps8m/dps8m-archive/-/raw/master/CI/toolchains/sparc64-sun-solaris2.11.tar.lz" -O /sparc64-sun-solaris2.11.tar.lz; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( mkdir -p /home/jhj/x-tools && cd /home/jhj/x-tools && tar axf /sparc64-sun-solaris2.11.tar.lz && rm -f /sparc64-sun-solaris2.11.tar.lz; ); }; fi
    - *scriptDPS8Mods
    - export DPS8_CPUTYPE=v9
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/sparc64-sun-solaris2.11/x86_64-unknown-linux-gnu/bin:/home/jhj/x-tools/sparc64-sun-solaris2.11/sparc64-sun-solaris2.11/bin:/home/jhj/x-tools/sparc64-sun-solaris2.11/bin:${PATH:-} CFLAGS="-static-libgcc -m64 -mcpu=${DPS8_CPUTYPE:?}" LOCAL_CONFOPTS="--host=sparc64-sun-solaris2.11" CC=/home/jhj/x-tools/sparc64-sun-solaris2.11/bin/sparc64-sun-solaris2.11-gcc gmake libuvrel -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4"); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env PATH=/home/jhj/x-tools/sparc64-sun-solaris2.11/x86_64-unknown-linux-gnu/bin:/home/jhj/x-tools/sparc64-sun-solaris2.11/sparc64-sun-solaris2.11/bin:/home/jhj/x-tools/sparc64-sun-solaris2.11/bin:${PATH:-} CFLAGS="-static-libgcc -m64 -mcpu=${DPS8_CPUTYPE:?}" CC=/home/jhj/x-tools/sparc64-sun-solaris2.11/bin/sparc64-sun-solaris2.11-gcc gmake -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4") LOCALLIBS="-lmtmalloc -lmp -lmd -lsocket -lnsl -lm -lpthread" LIBUTIL="" OVR_FLOCK=""; }; fi
    - mkdir -p "src/${DISTDIR:?}"
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f src/dps8/dps8 src/prt2pdf/prt2pdf src/punutil/punutil "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( cd src && tar cf ../dps8m-git-s114-sv9.tar "./${DISTDIR:?}"; ); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { pigz -C "${CI_COMMIT_SHA:?}" -9 -f -m -n dps8m-git-s114-sv9.tar; }; fi
    - rm -rf "src/${DISTDIR:?}"
    - git clean -fdxq -e '*.tar*' -e 'dps8m*'
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { chmod -R u+rwx /home/jhj/x-tools/sparc64-sun-solaris2.11 || true; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { rm -rf /home/jhj/x-tools/sparc64-sun-solaris2.11 || true; }; fi
    - *scriptDPS8Mods
    - PARALLEL_CI_COUNT=$(( PARALLEL_CI_COUNT + 1 )) ; test ${PARALLEL_CI_COUNT:?} -gt ${CI_NODE_TOTAL:?} && PARALLEL_CI_COUNT=1 || true
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { wget --quiet "https://gitlab.com/dps8m/dps8m-archive/-/raw/master/CI/toolchains/MacOSX13.1-Xcode14.3.tar.lz" -O /MacOSX13.1-Xcode14.3.tar.lz; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( mkdir -p /home/jhj/x-tools && cd /home/jhj/x-tools && tar axf /MacOSX13.1-Xcode14.3.tar.lz && rm -f /MacOSX13.1-Xcode14.3.tar.lz && ln -s MacOSX13.1-Xcode14.3 MacOSX.sdk; ); }; fi
    - mkdir -p "src/${DISTDIR:?}"
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { gmake distclean; env CI_SKIP_MKREBUILD=1 PATH="/home/jhj/x-tools/MacOSX13.1-Xcode14.3/linux64bin:${PATH:?}" CSTD="c11" CC="clang -Wno-typedef-redefinition -Wno-nullability-extension -Wno-unused-command-line-argument -Wno-expansion-to-defined -Wno-nullability-completeness -m64 -fpic -fPIC --target=x86_64-apple-darwin17.0.0 -B/home/jhj/x-tools/MacOSX.sdk/usr/lib -L/home/jhj/x-tools/MacOSX.sdk/usr/lib -I/home/jhj/x-tools/MacOSX.sdk/usr/include -fuse-ld=lld -fno-stack-protector -march=core2" LOCAL_CONFOPTS="--host=x86_64-apple-darwin17.0.0" gmake libuvdev && llvm-ranlib libuv-local/libuv/../local/lib/libuv.a; }; fi
    - *scriptDPS8Mods
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env CI_SKIP_MKREBUILD=1 PATH="/home/jhj/x-tools/MacOSX13.1-Xcode14.3/linux64bin:${PATH:?}" CSTD="c11" CC="clang -Wno-typedef-redefinition -Wno-nullability-extension -Wno-unused-command-line-argument -Wno-expansion-to-defined -Wno-nullability-completeness -m64 -fpic -fPIC --target=x86_64-apple-darwin17.0.0 -B/home/jhj/x-tools/MacOSX.sdk/usr/lib -L/home/jhj/x-tools/MacOSX.sdk/usr/lib -I/home/jhj/x-tools/MacOSX.sdk/usr/include -fuse-ld=lld -fno-stack-protector -march=core2" LOCAL_CONFOPTS="--host=x86_64-apple-darwin17.0.0" gmake LIBRT="" && cp -f src/dps8/dps8 dps8.x86_64 && cp -f src/punutil/punutil punutil.x86_64 && cp -f src/prt2pdf/prt2pdf prt2pdf.x86_64 && gmake distclean; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env CI_SKIP_MKREBUILD=1 PATH="/home/jhj/x-tools/MacOSX13.1-Xcode14.3/linux64bin:${PATH:?}" CSTD="c11" CC="clang -Wno-typedef-redefinition -Wno-nullability-extension -Wno-unused-command-line-argument -Wno-expansion-to-defined -Wno-nullability-completeness -m64 -fpic -fPIC --target=x86_64-apple-darwin17.0.0 -B/home/jhj/x-tools/MacOSX.sdk/usr/lib -L/home/jhj/x-tools/MacOSX.sdk/usr/lib -I/home/jhj/x-tools/MacOSX.sdk/usr/include -fuse-ld=lld -fno-stack-protector -march=haswell" LOCAL_CONFOPTS="--host=x86_64-apple-darwin17.0.0" gmake libuvdev && llvm-ranlib libuv-local/libuv/../local/lib/libuv.a; }; fi
    - *scriptDPS8Mods
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env CI_SKIP_MKREBUILD=1 PATH="/home/jhj/x-tools/MacOSX13.1-Xcode14.3/linux64bin:${PATH:?}" CSTD="c11" CC="clang -Wno-typedef-redefinition -Wno-nullability-extension -Wno-unused-command-line-argument -Wno-expansion-to-defined -Wno-nullability-completeness -m64 -fpic -fPIC --target=x86_64-apple-darwin17.0.0 -B/home/jhj/x-tools/MacOSX.sdk/usr/lib -L/home/jhj/x-tools/MacOSX.sdk/usr/lib -I/home/jhj/x-tools/MacOSX.sdk/usr/include -fuse-ld=lld -fno-stack-protector -march=haswell" LOCAL_CONFOPTS="--host=x86_64-apple-darwin17.0.0" gmake LIBRT="" && cp -f src/dps8/dps8 dps8.x86_64h && cp -f src/punutil/punutil punutil.x86_64h && cp -f src/prt2pdf/prt2pdf prt2pdf.x86_64h && sed -i'' -e 's/\xCF\xFA\xED\xFE\x07\x00\x00\x01\x03/\xCF\xFA\xED\xFE\x07\x00\x00\x01\x08/' dps8.x86_64h && sed -i'' -e 's/\xCF\xFA\xED\xFE\x07\x00\x00\x01\x03/\xCF\xFA\xED\xFE\x07\x00\x00\x01\x08/' prt2pdf.x86_64h && sed -i'' -e 's/\xCF\xFA\xED\xFE\x07\x00\x00\x01\x03/\xCF\xFA\xED\xFE\x07\x00\x00\x01\x08/' punutil.x86_64h && gmake distclean; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env CI_SKIP_MKREBUILD=1 PATH="/home/jhj/x-tools/MacOSX13.1-Xcode14.3/linux64bin:${PATH:?}" CSTD="c11" CC="clang -Wno-typedef-redefinition -Wno-nullability-extension -Wno-unused-command-line-argument -Wno-expansion-to-defined -Wno-nullability-completeness -m64 -fpic -fPIC --target=arm64-apple-darwin20.0.0 -B/home/jhj/x-tools/MacOSX.sdk/usr/lib -L/home/jhj/x-tools/MacOSX.sdk/usr/lib -I/home/jhj/x-tools/MacOSX.sdk/usr/include -fuse-ld=lld -fno-stack-protector -march=armv8.4-a+simd+nosve+nosve2" LOCAL_CONFOPTS="--host=arm64-apple-darwin20.0.0" gmake libuvdev && llvm-ranlib libuv-local/libuv/../local/lib/libuv.a; }; fi
    - *scriptDPS8Mods
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { env CI_SKIP_MKREBUILD=1 PATH="/home/jhj/x-tools/MacOSX13.1-Xcode14.3/linux64bin:${PATH:?}" CSTD="c11" CC="clang -Wno-typedef-redefinition -Wno-nullability-extension -Wno-unused-command-line-argument -Wno-expansion-to-defined -Wno-nullability-completeness -m64 -fpic -fPIC --target=arm64-apple-darwin20.0.0 -B/home/jhj/x-tools/MacOSX.sdk/usr/lib -L/home/jhj/x-tools/MacOSX.sdk/usr/lib -I/home/jhj/x-tools/MacOSX.sdk/usr/include -fuse-ld=lld -fno-stack-protector -march=armv8.4-a+simd+nosve+nosve2" LOCAL_CONFOPTS="--host=arm64-apple-darwin20.0.0" gmake LIBRT="" && cp -f src/dps8/dps8 dps8.arm64 && cp -f src/punutil/punutil punutil.arm64 && cp -f src/prt2pdf/prt2pdf prt2pdf.arm64 && /home/jhj/x-tools/MacOSX13.1-Xcode14.3/linux64bin/lipo -create -output "dps8" "dps8.x86_64" "dps8.x86_64h" "dps8.arm64" && /home/jhj/x-tools/MacOSX13.1-Xcode14.3/linux64bin/lipo -create -output "prt2pdf" "prt2pdf.x86_64" "prt2pdf.x86_64h" "prt2pdf.arm64" && /home/jhj/x-tools/MacOSX13.1-Xcode14.3/linux64bin/lipo -create -output "punutil" "punutil.x86_64" "punutil.x86_64h" "punutil.arm64" && env rm -f *.x86_64 *.x86_64h *.arm64 && mv -f "dps8" "prt2pdf" "punutil" "src/${DISTDIR:?}" && /home/jhj/x-tools/MacOSX13.1-Xcode14.3/linux64bin/otool -l "src/${DISTDIR:?}/dps8" && /home/jhj/x-tools/MacOSX13.1-Xcode14.3/linux64bin/otool -l "src/${DISTDIR:?}/prt2pdf" && /home/jhj/x-tools/MacOSX13.1-Xcode14.3/linux64bin/otool -l "src/${DISTDIR:?}/punutil"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { cp -f docs/txt/README-macOS.txt docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { ( cd src && tar cf ../dps8m-git-macos-uni.tar "./${DISTDIR:?}"; ); }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { pigz -C "${CI_COMMIT_SHA:?}" -9 -f -m -n dps8m-git-macos-uni.tar; }; fi
    - rm -rf "src/${DISTDIR:?}"
    - git clean -fdxq -e '*.tar*' -e 'dps8m*'
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { chmod -R u+rwx /home/jhj/x-tools/MacOSX13.1-Xcode14.3 || true; }; fi
    - if [ ${PARALLEL_CI_COUNT:?} -eq ${CI_NODE_INDEX:?} ]; then { rm -rf /home/jhj/x-tools/MacOSX13.1-Xcode14.3 || true; }; fi
  dependencies: []
  artifacts:
    expire_in: 1 day
    paths:
      - dps8m-git-macos-uni.tar.gz
      - dps8m-git-s114-sv9.tar.gz
      - dps8m-git-linux-ple.tar.gz
      - dps8m-git-linux-bpt.tar.gz
      - dps8m-git-linux-bp9.tar.gz
      - dps8m-git-linux-bp8.tar.gz
      - dps8m-git-linux-bp7.tar.gz
      - dps8m-git-linux-bp6.tar.gz
      - dps8m-git-linux-bp5.tar.gz
      - dps8m-git-linux-970.tar.gz
      - dps8m-git-iloi-641.tar.gz
      - dps8m-git-s114-641.tar.gz
      - dps8m-git-nbd93-s32.tar.gz
      - dps8m-git-nbd93-s64.tar.gz
      - dps8m-git-nbd93-970.tar.gz
      - dps8m-git-nbd93-pg4.tar.gz
      - dps8m-git-nbd93-740.tar.gz
      - dps8m-git-nbd93-ax6.tar.gz
      - dps8m-git-nbd93-ax5.tar.gz
      - dps8m-git-nbd93-axp.tar.gz
      - dps8m-git-nbd93-686.tar.gz
      - dps8m-git-nbd93-586.tar.gz
      - dps8m-git-fbd13-a64.tar.gz
      - dps8m-git-nbd93-a64.tar.gz
      - dps8m-git-fbd13-x61.tar.gz
      - dps8m-git-fbd13-x32.tar.gz
      - dps8m-git-nbd93-x61.tar.gz
      - dps8m-git-linux-l64.tar.gz
      - dps8m-git-linux-pw9.tar.gz
      - dps8m-git-linux-p10.tar.gz
      - dps8m-git-linux-pw8.tar.gz
      - dps8m-git-linux-s32.tar.gz
      - dps8m-git-linux-s64.tar.gz
      - dps8m-git-linux-m6l.tar.gz
      - dps8m-git-linux-m64.tar.gz
      - dps8m-git-linux-mpl.tar.gz
      - dps8m-git-linux-msl.tar.gz
      - dps8m-git-linux-mps.tar.gz
      - dps8m-git-linux-mss.tar.gz
      - dps8m-git-linux-mp2.tar.gz
      - dps8m-git-linux-ms2.tar.gz
      - dps8m-git-linux-m2l.tar.gz
      - dps8m-git-linux-m2s.tar.gz
      - dps8m-git-linux-641.tar.gz
      - dps8m-git-linux-642.tar.gz
      - dps8m-git-linux-643.tar.gz
      - dps8m-git-linux-a8b.tar.gz
      - dps8m-git-linux-a8a.tar.gz
      - dps8m-git-linux-a7f.tar.gz
      - dps8m-git-linux-a7s.tar.gz
      - dps8m-git-linux-a6f.tar.gz
      - dps8m-git-linux-a6s.tar.gz
      - dps8m-git-linux-740.tar.gz
      - dps8m-git-linux-g4a.tar.gz
      - dps8m-git-linux-r64.tar.gz
      - dps8m-git-linux-390.tar.gz
      - dps8m-git-ndk29-a64.tar.gz
      - dps8m-git-ndk29-a32.tar.gz
      - dps8m-git-ndk29-x64.tar.gz
      - dps8m-git-ndk29-x32.tar.gz
      - dps8m-git-ndk24-a64.tar.gz
      - dps8m-git-ndk24-a32.tar.gz
      - dps8m-git-ndk24-x64.tar.gz
      - dps8m-git-ndk24-x32.tar.gz
      - dps8m-git-haiku-x64.tar.gz
      - dps8m-git-linux-040.tar.gz
      - dps8m-git-linux-030.tar.gz
      - dps8m-git-linux-686.tar.gz
      - dps8m-git-aixv7-pw6.tar.gz
      - dps8m-git-aixv7-pw7.tar.gz
      - dps8m-git-aixv7-pw8.tar.gz
      - dps8m-git-aixv7-pw9.tar.gz
      - dps8m-git-aixv7-p10.tar.gz
  retry: 2
  timeout: 480 minutes
  interruptible: true

############################################################################

Linux/x86_64, Fedora, Oracle Developer Studio:
  stage: build
  tags:
    - Linux
    - Sun-CC
    - amd64
    - Linux-Shell
    - POSIX
  script:
    - export GLCICD_JOB="SunCCLinuxX64" && export DTIMESTAMP="$(stat -c "%Y" /etc/machine-id)"
    - *scriptSanity
    - *scriptCommon
    - *scriptDPS8Mods
    - *scriptExtraInfo
    - pkill suncc > /dev/null 2>&1 || true
    - export CSTD="c11" && export CFLAGS="-DNO_C_ELLIPSIS -DUSE_FLOCK=1 -DUSE_FCNTL=1" && make CC="ccache /opt/oracle/developerstudio-latest/bin/suncc -xatomic=studio -xautopar -Qy -fd -xO5 -m64 -xlibmil -xvpara -xCC -mt -xlibmopt -xloopinfo -fno-semantic-interposition -xregs=frameptr -xprefetch=auto -xprefetch_level=3 -xjobs=$(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4")" SUNPRO=1 NEED_128=1 -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4") 2>&1 | grep --line-buffered -v -e " not parallelized" -e " enumerator value overflows INT_MAX"
    - pkill suncc > /dev/null 2>&1 || true
    - printf %s\\n "SHOW VERSION" | ./src/dps8/dps8 -t
    - *scriptBuildInfo
    - *scriptVerifyVersion
    - lzip -9vk < /opt/oracle/developerstudio12.6/lib/compilers/atomic/amd64/libstatomic.so.1 > libstatomic.so.1.lz
    - lzip -9vk < /opt/oracle/developerstudio12.6/lib/compilers/rtlibs/usr/lib/amd64/libmtsk.so.1 > libmtsk.so.1.lz
    - lzip -9vk < /opt/oracle/developerstudio12.6/lib/compilers/rtlibs/usr/lib/amd64/libmtsk_crt.so.1 > libmtsk_crt.so.1.lz
    - *scriptCompressArtifacts
  dependencies: []
  artifacts:
    expire_in: 1 day
    paths:
      - src/dps8/dps8.lz
      - src/prt2pdf/prt2pdf.lz
      - src/punutil/punutil.lz
      - src/dps8/useddef.txt.lz
      - libstatomic.so.1.lz
      - libmtsk_crt.so.1.lz
      - libmtsk.so.1.lz
  retry: 2
  timeout: 90 minutes
  interruptible: true

############################################################################

Linux/x86_64, Fedora, Clang, GCC:
  image: fedora:40
  stage: build
  tags:
    - Docker-x64
    - amd64
    - Linux
  script:
    - export GLCICD_JOB="FedoraX64" && export DTIMESTAMP="$(stat -c "%Y" /etc/machine-id)"
    - echo -e "section_start:`date +%s`:bzip20007setup_section[collapsed=true]\r\e[0K\033[0;36mInstalling bzip2 ...\033[0m" || true
    - dnf install -y bzip2 || dnf install -y bzip2
    - echo -e "section_end:`date +%s`:bzip20007setup_section\r\e[0K" || true
    - *scriptDnfSetup
    - *scriptInstallNfpm
    - *scriptSanity
    - *scriptCommon
    - *scriptBuildlibbacktrace
    - *scriptExtraInfo
    - *scriptDPS8Mods
    - make WITH_BACKTRACE=1 CC=clang -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4")
    - printf %s\\n "SHOW VERSION" | ./src/dps8/dps8 -t
    - *scriptBuildInfo
    - make distclean
    - *scriptDPS8Mods
    - make WITH_BACKTRACE=1 CC=gcc -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4")
    - printf %s\\n "SHOW VERSION" | ./src/dps8/dps8 -t
    - *scriptBuildInfo
    - *scriptVerifyVersion
    - *scriptCompressArtifacts
  dependencies: []
  artifacts:
    expire_in: 1 day
    paths:
      - src/dps8/dps8.lz
      - src/prt2pdf/prt2pdf.lz
      - src/punutil/punutil.lz
      - src/dps8/useddef.txt.lz
  retry: 2
  timeout: 90 minutes
  interruptible: true

############################################################################

GNU GLOBAL Hypertext:
  image: fedora:40
  stage: docs
  tags:
    - Docker-x64
    - amd64
    - Linux
  script:
    - export GLCICD_JOB="GlobalX64" && export DTIMESTAMP="$(stat -c "%Y" /etc/machine-id)"
    - dnf install -y global bzip2 || dnf install -y global bzip2
    - *scriptDnfSetup
    - *scriptInstallNfpm
    - *scriptSanity
    - *scriptCommon
    - *scriptExtraInfo
    - make distclean
    - cp -f ./.gtags.conf /etc/gtags.conf
    - *scriptDPS8Mods
    - env CC=gcc make -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4") && sh -c 'OUT=$(find ./src -name "*.[ch]" -exec ./src/unifdef/unifdef -U0 -b -k -m {} \; 2>&1); test -z "${OUT:-}" && exit 0; echo "${OUT:?}"; exit 1'
    - htags --map-file --auto-completion --colorize-warned-line -h -I --tabs 4 -v -n -o -s --tabs 4 --table-flist --statistics
    - sed -e "s/http:\/\/www.gnu.org\/software\/global\//https:\/\/gitlab.com\/dps8m\/dps8m/" -e "s/ title='Go to the GLOBAL project page.'//" -e "s/ alt='\[Powered by GLOBAL-.*\]'//" -e "s/^<a href='http/<br \/><a href='http/" "HTML/index.html" > "HTML/index.html.tmp" && mv -f "HTML/index.html.tmp" "HTML/index.html" && cp -f "HTML/index.html" "HTML/mains.html"
    - cp -f ./.gtags-style.css HTML/style.css
    - cp -f ./docs/hpages/static/pglobe.png HTML/icons/pglobe.png
  dependencies: []
  artifacts:
    expire_in: 30 days
    paths:
      - HTML
  retry: 2
  timeout: 90 minutes
  interruptible: true

############################################################################

Hugo:
  image: fedora:40
  stage: docs
  tags:
    - Docker-x64
    - amd64
    - Linux
  script:
    - export GLCICD_JOB="Hugogen64" && export DTIMESTAMP="$(stat -c "%Y" /etc/machine-id)"
    - dnf install -y hugo bzip2 || dnf install -y hugo bzip2
    - *scriptDnfSetup
    - *scriptInstallNfpm
    - *scriptSanity
    - *scriptCommon
    - *scriptDPS8Mods
    - *scriptExtraInfo
    - cd docs/hpages && ./hugobuild.sh
  dependencies: []
  artifacts:
    expire_in: 30 days
    paths:
      - docs/hpages/public
  retry: 2
  timeout: 90 minutes
  interruptible: true

############################################################################

AIX/powerpc64, IBM AIX, GCC:
  stage: build
  tags:
    - AIX
    - IBM
    - ppc64
  script:
    - *scriptSanity
    - *scriptCommon
    - *scriptDPS8Mods
    - *scriptExtraInfo
    - export LOCAL_CLONEOPTS=""
    - env OBJECT_MODE=64 CI_SKIP_MKREBUILD=1 PATH="/opt/freeware/bin:/usr/local/bin:$PATH" CC=gcc-11 NO_LTO=1 CFLAGS="-m64 -maix64 -Wl,-b64 -mcpu=power8" LDFLAGS="-static-libgcc -Wl,-b64" gmake libuvrel -j $(lparstat -i | grep '^Desired Virtual CPUs' | cut -d ':' -f 2 | tr -cd '0-9\n' || printf '%s\n' "6")
    - env OBJECT_MODE=64 CI_SKIP_MKREBUILD=1 PATH="/opt/freeware/bin:/usr/local/bin:$PATH" CC=gcc-11 NO_LTO=1 CFLAGS="-m64 -maix64 -Wl,-b64 -mcpu=power8" LDFLAGS="-static-libgcc -Wl,-b64" gmake LIBUV="$(pwd)/libuv-local/local/lib/libuv.a -lperfstat" -j $(lparstat -i | grep '^Desired Virtual CPUs' | cut -d ':' -f 2 | tr -cd '0-9\n' || printf '%s\n' "6")
    - printf %s\\n "SHOW VERSION" | ./src/dps8/dps8 -t
    - *scriptBuildInfo
    - *scriptVerifyVersion
    - export DISTDIR="dps8m-${CI_COMMIT_SHORT_SHA:?}"
    - mkdir -p "src/${DISTDIR:?}"
    - cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"
    - cp -f src/dps8/dps8 src/prt2pdf/prt2pdf src/punutil/punutil "src/${DISTDIR:?}"
    - ( cd src && tar cf ../dps8m-git-aixv7-gcc.tar "./${DISTDIR:?}" )
    - pigz -9 -f -m -n dps8m-git-aixv7-gcc.tar
    - *scriptCompressArtifacts
  dependencies: []
  artifacts:
    expire_in: 1 day
    paths:
      - dps8m-git-aixv7-gcc.tar.gz
      - src/dps8/dps8.lz
      - src/prt2pdf/prt2pdf.lz
      - src/punutil/punutil.lz
      - src/dps8/useddef.txt.lz
  retry: 2
  timeout: 120 minutes
  interruptible: true

############################################################################

AIX/powerpc64, IBM AIX, IBM XL C/C++ V16.1:
  stage: build
  tags:
    - AIX
    - IBM
    - ppc64
  script:
    - *scriptSanity
    - *scriptCommon
    - *scriptDPS8Mods
    - *scriptExtraInfo
    - export LOCAL_CLONEOPTS=""
    - export XLCXLC="xlc_r" && export XLCVER="16.1.0" && gmake -j $(lparstat -i | grep '^Desired Virtual CPUs' | cut -d ':' -f 2 | tr -cd '0-9\n' || printf '%s\n' "6") NO_LTO=1 CC="/opt/IBM/xlC/${XLCVER:?}/bin/${XLCXLC:?} -O3 -qhot -qarch=pwr8 -qchars=signed -q64 -qalign=natural -qtls" CFLAGS="-DUSE_POPT=1 -DUSE_FLOCK=1 -DUSE_FCNTL=1 -DAIX_ATOMICS=1 -DNEED_128=1 -DLOCKLESS=1 -I/opt/freeware/include -I../simh -I../decNumber -D_GNU_SOURCE -U__STRICT_POSIX__" USE_POPT=1 NEED_128=1 PULIBS="-lpopt" LDFLAGS="-L/opt/freeware/lib -b64" LIBS="-luv -lbsd -lm"
    - printf %s\\n "SHOW VERSION" | ./src/dps8/dps8 -t
    - *scriptBuildInfo
    - *scriptVerifyVersion
    - export DISTDIR="dps8m-${CI_COMMIT_SHORT_SHA:?}"
    - mkdir -p "src/${DISTDIR:?}"
    - cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"
    - cp -f src/dps8/dps8 src/prt2pdf/prt2pdf src/punutil/punutil "src/${DISTDIR:?}"
    - ( cd src && tar cf ../dps8m-git-aixv7-xlc.tar "./${DISTDIR:?}" )
    - pigz -9 -f -m -n dps8m-git-aixv7-xlc.tar
    - *scriptCompressArtifacts
  dependencies: []
  artifacts:
    expire_in: 1 day
    paths:
      - dps8m-git-aixv7-xlc.tar.gz
      - src/dps8/dps8.lz
      - src/prt2pdf/prt2pdf.lz
      - src/punutil/punutil.lz
      - src/dps8/useddef.txt.lz
  retry: 2
  timeout: 120 minutes
  interruptible: true

############################################################################

.Linux/powerpc64el, Ubuntu, IBM XL C/C++:
  stage: build
  tags:
    - Shell-Linux
    - Linux
    - XLC-POWER
    - IBM
    - ppc64le
  script:
    - *scriptSanity
    - *scriptCommon
    - *scriptDPS8Mods
    - *scriptExtraInfo
    - export IBMXLCVER="latest" && env LD_PRELOAD=/usr/lib/powerpc64le-linux-gnu/libjemalloc.so /opt/ibm/xlC/"${IBMXLCVER:?}"/bin/c99_r -qversion 2>&1 | grep "Version" && env LD_PRELOAD=/usr/lib/powerpc64le-linux-gnu/libjemalloc.so make NO_LTO=1 CC=/opt/ibm/xlC/"${IBMXLCVER:?}"/bin/c99_r -j $(grep -c "^cpu" /proc/cpuinfo 2> /dev/null || printf %s\\n "4")
    - printf %s\\n "SHOW VERSION" | ./src/dps8/dps8 -t
    - *scriptBuildInfo
    - *scriptVerifyVersion
    - export DISTDIR="dps8m-${CI_COMMIT_SHORT_SHA:?}"
    - mkdir -p "src/${DISTDIR:?}"
    - cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"
    - cp -f src/dps8/dps8 src/prt2pdf/prt2pdf src/punutil/punutil "src/${DISTDIR:?}"
    - ( cd src && tar cf ../dps8m-git-linux-xlc.tar "./${DISTDIR:?}" )
    - pigz -C "${CI_COMMIT_SHA:?}" -9 -f -n dps8m-git-linux-xlc.tar
    - *scriptCompressArtifacts
  dependencies: []
  artifacts:
    expire_in: 1 day
    paths:
      - dps8m-git-linux-xlc.tar.gz
      - src/dps8/dps8.lz
      - src/prt2pdf/prt2pdf.lz
      - src/punutil/punutil.lz
      - src/dps8/useddef.txt.lz
  retry: 2
  timeout: 120 minutes
  interruptible: true

############################################################################

Linux/powerpc64el, Ubuntu, IBM Open XL C/C++:
  stage: build
  tags:
    - Shell-Linux
    - Linux
    - XLC-POWER
    - OXLC-POWER
    - IBM
    - ppc64le
  script:
    - *scriptSanity
    - *scriptCommon
    - *scriptExtraInfo
    - sleep 10 || true
    - *scriptDPS8Mods
    - ( export IBMOXLCVER="latest" && /opt/ibm/openxlC/"${IBMOXLCVER:?}"/bin/ibm-clang_r --version && CFLAGS="-mcpu=pwr8" make CC=/opt/ibm/openxlC/"${IBMOXLCVER:?}"/bin/ibm-clang_r -j $(grep -c "^cpu" /proc/cpuinfo 2> /dev/null || printf %s\\n "4") )
    - printf %s\\n "SHOW VERSION" | ./src/dps8/dps8 -t
    - *scriptBuildInfo
    - *scriptVerifyVersion
    - export DISTDIR="dps8m-${CI_COMMIT_SHORT_SHA:?}"
    - mkdir -p "src/${DISTDIR:?}"
    - cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/${DISTDIR:?}"
    - cp -f src/dps8/dps8 src/prt2pdf/prt2pdf src/punutil/punutil "src/${DISTDIR:?}"
    - ( cd src && tar cf ../dps8m-git-linux-ox8.tar "./${DISTDIR:?}" )
    - pigz -C "${CI_COMMIT_SHA:?}" -9 -f -n dps8m-git-linux-ox8.tar
    - *scriptCompressArtifacts
  dependencies: []
  artifacts:
    expire_in: 1 day
    paths:
      - dps8m-git-linux-ox8.tar.gz
      - src/dps8/dps8.lz
      - src/prt2pdf/prt2pdf.lz
      - src/punutil/punutil.lz
      - src/dps8/useddef.txt.lz
  retry: 2
  timeout: 100 minutes
  interruptible: true

############################################################################

Windows/ARM64, LLVM-MinGW:
  image: mstorsjo/llvm-mingw:dev
  stage: build
  tags:
    - Docker-x64
    - amd64
    - Linux
  script:
    - export GLCICD_JOB="LLVMMINGWARM64" && export DTIMESTAMP="$(stat -c "%Y" /opt/llvm-mingw)"
    - *scriptBuildlibuvLLVMMGW64-aarch64
    - *scriptSanity
    - *scriptCommon
    - *scriptDPS8Mods
    - *scriptExtraInfo
    - make CC="aarch64-w64-mingw32-clang -I/usr/local/include -pthread" CROSS="MINGW64" LIBUV="-L/usr/local/lib /usr/local/lib/libuv.a -lpthread -Wno-unused-command-line-argument -lws2_32 -lpsapi -liphlpapi -lshell32 -luserenv -luser32 -ldbghelp -lole32 -luuid" -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4")
    - test -f src/dps8/dps8.exe
    - *scriptBuildInfo
    - mkdir -p "src/dps8m-${CI_COMMIT_SHORT_SHA:?}"
    - cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/dps8m-${CI_COMMIT_SHORT_SHA:?}"
    - cp -f src/dps8/dps8.exe src/prt2pdf/prt2pdf.exe src/punutil/punutil.exe "src/dps8m-${CI_COMMIT_SHORT_SHA:?}"
    - cp -f /opt/llvm-mingw/aarch64-w64-mingw32/bin/libwinpthread-1.dll "src/dps8m-${CI_COMMIT_SHORT_SHA:?}"
    - ( cd src && zip -9 ../dps8m-git-mingw-a64.zip ./dps8m-${CI_COMMIT_SHORT_SHA:?}/* )
    - rm -rf "src/dps8m-${CI_COMMIT_SHORT_SHA:?}" || true
    - *scriptCompressArtifacts
  dependencies: []
  artifacts:
    expire_in: 1 day
    paths:
      - dps8m-git-mingw-a64.zip
      - dps8m.zip
  retry: 2
  timeout: 90 minutes
  interruptible: true

############################################################################

Windows/ARMv7, LLVM-MinGW:
  image: mstorsjo/llvm-mingw:dev
  stage: build
  tags:
    - Docker-x64
    - amd64
    - Linux
  script:
    - export GLCICD_JOB="LLVMMINGWARM" && export DTIMESTAMP="$(stat -c "%Y" /opt/llvm-mingw)"
    - *scriptBuildlibuvLLVMMGW64-armv7
    - *scriptSanity
    - *scriptCommon
    - *scriptDPS8Mods
    - *scriptExtraInfo
    - make CC="armv7-w64-mingw32-clang -I/usr/local/include -L/usr/local/lib -pthread -D__int64_t=int64_t -D__MINGW64__ -Wno-unused-command-line-argument" CROSS="MINGW64" LIBUV="/usr/local/lib/libuv.a -lpthread -lws2_32 -lpsapi -liphlpapi -lshell32 -luserenv -luser32 -ldbghelp -lole32 -luuid" NEED_128=1 -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4")
    - test -f src/dps8/dps8.exe
    - *scriptBuildInfo
    - mkdir -p "src/dps8m-${CI_COMMIT_SHORT_SHA:?}"
    - cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/dps8m-${CI_COMMIT_SHORT_SHA:?}"
    - cp -f src/dps8/dps8.exe src/prt2pdf/prt2pdf.exe src/punutil/punutil.exe "src/dps8m-${CI_COMMIT_SHORT_SHA:?}"
    - cp -f /opt/llvm-mingw/armv7-w64-mingw32/bin/libwinpthread-1.dll "src/dps8m-${CI_COMMIT_SHORT_SHA:?}"
    - ( cd src && zip -9 ../dps8m-git-mingw-av7.zip ./dps8m-${CI_COMMIT_SHORT_SHA:?}/* )
    - *scriptCompressArtifacts
  dependencies: []
  artifacts:
    expire_in: 1 day
    paths:
      - dps8m-git-mingw-av7.zip
      - dps8m.zip
  retry: 2
  timeout: 90 minutes
  interruptible: true

############################################################################

Windows/i686, LLVM-MinGW:
  image: mstorsjo/llvm-mingw:dev
  stage: build
  tags:
    - Docker-x64
    - amd64
    - Linux
  script:
    - export GLCICD_JOB="LLVMMINGWI686" && export DTIMESTAMP="$(stat -c "%Y" /opt/llvm-mingw)"
    - *scriptBuildlibuvLLVMMGW64-i686
    - *scriptSanity
    - *scriptCommon
    - *scriptDPS8Mods
    - *scriptExtraInfo
    - make CC="i686-w64-mingw32-clang -I/usr/local/include -L/usr/local/lib -pthread -D__int64_t=int64_t -D__MINGW64__ -Wno-unused-command-line-argument" CROSS="MINGW64" LIBUV="/usr/local/lib/libuv.a -lpthread -lws2_32 -lpsapi -liphlpapi -lshell32 -luserenv -luser32 -ldbghelp -lole32 -luuid" NEED_128=1 -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4")
    - test -f src/dps8/dps8.exe
    - *scriptBuildInfo
    - mkdir -p "src/dps8m-${CI_COMMIT_SHORT_SHA:?}"
    - cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/dps8m-${CI_COMMIT_SHORT_SHA:?}"
    - cp -f src/dps8/dps8.exe src/prt2pdf/prt2pdf.exe src/punutil/punutil.exe "src/dps8m-${CI_COMMIT_SHORT_SHA:?}"
    - cp -f /opt/llvm-mingw/i686-w64-mingw32/bin/libwinpthread-1.dll "src/dps8m-${CI_COMMIT_SHORT_SHA:?}"
    - ( cd src && zip -9 ../dps8m-git-mingw-x32.zip ./dps8m-${CI_COMMIT_SHORT_SHA:?}/* )
    - *scriptCompressArtifacts
  dependencies: []
  artifacts:
    expire_in: 1 day
    paths:
      - dps8m-git-mingw-x32.zip
      - dps8m.zip
  retry: 2
  timeout: 90 minutes
  interruptible: true

############################################################################

Windows/x86_64, LLVM-MinGW:
  image: mstorsjo/llvm-mingw:dev
  stage: build
  tags:
    - Docker-x64
    - amd64
    - Linux
  script:
    - export GLCICD_JOB="LLVMMINGWX8664" && export DTIMESTAMP="$(stat -c "%Y" /opt/llvm-mingw)"
    - *scriptBuildlibuvLLVMMGW64-x86_64
    - *scriptSanity
    - *scriptCommon
    - *scriptDPS8Mods
    - *scriptExtraInfo
    - make CC="x86_64-w64-mingw32-clang -I/usr/local/include -L/usr/local/lib -Wno-unused-command-line-argument -pthread" CROSS="MINGW64" LIBUV="/usr/local/lib/libuv.a -lpthread -lws2_32 -lpsapi -liphlpapi -lshell32 -luserenv -luser32 -ldbghelp -lole32 -luuid" -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4")
    - *scriptBuildInfo
    - test -f src/dps8/dps8.exe
    - *scriptCompressArtifacts
  dependencies: []
  artifacts:
    expire_in: 1 day
    paths:
      - dps8m.zip
  retry: 2
  timeout: 90 minutes
  interruptible: true

############################################################################

Windows/x86_64, MinGW64-GCC:
  image:
    name: alpine:latest
    entrypoint: [ '/bin/sh', '-c', 'sed -i "s/https/http/g" /etc/apk/repositories; apk update; apk add bash; apk add bash && ln -snf /bin/bash /bin/sh && exec /bin/bash -c $0' ]
  stage: build
  tags:
    - Docker-x64
    - amd64
    - Linux
  script:
    - *scriptAlpineSetup
    - apk add zip mingw-w64-binutils mingw-w64-headers mingw-w64-gcc mingw-w64-winpthreads mingw-w64-crt || apk add zip mingw-w64-binutils mingw-w64-headers mingw-w64-gcc mingw-w64-winpthreads mingw-w64-crt
    - *scriptBuildlibuvMGW64
    - *scriptSanity
    - *scriptCommon
    - *scriptDPS8Mods
    - *scriptExtraInfo
    - make CC="x86_64-w64-mingw32-gcc -I/usr/local/include -L/usr/local/lib -pthread" CROSS="MINGW64" LIBUV="/usr/local/lib/libuv.a -lpthread -lws2_32 -lpsapi -liphlpapi -lshell32 -luserenv -luser32 -ldbghelp -lole32 -luuid" -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4")
    - *scriptBuildInfo
    - test -f src/dps8/dps8.exe
    - mkdir -p "src/dps8m-${CI_COMMIT_SHORT_SHA:?}"
    - cp -f docs/txt/README.txt docs/txt/LICENSE.txt "src/dps8m-${CI_COMMIT_SHORT_SHA:?}"
    - cp -f src/dps8/dps8.exe src/prt2pdf/prt2pdf.exe src/punutil/punutil.exe "src/dps8m-${CI_COMMIT_SHORT_SHA:?}"
    - cp -f /usr/x86_64-w64-mingw32/bin/libwinpthread-1.dll "src/dps8m-${CI_COMMIT_SHORT_SHA:?}"
    - ( cd src && zip -9 ../dps8m-git-mingw-x86.zip ./dps8m-${CI_COMMIT_SHORT_SHA:?}/* )
    - *scriptCompressArtifacts
  dependencies: []
  artifacts:
    expire_in: 1 day
    paths:
      - dps8m-git-mingw-x86.zip
      - dps8m.zip
  retry: 2
  timeout: 90 minutes
  interruptible: true

############################################################################

Source Kits:
  image: debian:sid
  stage: build
  tags:
    - Docker-x64-slow
    - amd64
    - Linux
  script:
    - ( (apt-get -qq -y update > /dev/null || apt-get -qq -y update > /dev/null); apt-get -qq -y install zpaq zip advancecomp pigz tar make git lzip 7zip > /dev/null || apt-get -qq -y install zpaq zip advancecomp pigz tar make git lzip 7zip > /dev/null )
    - *scriptSanity
    - *scriptCommon
    - make distclean && make dist COMPRESS="pigz -C "${CI_COMMIT_SHA:?}" -9 -f -m -n" COMPRESSXT="gz"
    - cp -f sources.tar.gz /tmp
    - make distclean && make zipdist
    - cp -f /tmp/sources.tar.gz .
    - mv sources.zip dps8m-git-src.zip
    - mv sources.tar.gz dps8m-git-src.tar.gz
    - make distclean && make dist COMPRESS="lzip -9 -s 512Mi" COMPRESSXT="lz"
    - mv sources.tar.lz dps8m-git-src.tar.lz
    - make distclean && env COMPRESSXT="7z" COMPRESS='( mkdir -p 7ztmp && cd 7ztmp && tar xf ../../../$(KITNAME).$(TARXT) && 7za a -y -m0=lzma -mx=9 -mfb=273 -ssc -ssw -spf -snl -md=512m -ms=on -stl -sdel ../../../$(KITNAME).$(COMPRESSXT) . ) && $(RMDIR) 7ztmp && $(RMF) $(KITNAME).$(TARXT)' make dist
    - mv sources.7z dps8m-git-src.7z
    - make distclean && env COMPRESSXT="zpaq" COMPRESS='( mkdir -p zpaqtmp && cd zpaqtmp && tar xf ../../../$(KITNAME).$(TARXT) && zpaq -f add ../../../$(KITNAME).$(COMPRESSXT) . -m5 ) && $(RMF) -r ./zpaqtmp && $(RMF) $(KITNAME).$(TARXT)' make dist
    - mv sources.zpaq dps8m-git-src.zpaq
  dependencies: []
  artifacts:
    expire_in: 1 day
    paths:
      - dps8m-git-src.tar.lz
      - dps8m-git-src.tar.gz
      - dps8m-git-src.7z
      - dps8m-git-src.zip
      - dps8m-git-src.zpaq
  retry: 2
  timeout: 90 minutes
  interruptible: true

############################################################################

Linux/x86_64, Ubuntu, Clang, GCC:
  image: ubuntu:rolling
  stage: build
  tags:
    - Docker-x64
    - amd64
    - Linux
  script:
    - export GLCICD_JOB="UbuntuCurrentx64" && export DTIMESTAMP="$(stat -c "%Y" /etc/os-release)"
    - ( (apt-get -qq -y update > /dev/null || apt-get -qq -y update > /dev/null); apt-get -qq -y install bzip2 wget > /dev/null || apt-get -qq -y install wget bzip2 > /dev/null )
    - ( (apt-get -qq -y install ca-certificates ubuntu-advantage-tools > /dev/null || apt-get -qq -y install ca-certificates ubuntu-advantage-tools > /dev/null); true ) || true
    - ( yes | pro attach ${UBUNTU_TOKEN:-0} 2> /dev/null ) || true
    - ( yes | pro enable esm-apps --assume-yes 2> /dev/null ) || true
    - ( yes | pro enable esm-apps --assume-yes --beta 2> /dev/null ) || true
    - ( yes | pro enable esm-infra --assume-yes 2> /dev/null ) || true
    - ( yes | pro enable esm-infra --assume-yes --beta 2> /dev/null ) || true
    - ( apt-get -qq -y update > /dev/null || apt-get -qq -y update > /dev/null ) || true
    - ( (apt-get -qq -y install ccache || apt-get -qq -y install ccache); true ) || true
    - *scriptAptSetup
    - *scriptInstallNfpm
    - *scriptAptInstallLibuv1
    - ( yes | pro detach --assume-yes 2> /dev/null ) || true
    - *scriptSanity
    - *scriptCommon
    - *scriptBuildlibbacktrace
    - *scriptDPS8Mods
    - *scriptExtraInfo
    - env NO_LTO=1 make WITH_BACKTRACE=1 CC="$(command -v ccache) $(command -v clang)" -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4")
    - printf %s\\n "SHOW VERSION" | ./src/dps8/dps8 -t
    - *scriptBuildInfo
    - make distclean
    - *scriptDPS8Mods
    - env NO_LTO=1 make WITH_BACKTRACE=1 CC="$(command -v ccache) $(command -v gcc)" -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4")
    - printf %s\\n "SHOW VERSION" | ./src/dps8/dps8 -t
    - *scriptBuildInfo
    - *scriptVerifyVersion
    - *scriptCompressArtifacts
  dependencies: []
  artifacts:
    expire_in: 1 day
    paths:
      - src/dps8/dps8.lz
      - src/prt2pdf/prt2pdf.lz
      - src/punutil/punutil.lz
      - src/dps8/useddef.txt.lz
  retry: 2
  timeout: 90 minutes
  interruptible: true

############################################################################

Linux/x86_64, Ubuntu LTS, Clang, GCC:
  image: ubuntu:latest
  stage: build
  tags:
    - Docker-x64
    - amd64
    - Linux
  script:
    - export GLCICD_JOB="UbuntuLTSx64" && export DTIMESTAMP="$(stat -c "%Y" /etc/os-release)"
    - ( (apt-get -qq -y update > /dev/null || apt-get -qq -y update > /dev/null); apt-get -qq -y install bzip2 wget > /dev/null || apt-get -qq -y install wget bzip2 > /dev/null )
    - ( (apt-get -qq -y install ca-certificates ubuntu-advantage-tools > /dev/null || apt-get -qq -y install ca-certificates ubuntu-advantage-tools > /dev/null); true ) || true
    - ( yes | pro attach ${UBUNTU_TOKEN:-0} 2> /dev/null ) || true
    - ( yes | pro enable esm-apps --assume-yes 2> /dev/null ) || true
    - ( yes | pro enable esm-apps --assume-yes --beta 2> /dev/null ) || true
    - ( yes | pro enable esm-infra --assume-yes 2> /dev/null ) || true
    - ( yes | pro enable esm-infra --assume-yes --beta 2> /dev/null ) || true
    - ( apt-get -qq -y update > /dev/null || apt-get -qq -y update > /dev/null ) || true
    - ( (apt-get -qq -y install ccache || apt-get -qq -y install ccache); true ) || true
    - *scriptAptSetup
    - *scriptInstallNfpm
    - *scriptAptInstallLibuv1
    - ( yes | pro detach --assume-yes 2> /dev/null ) || true
    - *scriptSanity
    - *scriptCommon
    - *scriptBuildlibbacktrace
    - *scriptDPS8Mods
    - *scriptExtraInfo
    - env NO_LTO=1 make WITH_BACKTRACE=1 CC="$(command -v ccache) $(command -v clang)" -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4")
    - printf %s\\n "SHOW VERSION" | ./src/dps8/dps8 -t
    - *scriptBuildInfo
    - make distclean
    - *scriptDPS8Mods
    - env NO_LTO=1 make WITH_BACKTRACE=1 CC="$(command -v ccache) $(command -v gcc)" -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4")
    - printf %s\\n "SHOW VERSION" | ./src/dps8/dps8 -t
    - *scriptBuildInfo
    - *scriptVerifyVersion
    - *scriptCompressArtifacts
  dependencies: []
  artifacts:
    expire_in: 1 day
    paths:
      - src/dps8/dps8.lz
      - src/prt2pdf/prt2pdf.lz
      - src/punutil/punutil.lz
      - src/dps8/useddef.txt.lz
  retry: 2
  timeout: 90 minutes
  interruptible: true

############################################################################

Solaris/x86_64, Oracle Solaris 11.4, Oracle Developer Studio:
  stage: build
  tags:
    - Solaris
    - SunOS
    - amd64
  script:
    - *scriptSanity
    - *scriptCommon
    - *scriptDPS8Mods
    - *scriptExtraInfo
    - export CSTD="c11" && export CFLAGS="-DNO_C_ELLIPSIS -I/usr/local/include" && export LDFLAGS="-I/usr/local/lib" && gmake CC="/opt/developerstudio-latest/bin/suncc -xatomic=studio -xautopar -Qy -xO5 -m64 -xlibmil -xvpara -xCC -mt -xlibmopt -xloopinfo -fno-semantic-interposition -xregs=frameptr -xprefetch=auto -xprefetch_level=3 -xjobs=$(psrinfo -p 2> /dev/null || printf %s\\n "4")" SUNPRO=1 NEED_128=1 -j $(psrinfo -p 2> /dev/null || printf %s\\n "4") 2>&1 | grep -v " not parallelized" | grep -v " enumerator value overflows INT_MAX"
    - *scriptBuildInfo
    - *scriptVerifyVersion
    - lzip -9vk < /opt/developerstudio-latest/lib/compilers/atomic/amd64/libstatomic.so.1 > libstatomic.so.1.lz
    - *scriptCompressArtifacts
  dependencies: []
  artifacts:
    expire_in: 1 day
    paths:
      - src/dps8/dps8.lz
      - src/prt2pdf/prt2pdf.lz
      - src/punutil/punutil.lz
      - src/dps8/useddef.txt.lz
      - libstatomic.so.1.lz
  retry: 2
  timeout: 90 minutes
  interruptible: true

#############################################################################

NSIS Installer:
  stage: nsis_installer
  image: fedora:40
  needs:
    - job: DPS8M Omnibus Documentation
    - job: Source Kits
  dependencies:
    - "DPS8M Omnibus Documentation"
    - "Source Kits"
  tags:
    - Docker-x64
    - amd64
    - Linux
  script:
    - export GLCICD_JOB="NSISInstaller" && export DTIMESTAMP="$(stat -c "%Y" /etc/machine-id)"
    - *scriptDnfSetup
    - dnf -y install ucrt64-dlfcn ucrt64-dlfcn-static ucrt64-filesystem ucrt64-crt ucrt64-winpthreads ucrt64-headers ucrt64-winpthreads-static ucrt64-binutils ucrt64-libgcc ucrt64-cpp ucrt64-gcc ucrt64-gcc-c++ ucrt64-libstdc++ diffutils libzstd libzstd-devel zstd bzip2 mingw32-binutils mingw32-cpp mingw32-crt mingw32-dlfcn mingw32-dlfcn-static mingw32-filesystem mingw32-gcc mingw32-gcc-c++ mingw32-headers mingw32-nsis mingw32-nsiswrapper mingw32-srvany mingw32-winpthreads mingw32-winpthreads-static mingw32-xz-libs mingw32-xz-libs-static mingw64-binutils mingw64-cpp mingw64-crt mingw64-dlfcn mingw64-dlfcn-static mingw64-filesystem mingw64-gcc mingw64-gcc-c++ mingw64-headers mingw64-winpthreads mingw64-winpthreads-static mingw64-xz-libs mingw64-xz-libs-static mingw-binutils-generic mingw-filesystem-base mingw-w64-tools --best || dnf -y install mingw32-binutils mingw32-cpp mingw32-crt mingw32-dlfcn mingw32-dlfcn-static mingw32-filesystem mingw32-gcc mingw32-gcc-c++ mingw32-headers mingw32-nsis mingw32-nsiswrapper mingw32-srvany mingw32-winpthreads mingw32-winpthreads-static mingw32-xz-libs mingw32-xz-libs-static mingw64-binutils mingw64-cpp mingw64-crt mingw64-dlfcn mingw64-dlfcn-static mingw64-filesystem mingw64-gcc mingw64-gcc-c++ mingw64-headers mingw64-winpthreads mingw64-winpthreads-static mingw64-xz-libs mingw64-xz-libs-static mingw-binutils-generic mingw-filesystem-base mingw-w64-tools bzip2 libzstd libzstd-devel zstd diffutils --nobest ucrt64-filesystem ucrt64-crt ucrt64-winpthreads ucrt64-headers ucrt64-winpthreads-static ucrt64-binutils ucrt64-libgcc ucrt64-cpp ucrt64-gcc ucrt64-gcc-c++ ucrt64-libstdc++ ucrt64-dlfcn ucrt64-dlfcn-static
    - dnf -y install bash libtool autoconf automake autoconf-archive m4 gawk --best || dnf -y install libtool autoconf automake autoconf-archive m4 gawk bash --nobest
    - *scriptSanity
    - *scriptCommon
    - *scriptDPS8Mods
    - *scriptExtraInfo
    - cd "${CI_PROJECT_DIR:?}/.nsis" && env USE_CI=1 ./build-nsis.sh
    - cd "${CI_PROJECT_DIR:?}" && make distclean
    - test -f "${CI_PROJECT_DIR:?}/.nsis/dps8m-git-win-setup.exe"
  artifacts:
    when: always
    expire_in: 30 days
    paths:
      - .nsis/dps8m-git-win-setup.exe
  retry: 2
  timeout: 360 minutes
  interruptible: true

#############################################################################

Option Verification Test:
  stage: cmb_test
  image: fedora:40
  needs:
    - job: Linux/x86_64, Ubuntu LTS, Clang, GCC
    - job: Linux/x86_64, Fedora, Clang, GCC
  tags:
    - Docker-x64
    - amd64
    - Linux
  parallel: 2
  script:
    - export GLCICD_JOB="OptTestFedoraX64_${CI_NODE_INDEX:?}" && export DTIMESTAMP="$(stat -c "%Y" /etc/machine-id)"
    - *scriptDnfSetup
    - *scriptSanity
    - *scriptCommon
    - *scriptDPS8Mods
    - *scriptExtraInfo
    - export NO_LTO=1
    - export CMB_OPTIONS="NO_LOCKLESS=1 TESTING=1 NEED_128=1 ROUND_ROBIN=1 WITH_ABSI_DEV=1 WITH_MGP_DEV=1"
    - make -C "src/mcmb" && export CMB_TOOL="$(command -p env PATH="$(command -p env getconf PATH)" mktemp)" && mv -f "src/mcmb/mcmb" "${CMB_TOOL:?}" && chmod a+x "${CMB_TOOL:?}"
    - touch part_x.sh && rm -f part_*.sh > /dev/null 2>&1 || true > /dev/null 2>&1
    - ( export NSPLIT=${CI_NODE_TOTAL:?}; for i in $(seq 1 ${CI_NODE_TOTAL:?}); do ( env CPUS="$(( $((grep -c "^model name" /proc/cpuinfo 2> /dev/null) | head -n 1) + 1 ))" bash -c '${CMB_TOOL:?} -N -e ${CMB_OPTIONS:?} -p "make -j ${CPUS:?} " -s " && printf %s\\\\n \"SHOW VERSION\" | ./src/dps8/dps8 -t && make distclean && \\"' ) | awk '{ print "env ITERATION="$0 }' 2> /dev/null | split -e -n "r/${i:?}/${NSPLIT:?}" | awk "BEGIN { print \"#\!/usr/bin/env bash\"; print \"# Part ${i:?} of ${NSPLIT:?}\"; printf \"\"; print \"set -eux -o pipefail\" } { print \$0 } END { print \"true\"; print \"\" }" | tr -d '\r' > "part_${i:?}_of_${NSPLIT:?}.sh" 2> /dev/null; done )
    - export CMB_CI_JOB="part_${CI_NODE_INDEX:?}_of_${CI_NODE_TOTAL:?}.sh"
    - dos2unix ./"${CMB_CI_JOB:?}" || true
    - cat ./"${CMB_CI_JOB:?}" && chmod a+x ./"${CMB_CI_JOB:?}"
    - ./"${CMB_CI_JOB:?}" 2>&1 | tee -i options-test.txt | grep --line-buffered 'env ITERATION'
    - make clean > /dev/null 2>&1 && make PERF_STRIP=1 -j 3
    - ( cd src/perf_test && ../../src/dps8/dps8 2>&1 || true )
  dependencies: []
  artifacts:
    when: always
    expire_in: 30 days
    paths:
      - options-test.txt
  retry: 2
  timeout: 360 minutes
  interruptible: true

#############################################################################

DPS8M Omnibus Documentation:
  when: always
  stage: docs
  image: fedora:40
  tags:
    - Docker-x64-fast
    - Linux
    - amd64
  needs:
    - job: Multics CI-Kit Test
  script:
    - export GLCICD_JOB="OmnibusDocsGenX64" && export DTIMESTAMP="$(stat -c "%Y" /etc/machine-id)"
    - echo -e "section_start:`date +%s`:bzip20001setup_section[collapsed=true]\r\e[0K\033[0;36mInstalling bzip2 ...\033[0m" || true
    - dnf install -y bzip2 || dnf install -y bzip2
    - echo -e "section_end:`date +%s`:bzip20001setup_section\r\e[0K" || true
    - *scriptDnfSetup
    - dnf install -y file texlive-tikzfill texlive-hardwrap texlive-listings texlive-listingsutf8 texlive-microtype texlive-parskip texlive-footnotehyper texlive-footnoterange texlive-bookmark texlive-globalvals texlive-cprotect texlive-tcolorbox texlive-minted php-cli php jq util-linux graphviz texlive-graphviz graphviz-devil graphviz-gd graphviz-lua python3-pygments texlive-pygmentex biber texlive-enumitem-zref texlive-zref texlive-xurl texlive-xecjk texlive-upquote texlive-unicode-math texlive-ulem texlive-ucharcat texlive-titling texlive-sourcesanspro texlive-sourcecodepro texlive-pagecolor texlive-needspace texlive-mweights texlive-mdframed texlive-ly1 texlive-letltxmacro texlive-fvextra texlive-framed texlive-footmisc texlive-filehook texlive-everypage texlive-csquotes texlive-collectbox texlive-bidi texlive-background texlive-babel-german texlive-footnotebackref texlive-adjustbox telnet tmux mksh expect tcsh wget lzip dos2unix diffutils moreutils libfaketime nmap ansifilter poppler-utils pandoc qpdf ghostscript bc pdftk-java adobe-source-code-pro-fonts adobe-source-sans-pro-fonts texlive-scheme-basic texlive-collection-xetex bash || dnf install -y file texlive-tikzfill texlive-hardwrap texlive-adjustbox telnet tmux mksh expect tcsh wget lzip dos2unix diffutils moreutils libfaketime nmap ansifilter poppler-utils pandoc qpdf ghostscript bc pdftk-java adobe-source-code-pro-fonts adobe-source-sans-pro-fonts texlive-scheme-basic texlive-collection-xetex bash texlive-footnotebackref texlive-babel-german texlive-background texlive-bidi texlive-collectbox texlive-csquotes texlive-everypage texlive-filehook texlive-footmisc texlive-framed texlive-fvextra texlive-letltxmacro texlive-ly1 texlive-mdframed texlive-mweights texlive-needspace texlive-pagecolor texlive-sourcecodepro texlive-sourcesanspro texlive-titling texlive-ucharcat texlive-ulem texlive-unicode-math texlive-upquote texlive-xecjk texlive-xurl texlive-zref texlive-enumitem-zref biber texlive-pygmentex python3-pygments graphviz texlive-graphviz graphviz-devil graphviz-gd graphviz-lua util-linux jq php php-cli texlive-minted texlive-tcolorbox texlive-cprotect texlive-globalvals texlive-bookmark texlive-footnotehyper texlive-footnoterange texlive-listings texlive-listingsutf8 texlive-microtype texlive-parskip
    - mktexfmt xelatex.fmt || true
    - *scriptSanity
    - *scriptCommon
    - *scriptBuildlibbacktrace
    - *scriptExtraInfo
    - *scriptDPS8Mods
    - env NATIVE=1 gmake && env NATIVE=1 gmake docspdf
    - test -f ${CI_PROJECT_DIR:?}/docs/dps8-omnibus.pdf
  dependencies: []
  artifacts:
    when: always
    expire_in: 30 days
    paths:
      - docs/dps8-omnibus.pdf
  retry: 2
  timeout: 360 minutes
  interruptible: true

############################################################################

Multics CI-Kit Test:
  stage: ci_test
  image: fedora:40
  tags:
    - Docker-x64-fast
    - Linux
    - CIKit-x64
    - amd64
  needs:
    - job: Source Tree Checks
  script:
    - export GLCICD_JOB="CIKitTestFedoraX64" && export DTIMESTAMP="$(stat -c "%Y" /etc/machine-id)"
    - echo -e "section_start:`date +%s`:bzip20002setup_section[collapsed=true]\r\e[0K\033[0;36mInstalling bzip2 ...\033[0m" || true
    - dnf install -y bzip2 || dnf install -y bzip2
    - echo -e "section_end:`date +%s`:bzip20002setup_section\r\e[0K" || true
    - *scriptDnfSetup
    - dnf install -y telnet tmux mksh expect tcsh wget lzip dos2unix diffutils moreutils libfaketime nmap ansifilter || dnf install -y telnet tmux mksh expect tcsh wget lzip dos2unix diffutils moreutils libfaketime nmap ansifilter
    - *scriptSanity
    - *scriptCommon
    - *scriptBuildlibbacktrace
    - *scriptDPS8Mods
    - *scriptExtraInfo
    - bash -x -c '( set -o pipefail ; set -x ; cd src/ci-kit && export WITH_BACKTRACE=1 && env NO_CI_SYMLINK_TAPES=1 ./init.sh ; ./ci.sh ; make -f ci.makefile diff ; mv -f new.log new.txt )'
  cache:
    key: tape-cache
    paths:
      - src/ci-kit/tapes/*.tap
  dependencies: []
  artifacts:
    when: always
    expire_in: 30 days
    paths:
      - src/ci-kit/new.txt
  retry: 2
  timeout: 240 minutes
  interruptible: true

#############################################################################

Flawfinder:
  stage: test
  allow_failure: false
  needs:
    - job: Linux/x86_64, Ubuntu LTS, Clang, GCC
    - job: Linux/x86_64, Fedora, Clang, GCC
    - job: Option Verification Test
  tags:
    - Linux
    - Flawfinder
    - amd64
    - Linux-Shell
    - POSIX
  script:
    - export GLCICD_JOB="Flawfinder" && export DTIMESTAMP="$(stat -c "%Y" /etc/machine-id)"
    - *scriptSanity
    - *scriptCommon
    - *scriptExtraInfo
    - env rm -rf src/libbacktrace
    - flawfinder -C -m 5 -c . 2>&1 > flawfinder.txt || true
    - sh -xc 'set +e; grep "No hits found" flawfinder.txt && exit 0;exit 2'
  dependencies: []
  artifacts:
    when: always
    expire_in: 30 days
    paths:
      - flawfinder.txt
  retry: 2
  timeout: 90 minutes
  interruptible: true

#############################################################################

Clang Analyzer:
  image: fedora:40
  stage: test
  allow_failure: false
  needs:
    - job: Linux/x86_64, Ubuntu LTS, Clang, GCC
    - job: Linux/x86_64, Fedora, Clang, GCC
    - job: Option Verification Test
  tags:
    - Linux
    - Docker-x64
    - amd64
  script:
    - export GLCICD_JOB="ClangAnalyzer" && export DTIMESTAMP="$(stat -c "%Y" /etc/machine-id)"
    - *scriptDnfSetup
    - *scriptInstallNfpm
    - *scriptSanity
    - *scriptCommon
    - *scriptExtraInfo
    - dnf install -y clang-devel clang-analyzer clang-tools-extra bzip2 llvm-devel || dnf install -y clang-devel clang-analyzer bzip2 clang-tools-extra llvm-devel
    - gmake superclean
    - gmake clsanalz
    - mkdir -p out
    - touch out/index.html
    - sh -xc 'set +e;C_OUTPUT="$(cat out/index.html 2> /dev/null)" && test -z "${C_OUTPUT:-}"'
  dependencies: []
  artifacts:
    when: always
    expire_in: 30 days
    paths:
      - out/*
  timeout: 90 minutes
  interruptible: true

#############################################################################

PVS-Studio:
  image: fedora:40
  stage: test
  allow_failure: false
  needs:
    - job: Linux/x86_64, Ubuntu LTS, Clang, GCC
    - job: Linux/x86_64, Fedora, Clang, GCC
    - job: Option Verification Test
  tags:
    - Linux
    - Docker-x64
    - amd64
    - AVX
  script:
    - export GLCICD_JOB="PVSStudioJob" && export DTIMESTAMP="$(stat -c "%Y" /etc/machine-id)"
    - *scriptDnfSetup
    - *scriptInstallNfpm
    - *scriptSanity
    - *scriptCommon
    - *scriptExtraInfo
    - dnf install -y wget curl bear bzip2 || dnf install -y wget curl bear bzip2
    - wget -O /etc/yum.repos.d/viva64.repo https://dps8m.gitlab.io/dps8m-archive/CI/viva64.repo
    - dnf --setopt sslverify=0 --setopt sslverifystatus=0 --refresh -y install pvs-studio || dnf --setopt sslverify=0 --setopt sslverifystatus=0 --refresh -y install pvs-studio
    - wget -O /etc/yum.repos.d/viva64-beta.repo https://dps8m.gitlab.io/dps8m-archive/CI/viva64-beta.repo || true
    - dnf --setopt sslverify=0 --setopt sslverifystatus=0 --refresh -y install pvs-studio || dnf --setopt sslverify=0 --setopt sslverifystatus=0 --refresh -y install pvs-studio
    - dnf --setopt sslverify=0 --setopt sslverifystatus=0 upgrade --best -y || dnf --setopt sslverify=0 --setopt sslverifystatus=0 upgrade --nobest -y
    - pvs-studio-analyzer credentials "${PVS_STUDIO_NAME:?}" "${PVS_STUDIO_KEY:?}" || true
    - rm -f compile_commands.json
    - rm -f compile_commands.events.json
    - env WITH_ABSI_DEV=1 WITH_MGP_DEV=1 WITH_SOCKET_DEV=1 bear -- gmake WITH_ABSI_DEV=1 WITH_MGP_DEV=1 WITH_SOCKET_DEV=1 -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4")
    - ./src/dps8/dps8 --version
    - pvs-studio-analyzer analyze --intermodular -o log.pvs -j $(grep -c "^model name" /proc/cpuinfo 2> /dev/null || printf %s\\n "4") || true
    - plog-converter -a "GA:1,2" -t fullhtml log.pvs -o pvsreport -d V576,V629,V701,V768 > pvs.txt 2>&1 || true
    - cat pvs.txt || true
    - grep -Eiq '(Exception. No valid messages|No messages generated)' pvs.txt && { echo 'PASSED'; mkdir -p ./pvsreport; printf '%s\n' "Congratulations!" > ./pvsreport/index.html; } || true
    - mkdir -p ./pvsreport
    - touch pvsreport/index.html
    - rm -f pvs.txt || true
    - grep -Eiq '(Congratulations!|No messages generated)' pvsreport/index.html
  dependencies: []
  artifacts:
    when: always
    expire_in: 30 days
    paths:
      - pvsreport/*
  timeout: 90 minutes
  interruptible: true

#############################################################################

Coverity:
  image: fedora:40
  stage: coverity_test
  allow_failure: true
  when: manual
  needs:
    - job: Linux/x86_64, Ubuntu LTS, Clang, GCC
    - job: Linux/x86_64, Fedora, Clang, GCC
    - job: Option Verification Test
  tags:
    - Linux
    - Docker-x64
    - amd64
  script:
    - export GLCICD_JOB="CoverityScan" && export DTIMESTAMP="$(stat -c "%Y" /etc/machine-id)"
    - *scriptDnfSetup
    - *scriptInstallNfpm
    - *scriptSanity
    - *scriptCommon
    - *scriptExtraInfo
    - dnf install -y wget curl xz bzip2 pkgconf gtk3 gtk3-devel || dnf install -y wget curl xz bzip2 pkgconf gtk3 gtk3-devel
    - dnf upgrade -y || dnf upgrade -y || true
    - mkdir -p .coverity-dl
    - export COVERITY_DLDIR="$(pwd)/.coverity-dl"
    - ./src/ci-kit/coverity-submit.sh
    - touch OK
  cache:
    key: coverity-cache
    paths:
      - .coverity-dl
  dependencies: []
  artifacts:
    when: always
    expire_in: 3 days
    paths:
      - OK
  timeout: 90 minutes
  interruptible: true

#############################################################################

Cppcheck:
  stage: test
  allow_failure: false
  needs:
    - job: Linux/x86_64, Ubuntu LTS, Clang, GCC
    - job: Linux/x86_64, Fedora, Clang, GCC
    - job: Option Verification Test
  tags:
    - Linux
    - Cppcheck
    - amd64
    - Linux-Shell
    - POSIX
  script:
    - export GLCICD_JOB="Cppcheck" && export DTIMESTAMP="$(stat -c "%Y" /etc/machine-id)"
    - *scriptSanity
    - *scriptCommon
    - *scriptExtraInfo
    - env HTMLOUT=1 make cppcheck
    - ansifilter -T cppcheck.txt > cppcheck.txt.1 2> /dev/null
    - env mv -f cppcheck.txt.1 cppcheck.txt > /dev/null 2>&1
    - sh -xc 'set +e;grep "A HREF=" cppcheck/index.html && exit 1;exit 0'
    - sh -xc 'set +e;grep -vE "(^#.*#$|^$)" cppcheck/index.html && exit 1;exit 0'
  dependencies: []
  artifacts:
    when: always
    expire_in: 30 days
    paths:
      - cppcheck.txt
      - cppcheck/index.html
      - cppcheck/*/*
  timeout: 360 minutes
  interruptible: true

#############################################################################

Oracle Developer Studio Lint:
  stage: test
  allow_failure: false
  needs:
    - job: Linux/x86_64, Ubuntu LTS, Clang, GCC
    - job: Linux/x86_64, Fedora, Clang, GCC
    - job: Option Verification Test
  tags:
    - Linux
    - Sun-CC
    - amd64
    - Linux-Shell
    - POSIX
  script:
    - export GLCICD_JOB="OracleLint" && export DTIMESTAMP="$(stat -c "%Y" /etc/machine-id)"
    - *scriptSanity
    - *scriptCommon
    - *scriptExtraInfo
    - pkill lint > /dev/null 2>&1 || true
    - sleep 20 || true
    - make orstlint || true
    - sleep 5 || true
    - pkill lint > /dev/null 2>&1 || true
    - sh -xc 'set +e;{ grep "^E_" orstlint.txt && exit 1; };exit 0'
  dependencies: []
  artifacts:
    when: always
    expire_in: 30 days
    paths:
      - orstlint.txt
  timeout: 90 minutes
  interruptible: true

#############################################################################

Source Tree Checks:
  stage: src_test
  image: fedora:40
  tags:
    - Docker-x64
    - Linux
    - amd64
  script:
    - export GLCICD_JOB="GitHooksCheckFedoraX64" && export DTIMESTAMP="$(stat -c "%Y" /etc/machine-id)"
    - echo -e "section_start:`date +%s`:bzip20003setup_section[collapsed=true]\r\e[0K\033[0;36mInstalling bzip2 ...\033[0m" || true
    - dnf install -y bzip2 || dnf install -y bzip2
    - echo -e "section_end:`date +%s`:bzip20003setup_section\r\e[0K" || true
    - *scriptDnfSetup
    - dnf install -y cppi imake reuse python3-setuptools || dnf install -y cppi imake reuse python3-setuptools
    - *scriptSanity
    - *scriptCommon
    - *scriptExtraInfo
    - ( env EXTRA_HOOK=1 DEBUG_HOOK=1 TEST_DEPENDS=1 ./.githooks/pre-commit 2>&1 ; env gmake -j 1 lmscspell spdxtest 2>&1 ) 2>&1 | tee -i pre-commit-test.txt
  dependencies: []
  artifacts:
    when: always
    expire_in: 30 days
    paths:
      - pre-commit-test.txt
  retry: 2
  timeout: 90 minutes
  interruptible: true

############################################################################

pages:
  image: alpine:latest
  tags:
    - Docker-amd64
    - DPS8M
    - Linux
    - amd64
  needs:
    - job: AIX/powerpc64, IBM AIX, GCC
    - job: AIX/powerpc64, IBM AIX, IBM XL C/C++ V16.1
    - job: Cross-compiled release binaries
    - job: Clang Analyzer
    - job: Cppcheck
    - job: DPS8M Omnibus Documentation
    - job: Flawfinder
    - job: GNU GLOBAL Hypertext
    - job: Hugo
    - job: Linux/powerpc64el, IBM Advance Toolchain 17
    - job: Linux/powerpc64el, Ubuntu, IBM Open XL C/C++
    - job: Linux/x86_64, Alpine Edge, Clang, GCC
    - job: Oracle Developer Studio Lint
    - job: Source Kits
    - job: Windows/ARM64, LLVM-MinGW
    - job: Windows/ARMv7, LLVM-MinGW
    - job: Windows/i686, LLVM-MinGW
    - job: Windows/x86_64, MinGW64-GCC
    - job: PVS-Studio
    - job: NSIS Installer
  dependencies:
    - "AIX/powerpc64, IBM AIX, GCC"
    - "AIX/powerpc64, IBM AIX, IBM XL C/C++ V16.1"
    - "Cross-compiled release binaries"
    - "Clang Analyzer"
    - "Cppcheck"
    - "DPS8M Omnibus Documentation"
    - "Flawfinder"
    - "GNU GLOBAL Hypertext"
    - "Hugo"
    - "Linux/powerpc64el, IBM Advance Toolchain 17"
    - "Linux/powerpc64el, Ubuntu, IBM Open XL C/C++"
    - "Linux/x86_64, Alpine Edge, Clang, GCC"
    - "Oracle Developer Studio Lint"
    - "Source Kits"
    - "Windows/ARM64, LLVM-MinGW"
    - "Windows/ARMv7, LLVM-MinGW"
    - "Windows/i686, LLVM-MinGW"
    - "Windows/x86_64, MinGW64-GCC"
    - "PVS-Studio"
    - "NSIS Installer"
  stage: deploy
  script:
  - apk update || true
  - apk -U upgrade --prune || true
  - apk -U add -u advancecomp pigz brotli
  - mkdir -p public/master
  - mv -f ${CI_PROJECT_DIR:?}/docs/dps8-omnibus.pdf public/master/dps8m-omnibus.pdf
  - mv -f ${CI_PROJECT_DIR:?}/HTML public/master/global
  - mkdir -p public/master/lint/oracle || true
  - mv -f ${CI_PROJECT_DIR:?}/orstlint.txt public/master/lint/oracle/oracle.txt || true
  - mv -f ${CI_PROJECT_DIR:?}/cppcheck public/master/lint/cppcheck || true
  - mv -f ${CI_PROJECT_DIR:?}/cppcheck.txt public/master/lint/cppcheck/cppcheck.txt || true
  - mkdir -p public/master/lint/flawfinder || true
  - mv -f ${CI_PROJECT_DIR:?}/flawfinder.txt public/master/lint/flawfinder/flawfinder.txt || true
  - mv -f ${CI_PROJECT_DIR:?}/out public/master/lint/clang-analyzer || true
  - mv -f ${CI_PROJECT_DIR:?}/pvsreport public/master/lint/pvs || true
  - mv -f ${CI_PROJECT_DIR:?}/docs/hpages/public/* public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-src.tar.lz public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-src.tar.gz public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-src.7z public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-src.zip public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-src.zpaq public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-s114-sv9.tar.gz public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-nbd93-a64.tar.gz public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-nbd93-s32.tar.gz public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-nbd93-s64.tar.gz public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-nbd93-970.tar.gz public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-nbd93-pg4.tar.gz public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-nbd93-740.tar.gz public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-nbd93-686.tar.gz public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-nbd93-586.tar.gz public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-fbd13-a64.tar.gz public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-fbd13-x61.tar.gz public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-fbd13-x32.tar.gz public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-nbd93-x61.tar.gz public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-linux-l64.tar.gz public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-linux-s64.tar.gz public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-linux-s32.tar.gz public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-linux-m6l.tar.gz public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-linux-m64.tar.gz public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-linux-mpl.tar.gz public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-linux-msl.tar.gz public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-linux-mps.tar.gz public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-linux-mss.tar.gz public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-linux-m2l.tar.gz public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-linux-ms2.tar.gz public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-linux-mp2.tar.gz public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-linux-m2s.tar.gz public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-linux-641.tar.gz public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-linux-642.tar.gz public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-linux-643.tar.gz public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-linux-a8b.tar.gz public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-linux-a8a.tar.gz public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-linux-a7f.tar.gz public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-linux-a7s.tar.gz public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-linux-a6f.tar.gz public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-linux-a6s.tar.gz public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-linux-740.tar.gz public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-linux-g4a.tar.gz public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-linux-r64.tar.gz public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-linux-390.tar.gz public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-ndk29-a64.tar.gz public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-ndk29-a32.tar.gz public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-ndk29-x64.tar.gz public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-ndk29-x32.tar.gz public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-ndk24-a64.tar.gz public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-ndk24-a32.tar.gz public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-ndk24-x64.tar.gz public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-ndk24-x32.tar.gz public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-haiku-x64.tar.gz public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-linux-040.tar.gz public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-linux-030.tar.gz public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-aixv7-pw7.tar.gz public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-aixv7-pw8.tar.gz public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-aixv7-pw9.tar.gz public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-aixv7-p10.tar.gz public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-linux-x86.tar.gz public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-linux-686.tar.gz public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-linux-ate.tar.gz public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-linux-p10.tar.gz public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-linux-pw9.tar.gz public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-linux-pw8.tar.gz public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-linux-atn.tar.gz public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-linux-att.tar.gz public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-linux-ox8.tar.gz public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-macos-uni.tar.gz public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-s114-641.tar.gz public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-iloi-641.tar.gz public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-linux-bpt.tar.gz public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-linux-ple.tar.gz public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-linux-bp9.tar.gz public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-linux-bp8.tar.gz public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-linux-bp7.tar.gz public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-linux-bp6.tar.gz public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-linux-bp5.tar.gz public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-linux-970.tar.gz public
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-mingw-a64.zip public
  - advzip -z4 public/dps8m-git-mingw-a64.zip
  - mv -f ${CI_PROJECT_DIR:?}/dps8m-git-mingw-av7.zip public
  - advzip -z4 public/dps8m-git-mingw-av7.zip
  - mv -f ${CI_PROJECT_DIR:?}/.nsis/dps8m-git-win-setup.exe public
  - find "public" -type f -regex '.*\.\(png\)$' -exec advpng -z4 -- "{}" \; || true
  - find "public" -type f -regex '.*\.\(htm\|html\|txt\|text\|js\|css\)$' -exec brotli -f -k -v -Z -- "{}" \; || true
  - find "public" -type f -regex '.*\.\(htm\|html\|txt\|text\|js\|css\)$' -exec pigz -9 -f -k -m -v -- "{}" \; || true
  - ls -laR -- "public" || true
  artifacts:
    paths:
    - public
    expire_in: 1 day
  only:
    - master
  retry: 2
  timeout: 120 minutes
  interruptible: false

############################################################################
