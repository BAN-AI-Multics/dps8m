\section[Multics Configuration]{MULTICS CONFIGURATION}

This section describes how to match the Multics configuration to the simulator.

\subsection[Typical System Config Deck]{TYPICAL SYSTEM CONFIG DECK}

The following config deck would be for a typical, moderately sized system. It only uses
devices that are cabled by default:

\begin{adjustwidth}{5ex}{1ex}
    \texttt{clok -delta 8. -zone pst} \\
    \texttt{iom  -tag a -port 0 -model iom -state on} \\
    \texttt{iom  -tag b -port 1 -model iom -state on} \\
    \texttt{cpu  -tag a -port 7 -state on -type dps8 -model 70. -cache 8.} \\
    \texttt{cpu  -tag b -port 6 -state on -type dps8 -model 70. -cache 8.} \\
    \texttt{mem  -port a -size 4096. -state on} \\
    \texttt{mem  -port b -size 4096. -state on} \\
    \texttt{mem  -port c -size 4096. -state on} \\
    \texttt{mem  -port d -size 4096. -state on} \\
    \texttt{ipc  -type fips   -iom a -chn 13 -nchan 1} \\
    \texttt{prph -subsys dska -iom a -chn 13 -nchan 1 -model 3381. -number 16} \\
    \texttt{prph -device fnpd -iom a -chn 20 -model 6670. -state on} \\
    \texttt{mpc  -ctlr   mtpa -iom a -chn 12 -nchan 1 -model 501.} \\
    \texttt{prph -subsys tapa -iom a -chn 12 -nchan 1 -model 500. -number 16.} \\
    \texttt{prph -device opca -iom a -chn 36 -model 6001. -ll 256. -state on} \\
    \texttt{mpc  -ctlr   urpa -iom a -chn 15 -model 8004. -nchan 1} \\
    \texttt{prph -device rdra -iom a -chn 15 -model 301.} \\
    \texttt{mpc  -ctlr   urpb -iom a -chn 16 -model 8004. -nchan 1} \\
    \texttt{prph -device puna -iom a -chn 16 -model 301.} \\
    \texttt{mpc  -ctlr   urpc -iom a -chn 17 -model 8004. -nchan 1} \\
    \texttt{prph -device prta -iom a -chn 17 -model 1600. -train 600. -ll 136.} \\
    \texttt{mpc  -ctlr   urpd -iom a -chn 50 -model 8004. -nchan 1} \\
    \texttt{prph -device prtb -iom a -chn 50 -model 1600. -train 600. -ll 136.} \\
    \texttt{part -part hc -subsys dska -drive 00a} \\
    \texttt{part -part bos -subsys dska -drive 00a} \\
    \texttt{part -part dump -subsys dska -drive 00a} \\
    \texttt{root -subsys dska -drive 00a} \\
    \texttt{sst  -4k 3800. -16k 2100. -64k 820. -256k 260.} \\
    \texttt{dbmj 64. 700. 400. 150. 60. 25.} \\
    \texttt{tcd -apt 1000. -itt 2000.} \\
    \texttt{intk warm 0. rpvs star} \\
    \texttt{parm dirw} \\    
\end{adjustwidth}  


\subsection[Large System Config Deck]{LARGE SYSTEM CONFIG DECK}

The following config deck uses most of the default cabling and will allow Multics to boot:

\begin{adjustwidth}{5ex}{1ex}
    \texttt{clok -delta 8. -zone pst} \\
    \texttt{iom  -tag a -port 0 -model iom -state on} \\
    \texttt{iom  -tag b -port 1 -model iom -state on} \\
    \texttt{cpu  -tag a -port 7 -state on -type dps8 -model 70. -cache 8.} \\
    \texttt{cpu  -tag b -port 6 -state on -type dps8 -model 70. -cache 8.} \\
    \texttt{cpu  -tag c -port 5 -state on -type dps8 -model 70. -cache 8.} \\
    \texttt{cpu  -tag d -port 4 -state on -type dps8 -model 70. -cache 8.} \\
    \texttt{cpu  -tag e -port 3 -state on -type dps8 -model 70. -cache 8.} \\
    \texttt{mem  -port a -size 4096. -state on} \\
    \texttt{mem  -port b -size 4096. -state on} \\
    \texttt{mem  -port c -size 4096. -state on} \\
    \texttt{mem  -port d -size 4096. -state on} \\
    \texttt{ipc  -type fips   -iom a -chn 13 -nchan 1} \\
    \texttt{prph -subsys dska -iom a -chn 13 -nchan 1 -model 3381. -number 16} \\
    \texttt{mpc -ctlr mspa -model 612. -iom a -chn 14 -nchan 1} \\
    \texttt{prph dskb a 14 1 501. 4. 451. 4. 500. 2.} \\
    \texttt{prph -device fnpd -iom a -chn 20 -model 6670. -state on} \\
    \texttt{mpc  -ctlr   mtpa -iom a -chn 12 -nchan 1 -model 501.} \\
    \texttt{prph -subsys tapa -iom a -chn 12 -nchan 1 -model 500. -number 16.} \\
    \texttt{prph -device opca -iom a -chn 36 -model 6001. -ll 256. -state on} \\
    \texttt{mpc  -ctlr   urpa -iom a -chn 15 -model 8004. -nchan 1} \\
    \texttt{prph -device rdra -iom a -chn 15 -model 301.} \\
    \texttt{mpc  -ctlr   urpb -iom a -chn 16 -model 8004. -nchan 1} \\
    \texttt{prph -device puna -iom a -chn 16 -model 301.} \\
    \texttt{mpc  -ctlr   urpc -iom a -chn 17 -model 8004. -nchan 1} \\
    \texttt{prph -device prta -iom a -chn 17 -model 1600. -train 600. -ll 136.} \\
    \texttt{mpc  -ctlr   urpd -iom a -chn 50 -model 8004. -nchan 1} \\
    \texttt{prph -device prtb -iom a -chn 50 -model 1600. -train 600. -ll 136.} \\
    \texttt{mpc  -ctlr   urpe -iom a -chn 51 -model 8004. -nchan 1} \\
    \texttt{prph -device prtc -iom a -chn 51 -model 1600. -train 600. -ll 136.} \\
    \texttt{mpc  -ctlr   urpf -iom a -chn 52 -model 8004. -nchan 1} \\
    \texttt{prph -device prtd -iom a -chn 52 -model 1600. -train 600. -ll 136.} \\
    \texttt{prph -device opcb -iom a -chn 53 -model 6001. -ll 256. -state alt} \\
    \texttt{prph -device opcc -iom a -chn 54 -model 6001. -ll 256. -state alt} \\
    \texttt{mpc  -ctlr   urpg -iom a -chn 55 -model 8004. -nchan 1} \\ 
    \texttt{prph -device rdrb -iom a -chn 55 -model 301.} \\
    \texttt{mpc  -ctlr   urph -iom a -chn 56 -model 8004. -nchan 1} \\
    \texttt{prph -device rdrc -iom a -chn 56 -model 301.} \\
    \texttt{mpc  -ctlr   urpi -iom a -chn 57 -model 8004. -nchan 1} \\
    \texttt{prph -device punb -iom a -chn 57 -model 301.} \\
    \texttt{mpc  -ctlr   urpj -iom a -chn 60 -model 8004. -nchan 1} \\
    \texttt{prph -device punc -iom a -chn 60 -model 301.} \\
    \texttt{part -part hc -subsys dska -drive 00a} \\
    \texttt{part -part bos -subsys dska -drive 00a} \\
    \texttt{part -part dump -subsys dska -drive 00a} \\
    \texttt{root -subsys dska -drive 00a} \\
    \texttt{sst  -4k 3800. -16k 2100. -64k 820. -256k 260.} \\
    \texttt{dbmj 64. 700. 400. 150. 60. 25.} \\
    \texttt{tcd -apt 1000. -itt 2000.} \\
    \texttt{intk warm 0. rpvs star} \\
    \texttt{parm dirw} \\    
\end{adjustwidth}  

\textbf{IMPORTANT WARNING:}

You may notice if you compare this config deck with the default cabling in the simulator that
not all the devices cabled are configured. The reason is known as the "Evil Config Deck Bug" in
Multics.

With the ability of the simulator to simulate a system that is so large no one would ever build
it in actual hardware, it is possible to trigger bugs in Multics that are caused by running out
of space in internal data structures. The above config deck is an example of a configuration that
is right on the edge of triggering one of these bugs. If, for example, you add CPU F into the deck
above and do not remove any other cards, Multics will crash when attempting to boot.

If you get something like this, you have made a configuration that is too large:

\begin{adjustwidth}{5ex}{1ex}
    \texttt{bce (boot) 1454.1: M-> [auto-input] boot -cold} \\
    \texttt{Do you really wish to boot cold and there by destroy the system hierarchy? M-> [auto-input] y} \\
    \texttt{CONSOLE: ALERT} \\
    \texttt{1454.2  page\_fault: fatal error at loc 2330} \\
    \texttt{1454.2  Multics not in operation; control process: Initializer.SysDaemon.z.} \\
    \texttt{bce (crash) 1454.2: M->} \\
\end{adjustwidth}  

