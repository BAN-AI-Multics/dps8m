; SPDX-License-Identifier: MIT-0
; scspell-id: 0a0c3d4f-f62c-11ec-84bd-80ee73e9b8e7
; Copyright (c) 2021-2023 The DPS8M Development Team

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

do info.ini

do stall.ini
show cpu stall
set tape DEFAULT_PATH=./tapes/general
set tape ADD_PATH=12.8=./tapes/12.8

; MR12.8  12.8MULTICS
attach -r tape0 ./tapes/12.8/12.8MULTICS.tap
set tape0 rewind

attach disk0  ./disks/yoyodyne.dsk
attach disk1  ./disks/dska_01.dsk
attach disk2  ./disks/dska_02.dsk
attach disk3  ./disks/dska_03.dsk
attach disk4  ./disks/dskb_01.dsk
attach disk5  ./disks/dskb_02.dsk
attach disk6  ./disks/dskb_03.dsk
attach disk7  ./disks/dskb_04.dsk
attach disk8  ./disks/dskb_05.dsk
attach disk9  ./disks/dskb_06.dsk
attach disk10 ./disks/dskb_07.dsk
attach disk11 ./disks/dskb_08.dsk
attach disk12 ./disks/dskb_09.dsk
attach disk13 ./disks/dskb_10.dsk

set cpu kips=8000

fnpserveraddress 127.0.0.1
if NOT "%STATUS%" == "00000000" exit
fnpserverport %FNPPORT%
if NOT "%STATUS%" == "00000000" exit
fnpstart
if NOT "%STATUS%" == "00000000" exit

set opc0 pw=foo
set opc0 port=%CONPORT%
set opc0 config=noempty=on
set opc0 config=attn_flush=off

! mkdir -p ./printers/prta
! mkdir -p ./printers/prtb
! mkdir -p ./printers/prtc
! mkdir -p ./printers/prtd

set prt path=./printers
set prt0 config=split=on
set prt1 config=split=on
set prt2 config=split=on
set prt3 config=split=on

! mkdir -p ./cards/rdra
! mkdir -p ./cards/rdrb
! mkdir -p ./cards/rdrc
set rdr path=./cards

! mkdir -p ./punches/puna
! mkdir -p ./punches/punb
! mkdir -p ./punches/punc
set pun path=./punches

autoinput rpv a11 ipc 3381 0a\n

; bce (early) 0000.0: M->
autoinput bce\n
;Current system time is: Friday, July 22, 1994 20:01:28 pdt.
;Is this correct? M->
autoinput y\n
; boot_delta ok?
autoinput y\n
; more than 12 hours ok?
autoinput y\n

; bce (boot)
autoinput reinit\n

; bce (early)
autoinput boot star\n
autoinput  \xReady\x

autoinput admin\n
autoinput pause 30\n

autoinput avr -pv sys01 -lv RingZero -model 3381\n
autoinput y\n
autoinput avr -pv sys02 -lv RingZero -model 3381\n
autoinput avr -pv sys03 -lv RingZero -model 3381\n
autoinput ame\n
autoinput init_vol sys01 dska_01a\n
autoinput init_vol sys02 dska_01b\n
autoinput init_vol sys03 dska_01c\n
autoinput av sys01 dska_01a\n
autoinput av sys02 dska_01b\n
autoinput av sys03 dska_01c\n
autoinput alv -all\n

autoinput admin\n
autoinput pause 3\n
autoinput avr -pv proja01 -lv ProjectA -model 501\n
autoinput y\n
autoinput avr -pv proja02 -lv ProjectA -model 501\n
autoinput avr -pv proja03 -lv ProjectA -model 501\n
autoinput avr -pv proja04 -lv ProjectA -model 501\n
autoinput ame\n
autoinput init_vol proja01 dskb_01\n
autoinput init_vol proja02 dskb_02\n
autoinput init_vol proja03 dskb_03\n
autoinput init_vol proja04 dskb_04\n
autoinput av proja01 dskb_01\n
autoinput av proja02 dskb_02\n
autoinput av proja03 dskb_03\n
autoinput av proja04 dskb_04\n
autoinput alv -all\n

autoinput admin\n
autoinput pause 3\n
autoinput avr -pv projb01 -lv ProjectB -model 451\n
autoinput y\n
autoinput avr -pv projb02 -lv ProjectB -model 451\n
autoinput avr -pv projb03 -lv ProjectB -model 451\n
autoinput avr -pv projb04 -lv ProjectB -model 451\n
autoinput ame\n
autoinput init_vol projb01 dskb_05\n
autoinput init_vol projb02 dskb_06\n
autoinput init_vol projb03 dskb_07\n
autoinput init_vol projb04 dskb_08\n
autoinput av projb01 dskb_05\n
autoinput av projb02 dskb_06\n
autoinput av projb03 dskb_07\n
autoinput av projb04 dskb_08\n
autoinput alv -all\n

autoinput admin\n
autoinput pause 3\n
autoinput avr -pv projc01 -lv ProjectC -model 500\n
autoinput y\n
autoinput avr -pv projc02 -lv ProjectC -model 500\n
autoinput ame\n
autoinput init_vol projc01 dskb_09\n
autoinput init_vol projc02 dskb_10\n
autoinput av projc01 dskb_09\n
autoinput av projc02 dskb_10\n
autoinput alv -all\n

autoinput admin\n
autoinput pause 3\n
autoinput avr -pv projd01 -lv ProjectD -model 3381\n
autoinput y\n
autoinput avr -pv projd02 -lv ProjectD -model 3381\n
autoinput avr -pv projd03 -lv ProjectD -model 3381\n
autoinput ame\n
autoinput init_vol projd01 dska_02a\n
autoinput init_vol projd02 dska_02b\n
autoinput init_vol projd03 dska_02c\n
autoinput av projd01 dska_02a\n
autoinput av projd02 dska_02b\n
autoinput av projd03 dska_02c\n
autoinput alv -all\n

autoinput admin\n
autoinput pause 3\n
autoinput avr -pv proje01 -lv ProjectE -model 3381\n
autoinput y\n
autoinput avr -pv proje02 -lv ProjectE -model 3381\n
autoinput avr -pv proje03 -lv ProjectE -model 3381\n
autoinput ame\n
autoinput init_vol proje01 dska_03a\n
autoinput init_vol proje02 dska_03b\n
autoinput init_vol proje03 dska_03c\n
autoinput av proje01 dska_03a\n
autoinput av proje02 dska_03b\n
autoinput av proje03 dska_03c\n
autoinput alv -all\n

autoinput ld\n
autoinput lsv\n
autoinput admin\n
autoinput create >lv>RingZero.acs\n
autoinput cvr -lv RingZero -acs >lv>RingZero.acs\n
autoinput set_max_length >lv>RingZero.acs 0\n
autoinput la >lv>**.acs\n
autoinput da >lv>RingZero.acs\n
autoinput la >lv>**.acs\n
autoinput set_volume_quota RingZero 200000\n
autoinput cd >RingZero -lv RingZero -quota 200000\n
autoinput an >RingZero r0 rz\n
autoinput sa >RingZero s *.*.*\n
autoinput sa >RingZero sma *.SysAdmin.*\n
autoinput sa >RingZero sma *.RingZero.*\n
autoinput ame\n

autoinput admin\n

autoinput cwd >sc1\n

;;;
;;; System name
;;;

autoinput ed_installation_parms\n
autoinput change installation_id\n
autoinput Yoyodyne Propulsion Systems\n
autoinput change titles\n
autoinput Yoyodyne Propulsion Systems\n
autoinput Multics\n
autoinput Y o y o d y n e   P r o p u l s i o n   S y s t e m s\n
autoinput M u l t i c s\n
autoinput w\n
autoinput q\n

;;;
;;; Create User, RingZero and Guest load control groups
;;;

autoinput cwd >user_dir_dir>SysAdmin>a\n

autoinput ed_mgt\n
autoinput a RingZero 4.0\n
autoinput a User 4.0\n
autoinput a Guest 4.0\n
autoinput w\n
autoinput q\n
autoinput install MGT.mgt\n

autoinput pause 20\n

;;;
;;; Create RingZero project
;;;

autoinput ec master new_proj RingZero\n
; Title
autoinput System Engineering\n
; Investigator
autoinput Chiclitz, Clayton\n
; Inv. Address
autoinput Yoyodyne\n
; Supervisor
autoinput \n
; Sup. Address
autoinput \n
; Phone
autoinput \n
; Account
autoinput \n
; Requisition
autoinput \n
; Amount
autoinput \n
; Cutoff date
autoinput \n
; Billing name
autoinput \n
; Billing address
autoinput \n
; Alias
autoinput r0\n
; Project administrator
autoinput \n
; Absentee foreground cpu limit: 0
autoinput \n
; Authorization
autoinput \n
; Audit flags
autoinput \n
; Segment quota
autoinput 1000\n
; Directory quota
autoinput 100\n
; Rate structure
autoinput \n
; Default group
autoinput RingZero\n
; Authorized groups
autoinput RingZero\n
autoinput \n
; Attributes
;autoinput guaranteed_login,guar,dial,vinitproc,vhomedir,nostartup,preempting,save,multip,igroup,save_pdir,disconnect_ok\n
autoinput \n
; Grace
autoinput \n
; Minimum login ring
autoinput 1\n
; Maximum login ring
autoinput \n
; Maximum pdir quota
autoinput \n
; Maximum foreground processes
autoinput 10\n
; Maximum background processes
autoinput 10\n
; Review
autoinput n\n
; Project directory logical volume
autoinput \n
; Enter initial list of users. Type "." to exit
autoinput Clayton\n
autoinput .\n

autoinput pause 20\n

;;;
;;; Create User project
;;;

autoinput ec master new_proj User\n
; Title
autoinput User\n
; Investigator
autoinput Chiclitz, Clayton\n
; Inv. Address
autoinput Yoyodyne\n
; Supervisor
autoinput \n
; Sup. Address
autoinput \n
; Phone
autoinput \n
; Account
autoinput \n
; Requisition
autoinput \n
; Amount
autoinput \n
; Cutoff date
autoinput \n
; Billing name
autoinput \n
; Billing address
autoinput \n
; Alias
autoinput u\n
; Project administrator
autoinput \n
; Absentee foreground cpu limit: 0
autoinput \n
; Authorization
autoinput \n
; Audit flags
autoinput \n
; Segment quota
autoinput 1000\n
; Directory quota
autoinput 100\n
; Rate structure
autoinput \n
; Default group
autoinput User\n
; Authorized groups
autoinput User\n
autoinput \n
; Attributes
;autoinput guaranteed_login,guar,dial,vinitproc,vhomedir,nostartup,preempting,save,multip,igroup,save_pdir,disconnect_ok\n
autoinput \n
; Grace
autoinput \n
; Minimum login ring
autoinput \n
; Maximum login ring
autoinput \n
; Maximum pdir quota
autoinput \n
; Maximum foreground processes
autoinput 10\n
; Maximum background processes
autoinput 10\n
; Review
autoinput n\n
; Project directory logical volume
autoinput \n
; Enter initial list of users. Type "." to exit
autoinput Clayton\n
autoinput .\n

autoinput pause 20\n

;;;
;;; Add Guest project
;;;

autoinput ec master new_proj Guest\n
; Title
autoinput Guest\n
; Investigator
autoinput Chiclitz, Clayton\n
; Inv. Address
autoinput Yoyodyne\n
; Supervisor
autoinput \n
; Sup. Address
autoinput \n
; Phone
autoinput \n
; Account
autoinput \n
; Requisition
autoinput \n
; Amount
autoinput \n
; Cutoff date
autoinput \n
; Billing name
autoinput \n
; Billing address
autoinput \n
; Alias
autoinput \n
; Project administrator
autoinput \n
; Absentee foreground cpu limit: 0
autoinput \n
; Authorization
autoinput \n
; Audit flags
autoinput \n
; Segment quota
autoinput 1000\n
; Directory quota
autoinput 100\n
; Rate structure
autoinput \n
; Default group
autoinput Guest\n
; Authorized groups
autoinput Guest\n
autoinput \n
; Attributes
;autoinput guaranteed_login,preempting,save,multip,igroup,save_pdir,disconnect_ok\n
autoinput \n
; Grace
autoinput \n
; Minimum login ring
autoinput \n
; Maximum login ring
autoinput \n
; Maximum pdir quota
autoinput \n
; Maximum foreground processes
autoinput 10\n
; Maximum background processes
autoinput 10\n
; Review
autoinput n\n
; Project directory logical volume
autoinput \n
; Enter initial list of users. Type "." to exit
autoinput *\n
autoinput .\n

autoinput pause 20\n

autoinput ec master pmf RingZero\n
; Do you want to delete?
autoinput n\n
autoinput /Attr/\n
autoinput s/;/, guaranteed_login,guar,dial,preempting,save,multip;/\n
autoinput s/;/,save_pdir,disconnect_ok;/\n
autoinput w\n
autoinput q\n

autoinput pause 20\n

;;;
;;; Add user Clayton
;;;

autoinput ec master register\n
autoinput Chiclitz, Clayton\n
autoinput Yoyodyne\n
autoinput 1\n
autoinput \n
autoinput RingZero\n
autoinput password\n
autoinput password\n
autoinput password\n
autoinput password\n
autoinput n\n
autoinput Clayton\n
autoinput y\n
autoinput n\n

;;
;;; Add user User1
;;;

autoinput ec master register\n
autoinput User1, User1\n
autoinput Yoyodyne\n
autoinput 1\n
autoinput \n
autoinput RingZero\n
autoinput password\n
autoinput password\n
autoinput password\n
autoinput password\n
autoinput n\n
autoinput User1\n
autoinput y\n
autoinput n\n

;;
;;; Add user User2
;;;

autoinput ec master register\n
autoinput User2, User2\n
autoinput Yoyodyne\n
autoinput 1\n
autoinput \n
autoinput RingZero\n
autoinput password\n
autoinput password\n
autoinput password\n
autoinput password\n
autoinput n\n
autoinput User2\n
autoinput y\n
autoinput n\n

;;
;;; Add user User3
;;;

autoinput ec master register\n
autoinput User3, User3\n
autoinput Yoyodyne\n
autoinput 1\n
autoinput \n
autoinput RingZero\n
autoinput password\n
autoinput password\n
autoinput password\n
autoinput password\n
autoinput n\n
autoinput User3\n
autoinput y\n
autoinput n\n

;;
;;; Add user User4
;;;

autoinput ec master register\n
autoinput User4, User4\n
autoinput Yoyodyne\n
autoinput 1\n
autoinput \n
autoinput RingZero\n
autoinput password\n
autoinput password\n
autoinput password\n
autoinput password\n
autoinput n\n
autoinput User4\n
autoinput y\n
autoinput n\n

;;
;;; Add user User5
;;;

autoinput ec master register\n
autoinput User5, User5\n
autoinput Yoyodyne\n
autoinput 1\n
autoinput \n
autoinput RingZero\n
autoinput password\n
autoinput password\n
autoinput password\n
autoinput password\n
autoinput n\n
autoinput User5\n
autoinput y\n
autoinput n\n

;;
;;; Add user User6
;;;

autoinput ec master register\n
autoinput User6, User6\n
autoinput Yoyodyne\n
autoinput 1\n
autoinput \n
autoinput RingZero\n
autoinput password\n
autoinput password\n
autoinput password\n
autoinput password\n
autoinput n\n
autoinput User6\n
autoinput y\n
autoinput n\n

;;
;;; Add user User7
;;;

autoinput ec master register\n
autoinput User7, User7\n
autoinput Yoyodyne\n
autoinput 1\n
autoinput \n
autoinput RingZero\n
autoinput password\n
autoinput password\n
autoinput password\n
autoinput password\n
autoinput n\n
autoinput User7\n
autoinput y\n
autoinput n\n

;;
;;; Add user User8
;;;

autoinput ec master register\n
autoinput User8, User8\n
autoinput Yoyodyne\n
autoinput 1\n
autoinput \n
autoinput RingZero\n
autoinput password\n
autoinput password\n
autoinput password\n
autoinput password\n
autoinput n\n
autoinput User8\n
autoinput y\n
autoinput n\n

;;
;;; Add user User9
;;;

autoinput ec master register\n
autoinput User9, User9\n
autoinput Yoyodyne\n
autoinput 1\n
autoinput \n
autoinput RingZero\n
autoinput password\n
autoinput password\n
autoinput password\n
autoinput password\n
autoinput n\n
autoinput User9\n
autoinput y\n
autoinput n\n

autoinput pause 30\n

; Setup HFED project

autoinput ec master pmf HFED\n
autoinput /Initproc/\n
autoinput s/process_overseer_/tolts_overseer_/\n
autoinput w\n
autoinput q\n

autoinput ec master upmf SysAdmin Clayton\n
autoinput ec master upmf HFED Clayton\n

autoinput pause 30\n
autoinput ame\n

;;;
;;; Set the MOTD
;;;

;autoinput motd\n
;autoinput a\n
;autoinput \n
;autoinput Welcome to the 'Yoyodyne Propulsion Systems' System.\n
;autoinput This system is for historical and academic research only.\n
;autoinput This system is a testing system. In order to improve the\n
;autoinput system\c your data and usage may be examined. Please do not\n
;autoinput assume confidentiality\c data preservation or accessibility.\n
;autoinput \n
;autoinput Historical Background\n
;autoinput \n
;autoinput This edition of the Multics software materials and documentation is provided\n
;autoinput and donated to Massachusetts Institute of Technology by Group BULL including\n
;autoinput BULL HN Information Systems Inc. as a contribution to computer science\n
;autoinput knowledge. This donation is made also to give evidence of the common\n
;autoinput contributions of Massachusetts Institute of Technology, Bell Laboratories,\n
;autoinput General Electric, Honeywell Information Systems Inc., Honeywell BULL Inc.,\n
;autoinput Groupe BULL and BULL HN Information Systems Inc. to the development of this\n
;autoinput operating system.\n
;autoinput \n
;autoinput Multics development was initiated by Massachusetts Institute of Technology\n
;autoinput Project MAC (1963-1970), renamed the MIT Laboratory for Computer Science and\n
;autoinput Artificial Intelligence in the mid 1970s, under the leadership of Professor\n
;autoinput Fernando Jose Corbato. Users consider that Multics provided the best software\n
;autoinput architecture for managing computer hardware properly and for executing\n
;autoinput programs. Many subsequent operating systems incorporated Multics principles.\n
;autoinput \n
;autoinput Multics was distributed in 1975 to 2000 by Group Bull in Europe, and in the\n
;autoinput U.S. by Bull HN Information Systems Inc., as successor in interest by change\n
;autoinput in name only to Honeywell Bull Inc. and Honeywell Information Systems Inc.\n
;autoinput \n
;autoinput -----------------------------------------------------------\n
;autoinput \n
;autoinput Permission to use, copy, modify, and distribute these programs and their\n
;autoinput documentation for any purpose and without fee is hereby granted, provided that\n
;autoinput the below copyright notice and historical background appear in all copies\n
;autoinput and that both the copyright notice and historical background and this\n
;autoinput permission notice appear in supporting documentation, and that the names of\n
;autoinput MIT, HIS, BULL or BULL HN not be used in advertising or publicity pertaining\n
;autoinput to distribution of the programs without specific prior written permission.\n
;autoinput Copyright 1972 by Massachusetts Institute of Technology\n
;autoinput and Honeywell Information Systems Inc.\n
;autoinput Copyright 2006 by BULL HN Information Systems Inc.\n
;autoinput Copyright 2006 by Bull SAS\n
;autoinput All Rights Reserved\n
;autoinput \wf\n
;autoinput w\n
;autoinput q\n

;;;
;;; Quotas
;;;

autoinput admin\n
autoinput mq >udd 100000\n
autoinput mq >udd>RingZero 40000\n
autoinput mq >udd>SysAdmin 40000\n
autoinput ame\n

;;;
;;; Pause to let background tasks to come up to speed.
;;;

autoinput admin\n
autoinput pause 125\n
autoinput ame\n

;;;
;;; Patch login ring limits
;;;

autoinput admin\n
autoinput cwd >udd>sa>a\n
autoinput ac xf pmf RingZero.pmf\n
autoinput qedx\n
autoinput r RingZero.pmf\n
autoinput /Attr/\n
autoinput a\n
autoinput Ring:  1,5,4;\n
autoinput \wf\n
autoinput /Clayton/\n
autoinput a\n
autoinput ring: 1,5,4;\n
autoinput \wf\n
autoinput w\n
autoinput q\n
autoinput ac u pmf RingZero.pmf\n
autoinput cv_pmf RingZero.pmf\n
autoinput install RingZero.pdt\n
autoinput pause 20\n
autoinput ame\n

;;;
;;; Moved over from start_sve.ini
;;;

autoinput admin\n
autoinput sa >sc1>rcp>tapa**.acs rw *.*.*\n
autoinput sa >sc1>rcp>prta.acs rw *.*.*\n
autoinput sa >sc1>rcp>prtb.acs rw *.*.*\n
autoinput sa >sc1>rcp>prtc.acs rw *.*.*\n
autoinput sa >sc1>rcp>prtd.acs rw *.*.*\n
autoinput sa >sc1>rcp>puna.acs rw *.*.*\n
autoinput sa >sc1>rcp>punb.acs rw *.*.*\n
autoinput sa >sc1>rcp>punc.acs rw *.*.*\n
autoinput sa >sc1>rcp>rdra.acs rw *.*.*\n
autoinput sa >sc1>rcp>rdrb.acs rw *.*.*\n
autoinput sa >sc1>rcp>rdrc.acs rw *.*.*\n
autoinput create >sc1>rcp>card_input_password.acs\n
autoinput sa >sc1>rcp>card_input_password.acs rw *.*.*\n
autoinput ame\n

;;;
;;; Rewrite the iodt for the new configuration
;;;

autoinput admin\n
autoinput cwd >ddd>idd\n
autoinput qedx\n
autoinput r iod_tables.iodt\n
autoinput 1,$d\n
autoinput i\n
autoinput /* IO daemon tables for a system with four printers, three punches, three readers */\n
autoinput Max_queues:         3;\n
autoinput Time:               60;\n
autoinput /* Printers */\n
autoinput Device:             prta;\n
autoinput !  driver_module:    printer_driver_;\n
autoinput !  prph:             prta;\n
autoinput !  default_type:     printer;\n
autoinput Device:             prtb;\n
autoinput !  driver_module:    printer_driver_;\n
autoinput !  prph:             prtb;\n
autoinput !  default_type:     printerB;\n
autoinput Device:             prtc;\n
autoinput !  driver_module:    printer_driver_;\n
autoinput !  prph:             prtc;\n
autoinput !  default_type:     printerC;\n
autoinput Device:             prtd;\n
autoinput !  driver_module:    printer_driver_;\n
autoinput !  prph:             prtd;\n
autoinput !  default_type:     printerD;\n
autoinput /* Card Readers */\n
autoinput Device:             rdra;               /* Station ID is default, "reader" */\n
autoinput !  driver_module:    reader_driver_;\n
autoinput !  prph:             rdra;\n
autoinput !  default_type:     dummy;\n
autoinput Device:             rdrb;\n
autoinput !  driver_module:    reader_driver_;\n
autoinput !  prph:             rdrb;\n
autoinput !  default_type:     dummy;\n
autoinput Device:             rdrc;\n
autoinput !  driver_module:    reader_driver_;\n
autoinput !  prph:             rdrc;\n
autoinput !  default_type:     dummy;\n
autoinput Request_type:       printer;            /* standard printer output */\n
autoinput !  generic_type:     printer;\n
autoinput !  device:           prta;\n
autoinput !  device:           prtb;\n
autoinput !  device:           prtc;\n
autoinput !  device:           prtd;\n
autoinput Request_type:       unlined;            /* for unlined paper */\n
autoinput !  generic_type:     printer;\n
autoinput !  device:           prta;\n
autoinput !  device:           prtb;\n
autoinput !  device:           prtc;\n
autoinput !  device:           prtd;\n
autoinput Request_type:       8by11;              /* for 8 1/2 by 11 paper */\n
autoinput !  generic_type:     printer;\n
autoinput !  device:           prta;\n
autoinput !  device:           prtb;\n
autoinput !  device:           prtc;\n
autoinput !  device:           prtd;\n
autoinput Request_type:       11by8;              /* for 11 by 8 1/2 paper */\n
autoinput !  generic_type:     printer;\n
autoinput !  device:           prta;\n
autoinput !  device:           prtb;\n
autoinput !  device:           prtc;\n
autoinput !  device:           prtd;\n
autoinput Request_type:       printerA; \n
autoinput !  generic_type:     printer; \n
autoinput !  device:           prta; \n
autoinput !  max_queues:       1;\n
autoinput Request_type:       printerB; \n
autoinput !  generic_type:     printer; \n
autoinput !  device:           prtb; \n
autoinput !  max_queues:       1;\n
autoinput Request_type:       printerC; \n
autoinput !  generic_type:     printer; \n
autoinput !  device:           prtc; \n
autoinput !  max_queues:       1;\n
autoinput Request_type:       printerD; \n
autoinput !  generic_type:     printer; \n
autoinput !  device:           prtd; \n
autoinput !  max_queues:       1;\n
autoinput /* Card punches */\n
autoinput Device:             puna;\n
autoinput !  driver_module:    punch_driver_;\n
autoinput !  prph:             puna;\n
autoinput !  default_type:     punch;\n
autoinput Device:             punb;\n
autoinput !  driver_module:    punch_driver_;\n
autoinput !  prph:             punb;\n
autoinput !  default_type:     punchB;\n
autoinput Device:             punc;\n
autoinput !  driver_module:    punch_driver_;\n
autoinput !  prph:             punc;\n
autoinput !  default_type:     punchC;\n
autoinput Request_type:       punch;\n
autoinput !  generic_type:     punch;\n
autoinput !  device:           puna;\n
autoinput !  device:           punb;\n
autoinput !  device:           punc;\n
autoinput Request_type:       punchA;\n
autoinput !  generic_type:     punch;\n
autoinput !  device:           puna;\n
autoinput Request_type:       punchB;\n
autoinput !  generic_type:     punch;\n
autoinput !  device:           punb;\n
autoinput !  max_queues:       1;\n
autoinput Request_type:       punchC;\n
autoinput !  generic_type:     punch;\n
autoinput !  device:           punc;\n
autoinput !  max_queues:       1;\n
autoinput Request_type:       dummy;\n
autoinput !  generic_type:     none;\n
autoinput !  device:           rdra;\n
autoinput !  device:           rdrb;\n
autoinput !  device:           rdrc;\n
autoinput !  max_queues:       1;\n
autoinput End;\n
autoinput \wf\n
autoinput 1,$s/!//\n
autoinput 1,$p\n
autoinput w\n
autoinput y\n
autoinput q\n
autoinput iod_tables_compiler iod_tables.iodt\n
autoinput cp iod_tables iod_working_tables\n
autoinput y\n
autoinput cdq\n
autoinput ame\n

;;;
;;; Replace admin.ec
;;;

autoinput admin\n
autoinput qedx\n
autoinput r >sc1>admin.ec\n
autoinput 1,$d\n
autoinput a\n
autoinput &  ******************************************************\n
autoinput &  *                                                    *\n
autoinput &  * Copyright, (C) Honeywell Bull Inc., 1987           *\n
autoinput &  *                                                    *\n
autoinput &  * Copyright (c) 1972 by Massachusetts Institute of   *\n
autoinput &  * Technology and Honeywell Information Systems, Inc. *\n
autoinput &  *                                                    *\n
autoinput &  ******************************************************\n
autoinput &\n
autoinput &\n
autoinput & ADMIN.EC - extended operator commands.\n
autoinput &\n
autoinput & This exec_com is invoked from system_control_ when the operator says\n
autoinput &                   x function arg1 arg2 ...\n
autoinput &\n
autoinput & "admin" mode is set so the console which issued the "x" will get the output.\n
autoinput &\n
autoinput &goto &1\n
autoinput &\n
autoinput & MODIFICATION HISTORY\n
autoinput &\n
autoinput & Modified 1895-03-18, BIM: added complete_dump, wakeup_dump, and end_dump\n
autoinput & Modified 1985-05-08, E. Swenson: fixed  requoting problems as per Gary\n
autoinput &   Dixon's changes.\n
autoinput &\n
autoinput & \n
autoinput &  HISTORY COMMENTS:\n
autoinput &   1) change(1987-07-30,Beattie), approve(1987-07-20,MCR7743),\n
autoinput &      audit(1987-08-04,Brunelle), install(1987-08-06,MR12.1-1068):\n
autoinput &      Add check to look for admin_dsa.ec before complaining about\n
autoinput &      functions unknown to this exec_com.  Pass along arguments if\n
autoinput &      found.\n
autoinput &   2) change(2018-01-12,Swenson), approve(2018-01-12,MCR10040),\n
autoinput &      audit(2018-01-13,GDixon), install(2018-01-16,MR12.6g-0003):\n
autoinput &      Fix "x repair" entry to not cause an answering service dump if no\n
autoinput &      arguments are supplied.\n
autoinput &   3) change(2018-01-17,Swenson), approve(2018-01-17,MCR10045),\n
autoinput &      audit(2018-01-23,Anthony), install(2018-01-23,MR12.6g-0011):\n
autoinput &      Fix "x vcons" to not use obsolete control argument -skip_incr_count N\n
autoinput &      to consolidated_volume_dump command.\n
autoinput &                                                       END HISTORY COMMENTS\n
autoinput & \n
autoinput &\n
autoinput & -----------------------------------------------------------------\n
autoinput & I/O daemons\n
autoinput &\n
autoinput &  x io   starts coordinator, prta, prtb, prtc prtd\n
autoinput &  x io1  starts coordinator, prta, prtb, prtc prtd, puna, punb, punc\n
autoinput &\n
autoinput &label io\n
autoinput &label io1\n
autoinput sc_command r cord coordinator\n
autoinput pause 10\n
autoinput &label prta\n
autoinput sc_command r prta driver\n
autoinput sc_command r prta prta\n
autoinput sc_command r prta go\n
autoinput pause 3\n
autoinput sc_command r prtb driver\n
autoinput sc_command r prtb prtb\n
autoinput sc_command r prtb go\n
autoinput pause 3\n
autoinput sc_command r prtc driver\n
autoinput sc_command r prtc prtc\n
autoinput sc_command r prtc go\n
autoinput pause 3\n
autoinput sc_command r prtd driver\n
autoinput sc_command r prtd prtd\n
autoinput sc_command r prtd go\n
autoinput pause 3\n
autoinput &if [equal &r1 io1] &then &goto punch\n
autoinput &quit\n
autoinput &\n
autoinput &label punch\n
autoinput &label puna\n
autoinput sc_command r puna driver\n
autoinput sc_command r puna puna\n
autoinput sc_command r puna go\n
autoinput pause 1\n
autoinput sc_command r punb driver\n
autoinput sc_command r punb punb\n
autoinput sc_command r punb go\n
autoinput pause 1\n
autoinput sc_command r punc driver\n
autoinput sc_command r punc punc\n
autoinput sc_command r punc go\n
autoinput pause 1\n
autoinput &quit\n
autoinput &\n
autoinput &label punch_end\n
autoinput &label end_punch\n
autoinput sc_command r puna halt\n
autoinput sc_command r puna new_device\n
autoinput sc_command r punb halt\n
autoinput sc_command r punb new_device\n
autoinput sc_command r punc halt\n
autoinput sc_command r punc new_device\n
autoinput &quit\n
autoinput &\n
autoinput &label punch_restart\n
autoinput sc_command r puna puna\n
autoinput sc_command r puna go\n
autoinput sc_command r punb punb\n
autoinput sc_command r punb go\n
autoinput sc_command r punc punc\n
autoinput sc_command r punc go\n
autoinput &quit\n
autoinput &\n
autoinput &label read_cards\n
autoinput &label cards\n
autoinput &label rc\n
autoinput clean_card_pool -age 7\n
autoinput & delete all card input over 7 days old\n
autoinput sc_command login IO SysDaemon rdra\n
autoinput pause 1\n
autoinput sc_command login IO SysDaemon rdrb\n
autoinput pause 1\n
autoinput sc_command login IO SysDaemon rdrc\n
autoinput pause 10\n
autoinput sc_command r rdra driver\n
autoinput sc_command r rdra rdra\n
autoinput sc_command r rdra read_cards\n
autoinput pause 3\n
autoinput sc_command r rdrb driver\n
autoinput sc_command r rdrb rdrb\n
autoinput sc_command r rdrb read_cards\n
autoinput pause 3\n
autoinput sc_command r rdrc driver\n
autoinput sc_command r rdrc rdrc\n
autoinput sc_command r rdrc read_cards\n
autoinput pause 3\n
autoinput &quit\n
autoinput &\n
autoinput &\n
autoinput &label reprint\n
autoinput &label rep\n
autoinput &\n
autoinput & exec_com to reprint a file for a user.\n
autoinput &\n
autoinput dprint -q 1 -he REPRINT -ds &r3 &r2\n
autoinput &quit\n
autoinput &\n
autoinput & -----------------------------------------------------------------\n
autoinput &  Commands to control automatic, attended, and unattended modes\n
autoinput &\n
autoinput &label auto\n
autoinput &  USAGE: x auto on OR x auto off\n
autoinput &\n
autoinput &if [nequal &n 2] &then &else &goto auto_error\n
autoinput &if [equal &r2 on] &then &else &goto not_auto_on\n
autoinput set_flagbox auto_reboot true\n
autoinput &quit\n
autoinput &label not_auto_on\n
autoinput &if [equal &r2 off] &then &else &goto auto_error\n
autoinput set_flagbox auto_reboot false\n
autoinput &quit\n
autoinput &\n
autoinput &label auto_error\n
autoinput &print --------->>> ERROR. USAGE: x auto on OR x auto off\n
autoinput &quit\n
autoinput &\n
autoinput &label attend\n
autoinput &label attended\n
autoinput reconfigure_rcp$add_device tape_(01 02 03 04 05 06 07 08)\n
autoinput sc_command word login\n
autoinput & flagbox 5 = "1"b means "unattended"\n
autoinput set_flagbox 5 false\n
autoinput &quit\n
autoinput &\n
autoinput &label unattend\n
autoinput &label unattended\n
autoinput reconfigure_rcp$del_device tape_(01 02 03 04 05 06 07 08)\n
autoinput sc_command word login Unattended service\n
autoinput set_flagbox 5 true\n
autoinput set_flagbox auto_reboot true\n
autoinput set_flagbox rebooted false\n
autoinput &quit\n
autoinput &\n
autoinput & -----------------------------------------------------------------\n
autoinput & Allow the operator to interrogate the state of the IO queues.\n
autoinput &\n
autoinput &label print_queues\n
autoinput &label pq\n
autoinput &\n
autoinput & exec_com to print total requests in the I/O Daemon queues\n
autoinput &\n
autoinput ldr -a -tt &rf2\n
autoinput &\n
autoinput &quit\n
autoinput &\n
autoinput & -----------------------------------------------------------------\n
autoinput & Incremental, Consolidated, and Complete Volume Dumps\n
autoinput &\n
autoinput &label incremental_volume\n
autoinput &label vinc\n
autoinput & usage: exec vinc ARG1 \n
autoinput & ARG1 = the operator's initials\n
autoinput &\n
autoinput &if [not [exists argument &r2]] &then &goto error\n
autoinput sc_command r vinc incremental_volume_dump -control sys_vols -operator &r2  -error_on -auto &rf3\n
autoinput &quit\n
autoinput &\n
autoinput &label consolidated_volume\n
autoinput &label vcons\n
autoinput &\n
autoinput & exec_com to allow the operators to easily run consolidated volume dumping.\n
autoinput &\n
autoinput & ARG1 = the operator's initials\n
autoinput &\n
autoinput &\n
autoinput &if [not [exists argument &r2]] &then &goto error\n
autoinput sc_command login Volume_Dumper Daemon vcons\n
autoinput pause 10\n
autoinput sc_command r vcons consolidated_volume_dump -control sys_vols -operator &r2 -error_on -auto -purge_volume_log &rf3\n
autoinput &quit\n
autoinput &\n
autoinput &label vcomp\n
autoinput &label complete_volume\n
autoinput & usage: exec vcomp ARG1 \n
autoinput & ARG1 = the operator's initials\n
autoinput &\n
autoinput &if [not [exists argument &r2]] &then &goto error\n
autoinput sc_command login Volume_Dumper Daemon vcomp\n
autoinput pause 10\n
autoinput sc_command r vcomp complete_volume_dump -control sys_vols -operator &r2  -error_on -auto &rf3\n
autoinput &quit\n
autoinput &\n
autoinput &\n
autoinput & -----------------------------------------------------------------\n
autoinput & Incremental and Catchup Dumps\n
autoinput &\n
autoinput &label inc\n
autoinput & usage: exec inc ARG1 ARG2\n
autoinput & ARG1 = the operator's initials\n
autoinput & ARG2 = the first tape to be used\n
autoinput &\n
autoinput &if [not [exists argument &r3]] &then &goto error\n
autoinput sc_command r bk start_dump sys_dirs &r2 1 60\n
autoinput sc_command r bk &r3\n
autoinput &quit\n
autoinput &\n
autoinput &label cat\n
autoinput &\n
autoinput & exec_com to allow the operators to easily run catchup dumping.\n
autoinput &\n
autoinput & usage: exec cat ARG1 ARG2 -ARG3 ARG4-\n
autoinput &\n
autoinput & ARG1 = the operator's initials\n
autoinput & ARG2 = the first tape to be used\n
autoinput & ARG3 ARG4 (optional) = the date/time from which to start dumping (03/29/73 0800.0)\n
autoinput &\n
autoinput & example:  exec cat JW CAT21 03/29/73 0800.\n
autoinput &\n
autoinput &if [not [exists argument &r3]] &then &goto error\n
autoinput &if [exists argument &r4] &then sc_command r bk catchup_dump sys_dirs &r2 1 60  [string &r4 &r5]\n
autoinput &else sc_command r bk catchup_dump sys_dirs &r2 1 60\n
autoinput sc_command r bk &r3\n
autoinput &quit\n
autoinput &\n
autoinput & ------------------------------------------------------------\n
autoinput &\n
autoinput & hierarchy complete dumps\n
autoinput &\n
autoinput & USAGE: x comp INITIALS CONTROL_FILE TAPE_REEL\n
autoinput & \n
autoinput &label complete\n
autoinput &label comp\n
autoinput &\n
autoinput value_set -pp exec.cd_retry_count 0\n
autoinput &if [exists argument &r4] &then &goto .complete_args_ok\n
autoinput &print x complete: USAGE: x comp INITIALS CONTROL_FILE TAPE_REEL\n
autoinput &                                &2       &3           &4\n
autoinput &goto error\n
autoinput &label .complete_args_ok\n
autoinput &if [exists argument [as_who Dumper.SysDaemon -daemon -channel cd]] &then &goto .complete_logged_in\n
autoinput &label .retry_complete_login\n
autoinput &if [nless [value_get -pp exec.cd_retry_count] 3] &then &goto .complete_login\n
autoinput &print x complete: failed 3 tries to login Dumper.SysDaemon cd. \n
autoinput &goto error\n
autoinput &label .complete_login\n
autoinput value_set -pp exec.cd_retry_count -add 1\n
autoinput sc_command login Dumper.SysDaemon cd\n
autoinput pause 5\n
autoinput &goto .complete_args_ok\n
autoinput &label .complete_logged_in\n
autoinput sc_command r cd complete_dump -control &r3 -operator &r2\n
autoinput sc_command r cd &r4\n
autoinput &quit\n
autoinput &\n
autoinput & ------------------------------------------------------------\n
autoinput &\n
autoinput & WAKEUP_DUMP will wakeup the volume or hierarchy incremental\n
autoinput &\n
autoinput & USAGE: x wakeup_dump MC_SOURCE\n
autoinput &\n
autoinput &label wakeup_dump\n
autoinput &if [exists argument &r2] &then &goto .wakeup_args_ok\n
autoinput &print x wakeup_dump: USAGE: x wakeup_dump vinc|bk\n
autoinput &goto error\n
autoinput &label .wakeup_args_ok\n
autoinput &if [not [equal &r2 bk]] &then &goto .wakeup_not_bk\n
autoinput &if [not [exists argument [as_who -channel bk -daemon]]] &then &goto .wakeup_no_daemon\n
autoinput sc_command r bk wakeup_dump\n
autoinput &quit\n
autoinput &label .wakeup_not_bk\n
autoinput &if [not [equal &r2 vinc]] &then &goto .wakeup_not_vinc\n
autoinput &if [not [exists argument [as_who -channel vinc -daemon]]] &then &goto .wakeup_no_daemon\n
autoinput sc_command r vinc wakeup_volume_dump\n
autoinput &quit\n
autoinput &label .wakeup_not_vinc\n
autoinput &print x wakeup_dump: argument must be vinc or bk, not &r2.\n
autoinput &goto error\n
autoinput &label .wakeup_no_daemon\n
autoinput &print x wakeup_dump: No daemon logged in on source &rf2.\n
autoinput &goto error\n
autoinput & ------------------------------------------------------------\n
autoinput &\n
autoinput & END_DUMP will end the volume or hierarchy incremental\n
autoinput &\n
autoinput & USAGE: x end_dump MC_SOURCE\n
autoinput &\n
autoinput &label end_dump\n
autoinput &if [exists argument &r2] &then &goto .end_args_ok\n
autoinput &print x end_dump: USAGE: x end_dump vinc|bk\n
autoinput &goto error\n
autoinput &label .end_args_ok\n
autoinput &if [not [equal &r2 bk]] &then &goto .end_not_bk\n
autoinput &if [not [exists argument [as_who -channel bk -daemon]]] &then &goto .end_no_daemon\n
autoinput sc_command r bk end_dump\n
autoinput &quit\n
autoinput &label .end_not_bk\n
autoinput &if [not [equal &r2 vinc]] &then &goto .end_not_vinc\n
autoinput &if [not [exists argument [as_who -channel vinc -daemon]]] &then &goto .end_no_daemon\n
autoinput sc_command r vinc end_volume_dump\n
autoinput &quit\n
autoinput &label .end_not_vinc\n
autoinput &print x end_dump: argument must be vinc or bk, not &r2.\n
autoinput &goto error\n
autoinput &label .end_no_daemon\n
autoinput &print x end_dump: No daemon logged in on source &r2.\n
autoinput &goto error\n
autoinput &\n
autoinput & -----------------------------------------------------------------\n
autoinput & Things related to FDUMP processing.\n
autoinput &\n
autoinput &label copy_dump\n
autoinput &\n
autoinput & This exec is used to copy an FDUMP from the dump\n
autoinput & partition into the Multics hierarchy (in >dumps).\n
autoinput & This operation is not needed usually since system_start_up.ec does it.\n
autoinput &\n
autoinput copy_dump\n
autoinput &quit\n
autoinput &\n
autoinput &label set_fdump_number\n
autoinput &label set_fdump\n
autoinput &label sfdn\n
autoinput &\n
autoinput & This exec is used to set the ERF number of the next\n
autoinput & FDUMP to be taken to a specified value.\n
autoinput &\n
autoinput copy_dump$set_fdump_number &r2\n
autoinput &quit\n
autoinput & \n
autoinput &label delete_dump\n
autoinput &label dd\n
autoinput &\n
autoinput & exec_com to delete a dump\n
autoinput &\n
autoinput &if [exists argument &r2] &then &else &print delete_dump: missing dump_number\n
autoinput &if [exists argument &r2] &then &else &quit\n
autoinput deleteforce >dumps>*.*.*.&r2.**\n
autoinput &quit\n
autoinput &\n
autoinput &\n
autoinput &\n
autoinput & -----------------------------------------------------------------\n
autoinput & Sometimes the tabs on the TN300 get destroyed by an operator\n
autoinput & who types without waiting for the OPER: message.\n
autoinput & This will put the tabs back.\n
autoinput &\n
autoinput &label reset_tabs\n
autoinput &label tabs\n
autoinput &label rt\n
autoinput &\n
autoinput &command_line off\n
autoinput set_tty -terminal_type TN300 -tabs\n
autoinput &quit\n
autoinput &\n
autoinput & -----------------------------------------------------------------\n
autoinput &\n
autoinput &label echoplex\n
autoinput &\n
autoinput & Exec_com to allow operator to switch terminal into full (echoplex) duplex mode.\n
autoinput &\n
autoinput & Usage: x echoplex  (to set the terminal to echoplex mode)\n
autoinput &        x echoplex ^ (to turn off echoplex mode)\n
autoinput &\n
autoinput &\n
autoinput set_tty -modes &r2echoplex\n
autoinput &quit\n
autoinput &\n
autoinput & -----------------------------------------------------------------\n
autoinput & exec_coms to set and reset access on phcs_\n
autoinput &\n
autoinput &label set_phcs_access\n
autoinput &label spa\n
autoinput hpsa >system_library_1>phcs_ re &r2\n
autoinput &quit\n
autoinput &\n
autoinput &label reset_phcs_access\n
autoinput &label rpa\n
autoinput hpda >system_library_1>phcs_ &r2\n
autoinput &quit\n
autoinput &\n
autoinput & -----------------------------------------------------------------\n
autoinput & exec_com to setup the system in preparation for a metering run.\n
autoinput &\n
autoinput &\n
autoinput &label meter\n
autoinput &\n
autoinput sc_command quit nw\n
autoinput sc_command quit ns\n
autoinput sc_command logout IO * *\n
autoinput sc_command r bk logout\n
autoinput sc_command r mt setup\n
autoinput pause 10\n
autoinput & Give time for Network_Daemon and Network_Server to receive the quits\n
autoinput sc_command r nw logout\n
autoinput sc_command r ns logout\n
autoinput sc_command abs start 40 1\n
autoinput &print ********* Make sure all Daemons (except Metering) are logged out and then "r mt run" **********\n
autoinput &quit\n
autoinput &\n
autoinput & ==========================================================================================\n
autoinput &\n
autoinput &         ec to perform salvaging/quota validation\n
autoinput &         B. Greenberg 9/13/76\n
autoinput &\n
autoinput & Usage:  ec admin repair salv      dirname nprocs salvargs   for dir salvage\n
autoinput & Usage:  ec admin repair quota     dirname nprocs            for quota-used correction\n
autoinput & Usage:  ec admin repair salvquota dirname nprocs salvargs   for both.\n
autoinput & Usage:  ec admin repair stop                                kill multiprocessing.\n
autoinput &                  &1     &2        &3      &4     &5\n
autoinput &\n
autoinput &\n
autoinput \n
autoinput &label repair\n
autoinput &command_line off\n
autoinput &if [not [exists argument &r2]] &then &goto repair.explsalvctl\n
autoinput &if [equal &r2 stop] &then &goto repair.stop\n
autoinput &if [or [exists argument &r5] [not [exists argument &r4]]] &then &goto repair.explsalvctl\n
autoinput ec &ec_dir>&ec_name &rf1 -compact\n
autoinput &quit\n
autoinput &label repair.explsalvctl\n
autoinput &if [nless &n 4] &then &goto repair.usage\n
autoinput &if [nequal [verify &r4 0123456789] 0] &then &else &goto repair.badnprocs\n
autoinput &if [nequal &r4 0] &then &goto repair.badnprocs\n
autoinput &if [nless &r4 37] &then &goto repair.nprocsok\n
autoinput &label repair.badnprocs\n
autoinput &print admin.ec Number of processes (&4) is not number from 1 to 36.\n
autoinput &goto repair.usage\n
autoinput &\n
autoinput &label repair.nprocsok\n
autoinput &\n
autoinput &if [equal &r2 salv] &then &goto repair.1\n
autoinput &if [equal &r2 quota] &then &goto repair.1\n
autoinput &if [equal &r2 salvquota] &then &goto repair.1\n
autoinput &print admin.ec: invalid argument &r2 given to x repair\n
autoinput &label repair.usage\n
autoinput &print Usage: x repair salv/quota/salvquota dirname nprocs\n
autoinput &print Or: x repair stop, to log out processes\n
autoinput &quit\n
autoinput &label repair.1\n
autoinput &if [equal &r2 salv]\n
autoinput &then ec &ec_dir>&ec_name repair.2  "salvage_dir &r(1) &r(2).salvout &rf5" ""  &r3 &r4\n
autoinput &if [equal &r2 quota]\n
autoinput &then ec &ec_dir>&ec_name repair.2 "" "fix_quota_used &r(1)" &r3 &r4\n
autoinput &if [equal &r2 salvquota]\n
autoinput &then ec &ec_dir>&ec_name repair.2 "salvage_dir &r(1) &r(2).salvout &rf5" "fix_quota_used &r(1)" &r3 &r4\n
autoinput &quit\n
autoinput &label repair.2\n
autoinput &command_line off\n
autoinput &\n
autoinput &         This is an internal interface used by x repair.\n
autoinput &\n
autoinput & Usage:  ec admin repair.2 topdown_comline bottomup_comline dirname nprocs\n
autoinput &                  &1       &2              &3               &4      &5\n
autoinput &\n
autoinput &\n
autoinput &if [equal &r4 >] &then &goto repair.3\n
autoinput &  exists af doesnt like >.\n
autoinput &if [exists directory &r4] &then &goto repair.3\n
autoinput &print admin.ec: &r4 is not a directory.\n
autoinput &quit\n
autoinput &\n
autoinput &label repair.3\n
autoinput dl >user_dir_dir>SysDaemon>Salvager>dos_mp_seg -brief\n
autoinput sc_command login Salvager SysDaemon s0 \n
autoinput &if [nequal &r5 1] &then &else sc_command login Salvager SysDaemon s([index_set [minus &r5 1]])\n
autoinput pause 10\n
autoinput & It is illegal for both the top-down and bottom-up command lines to be null.\n
autoinput & If top-down command line is null, do the bottom-up command line.\n
autoinput &if [equal "" &r2]\n
autoinput &then sc_command reply s0 do_subtree """&q4""" -bu """&q3""" -priv -mp\n
autoinput & If bottom-up command line is null, do the top-down command line.\n
autoinput &if [equal "" &r3]\n
autoinput &then sc_command reply s0 do_subtree """&q4""" -td """&q2""" -priv -mp\n
autoinput & If neither is null, do both top-down and bottom-up command lines.\n
autoinput &if [and [not ([equal "" (&r2 &r3)])]]\n
autoinput &then sc_command reply s0 do_subtree """&q4""" -td """&q2""" -bu """&q3""" -priv -mp\n
autoinput & In the three command lines above, the arguments to do_subtree must be\n
autoinput & doubly-quoted to ensure that the command lines are seen by do_subtree as\n
autoinput & a single argument, and to prevent the operator from including random\n
autoinput & command fragments in the directory pathname.  Double quotes are required\n
autoinput & because the command_processor_ removes one level of quotes when processing\n
autoinput & the sc_command.  Thus, do_subtree only sees one level of quoting.\n
autoinput & Note that processing of the reply request does NOT remove a level of quotes.\n
autoinput &\n
autoinput &quit\n
autoinput &label repair.stop\n
autoinput sc_command login Salvager SysDaemon s99\n
autoinput &quit\n
autoinput & ================================================================================================\n
autoinput &\n
autoinput &        ec to deny device to a process\n
autoinput &\n
autoinput &label deny\n
autoinput &command_line off\n
autoinput &\n
autoinput & Usage:   x deny <devname>\n
autoinput &\n
autoinput &if [exists argument &r2] &then ur &r2 -am\n
autoinput &else &print admin.ec: no device name given to x deny.\n
autoinput &quit\n
autoinput &\n
autoinput & ==========================================================================================\n
autoinput &\n
autoinput &         ec to authenticate a tape or disk device\n
autoinput &\n
autoinput &label auth\n
autoinput &command_line off\n
autoinput &if [exists argument &r3] &then authenticate_device &rf2\n
autoinput &else &print admin.ec: Usage: x auth devname AUTH\n
autoinput &quit\n
autoinput & =========================================================================================\n
autoinput &\n
autoinput &         ec to give response via the opr_query_response facility\n
autoinput &\n
autoinput &label oqr\n
autoinput &command_line off\n
autoinput &if [exists argument &r2] &then opr_query_response &rf2\n
autoinput &else &print admin.ec: Usage: x oqr response\n
autoinput &quit\n
autoinput & =========================================================================================\n
autoinput &\n
autoinput &\n
autoinput & ===========================================================================================\n
autoinput &   \n
autoinput &   x scav {scavenge_vol args}\n
autoinput &\n
autoinput & ===========================================================================================\n
autoinput &\n
autoinput &label scav\n
autoinput &command_line off\n
autoinput ec &ec_dir>admin_1 &rf1\n
autoinput &quit\n
autoinput & =========================================================================================\n
autoinput &\n
autoinput & Come here if there is a missing argument.\n
autoinput &\n
autoinput &label error\n
autoinput &print --------->>>> ERROR in &1. Missing argument. <<<<<--------\n
autoinput &quit\n
autoinput &\n
autoinput & *****************************************************************************\n
autoinput & \n
autoinput & END OF ADMINISTRATIVE EXEC COM\n
autoinput & The following will catch any call not included above.\n
autoinput &\n
autoinput & This will invoke admin_dsa.ec for all "x FUNCTIONS ..." not found above\n
autoinput & in this exec_com.  It will complain if it doesn't implement the requested\n
autoinput & FUNCTION.  If DSA is not installed, then complain here.\n
autoinput &\n
autoinput &label &1\n
autoinput &if [exists segment >site>dsa>ecs>admin_dsa.ec]\n
autoinput &then exec_com >site>dsa>ecs>admin_dsa &rf1\n
autoinput &else &goto admin.bad_exec_arg\n
autoinput &quit\n
autoinput &\n
autoinput &label admin.bad_exec_arg\n
autoinput &print Invalid argument "&1" given to "exec".\n
autoinput &quit\n
autoinput \wf\n
autoinput 1,$p\n
autoinput w\n
autoinput y\n
autoinput q\n
autoinput ame\n

;;;
;;; Setup some card reader stuff (AK50, chap 21)
;;;

autoinput admin\n
autoinput create >udd>RingZero>Clayton>card_input.acs\n
autoinput sa >udd>RingZero>Clayton>card_input.acs re reader.*.*\n
autoinput create >udd>SysAdmin>Clayton>card_input.acs\n
autoinput sa >udd>SysAdmin>Clayton>card_input.acs re reader.*.*\n

autoinput create >sc1>rcp>reader.acs\n
autoinput sa >sc1>rcp>reader.acs re *.*.*\n
autoinput sa >sc1>rcp>reader.acs rew *.SysAdmin.*\n
autoinput ame\n

;;;
;;; logout everybody
;;;

autoinput logout * *\n

;;;
;;; Pause to let tasks logout
;;;

autoinput admin\n
autoinput pause 30\n
autoinput ame\n

;;;
;;; Shut it down
;;;

autoinput shut\n
autoinput \xbce\x
autoinput die \n
autoinput y \n

autoinput \z

boot iom0

! touch ../.yoyodyne.s4

quit
